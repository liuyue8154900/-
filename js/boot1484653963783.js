/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

/*! jquery.cookie v1.4.1 | MIT */

/*
 AngularJS v1.3.8
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/

/**
 * State-based routing for AngularJS
 * @version v0.2.15
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

/**
 * @license AngularJS v1.3.0-beta.14
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */

/*
 AngularJS v1.2.9
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
 */

//---------------------------------------------------------------------
//
// QR Code Generator for JavaScript
//
// Copyright (c) 2009 Kazuhiko Arase
//
// URL: http://www.d-project.com/
//
// Licensed under the MIT license:
//  http://www.opensource.org/licenses/mit-license.php
//
// The word 'QR Code' is registered trademark of
// DENSO WAVE INCORPORATED
//  http://www.denso-wave.com/qrcode/faqpatent-e.html
//
//---------------------------------------------------------------------

//---------------------------------------------------------------------
//
// QR Code Generator for JavaScript UTF8 Support (optional)
//
// Copyright (c) 2011 Kazuhiko Arase
//
// URL: http://www.d-project.com/
//
// Licensed under the MIT license:
//  http://www.opensource.org/licenses/mit-license.php
//
// The word 'QR Code' is registered trademark of
// DENSO WAVE INCORPORATED
//  http://www.denso-wave.com/qrcode/faqpatent-e.html
//
//---------------------------------------------------------------------

/*
 * angular-qrcode v6.0.3
 * (c) 2013 Monospaced http://monospaced.com
 * License: MIT
 */

/*
 * Copyright 2013 Ivan Pusic
 * Contributors:
 *   Matjaz Lipus
 */

/**
 * carouselar v0.1.0 (http://tamerayd.in/carouselar)
 * Copyright 2016 Tamer Aydin (http://tamerayd.in)
 * Licensed under MIT
 */

/*!
 * Cropper v0.10.1
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2015 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2015-07-05T10:44:58.203Z
 */

/*!
 * Cropper v0.10.0
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2015 Fengyuan Chen and other contributors
 * Released under the MIT license
 *
 * Date: 2015-06-08T14:57:26.353Z
 */

/*!
 * UEditor Mini版本
 * version: 1.2.2
 * build: Wed Mar 19 2014 17:14:14 GMT+0800 (中国标准时间)
 */

/**
 * @license AngularJS v1.2.9
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 * Created by Zed on 19-11-2014.
 */

!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this
,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!
n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?""
:(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a
);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+ -(new Date),v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new 
RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length]
.nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I
.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[
e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length
}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"
),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&1===d.nodeType&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d))}:function(a
,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.
document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,
match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a
){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===
l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb
(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y
.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h))
)&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f
,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches
),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof 
a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a
.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector
(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in 
b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d
;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(
a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&
k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!!h&&!!h.length},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then
:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction
(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b
,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set
(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b
)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks
(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=
function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+
p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray
(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call
(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which"
.split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target
.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===
a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a
.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj
,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,
ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase
();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===
n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},
before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob
(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl
(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue
(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&
n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;
return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===
c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:
function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(
this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&
this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber
[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(
a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in 
g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(
a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject
(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),
n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"
),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1
),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a)
{return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this
).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;
n.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(
b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate
:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c
,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)
f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter
:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=
n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==
k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(!k.beforeSend||k.beforeSend.call(l,v,k)!==!1&&2!==t){u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger
(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v}return v.abort()},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this
)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=
encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!
Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/
},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test
(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText
,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-
b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void (g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.
test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n}),!function(a){"function"==typeof define&&define.amd?define("jcookie",["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(
a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults=
{},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(M,Y,t){function T(b){return function(){var a=arguments[0],c;c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.8/"+(b?b+"/":"")+a;for(a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var d=encodeURIComponent,e;e=arguments[a],e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e,c+=d(e)}return Error(c)}}function Ta(b){if(null==b||Ua(b))return!1;var a=b.length;return b.nodeType===na&&a?!0:F(b)||x(b)||0===a||"number"==typeof a&&0<a&&a-1 in b}function s(b,a,c){var d,e;if(b)if(G(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);else if(x(b)||Ta(b)){var f="object"!=typeof b;d=0;for(e=b.length;d<e;d++)(f||d in b)&&a.call(c,b[d],d,b)}else if(b.forEach&&b.forEach!==s)b.forEach(a,c,b);else for(d in b)b.hasOwnProperty
(d)&&a.call(c,b[d],d,b);return b}function Ed(b,a,c){for(var d=Object.keys(b).sort(),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function kc(b){return function(a,c){b(c,a)}}function Fd(){return++nb}function lc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function z(b){for(var a=b.$$hashKey,c=1,d=arguments.length;c<d;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;g<h;g++){var l=f[g];b[l]=e[l]}}return lc(b,a),b}function ba(b){return parseInt(b,10)}function C(){}function oa(b){return b}function da(b){return function(){return b}}function D(b){return"undefined"==typeof b}function y(b){return"undefined"!=typeof b}function H(b){return null!==b&&"object"==typeof b}function F(b){return"string"==typeof b}function V(b){return"number"==typeof b}function pa(b){return"[object Date]"===Da.call(b)}function G(b){return"function"==typeof b}function ob(b){return"[object RegExp]"===Da.call(b)}function Ua(b){return b&&b.window===b}function Va(b){return b&&b.$evalAsync&&b.$watch}function Wa
(b){return"boolean"==typeof b}function mc(b){return!!b&&!!(b.nodeName||b.prop&&b.attr&&b.find)}function Gd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=!0;return a}function ua(b){return Q(b.nodeName||b[0]&&b[0].nodeName)}function Xa(b,a){var c=b.indexOf(a);return 0<=c&&b.splice(c,1),a}function Ea(b,a,c,d){if(Ua(b)||Va(b))throw Ka("cpws");if(a){if(b===a)throw Ka("cpi");c=c||[],d=d||[];if(H(b)){var e=c.indexOf(b);if(-1!==e)return d[e];c.push(b),d.push(a)}if(x(b))for(var f=a.length=0;f<b.length;f++)e=Ea(b[f],null,c,d),H(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;x(a)?a.length=0:s(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=Ea(b[f],null,c,d),H(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);lc(a,g)}}else if(a=b)x(b)?a=Ea(b,[],c,d):pa(b)?a=new Date(b.getTime()):ob(b)?(a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):H(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Ea(b,e,c,d));return a}function qa(b,a){if(
x(b)){a=a||[];for(var c=0,d=b.length;c<d;c++)a[c]=b[c]}else if(H(b))for(c in a=a||{},b)if("$"!==c.charAt(0)||"$"!==c.charAt(1))a[c]=b[c];return a||b}function fa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c){if(!x(b)){if(pa(b))return pa(a)?fa(b.getTime(),a.getTime()):!1;if(ob(b)&&ob(a))return b.toString()==a.toString();if(Va(b)||Va(a)||Ua(b)||Ua(a)||x(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!G(b[d])){if(!fa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!G(a[d]))return!1;return!0}if(!x(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!fa(b[d],a[d]))return!1;return!0}}return!1}function Ya(b,a,c){return b.concat(Za.call(a,c))}function nc(b,a){var c=2<arguments.length?Za.call(arguments,2):[];return!G(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,Ya(c,arguments,0)):a.apply(b,c)}:function(){return arguments.length?a.apply
(b,arguments):a.call(b)}}function Hd(b,a){var c=a;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?c=t:Ua(a)?c="$WINDOW":a&&Y===a?c="$DOCUMENT":Va(a)&&(c="$SCOPE"),c}function $a(b,a){return"undefined"==typeof b?t:(V(a)||(a=a?2:null),JSON.stringify(b,Hd,a))}function oc(b){return F(b)?JSON.parse(b):b}function va(b){b=B(b).clone();try{b.empty()}catch(a){}var c=B("<div>").append(b).html();try{return b[0].nodeType===pb?Q(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Q(b)})}catch(d){return Q(c)}}function pc(b){try{return decodeURIComponent(b)}catch(a){}}function qc(b){var a={},c,d;return s((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=pc(c[0]),y(d)&&(b=y(c[1])?pc(c[1]):!0,rc.call(a,d)?x(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))}),a}function Nb(b){var a=[];return s(b,function(b,d){x(b)?s(b,function(b){a.push(Fa(d,!0)+(!0===b?"":"="+Fa(b,!0)))}):a.push(Fa(d,!0)+(!0===b?"":"="+Fa(b,!0)))}),a.length?a.join("&"):""}function qb(b)
{return Fa(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Fa(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+")}function Id(b,a){var c,d,e=rb.length;b=B(b);for(d=0;d<e;++d)if(c=rb[d]+a,F(c=b.attr(c)))return c;return null}function Jd(b,a){var c,d,e={};s(rb,function(a){a+="app",!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a))}),s(rb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))}),c&&(e.strictDi=null!==Id(c,"strict-di"),a(c,d?[d]:[],e))}function sc(b,a,c){H(c)||(c={}),c=z({strictDi:!1},c);var d=function(){b=B(b);if(b.injector()){var d=b[0]===Y?"document":va(b);throw Ka("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}return a=a||[],a.unshift(["$provide",function(a){a.value("$rootElement",b)}]),c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled
(!0)}]),a.unshift("ng"),d=Ob(a,c.strictDi),d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),d},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;M&&e.test(M.name)&&(c.debugInfoEnabled=!0,M.name=M.name.replace(e,""));if(M&&!f.test(M.name))return d();M.name=M.name.replace(f,""),ga.resumeBootstrap=function(b){s(b,function(b){a.push(b)}),d()}}function Kd(){M.name="NG_ENABLE_DEBUG_INFO!"+M.name,M.location.reload()}function Ld(b){b=ga.element(b).injector();if(!b)throw Ka("test");return b.get("$$testability")}function tc(b,a){return a=a||"_",b.replace(Md,function(b,d){return(d?a:"")+b.toLowerCase()})}function Nd(){var b;uc||((ra=M.jQuery)&&ra.fn.on?(B=ra,z(ra.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),b=ra.cleanData,ra.cleanData=function(a){var c;if(Pb)Pb=!1;else for(var d=0,e;null!=(e=a[d]);d++)(c=ra._data(e,"events"))&&c.$destroy&&
ra(e).triggerHandler("$destroy");b(a)}):B=R,ga.element=B,uc=!0)}function Qb(b,a,c){if(!b)throw Ka("areq",a||"?",c||"required");return b}function sb(b,a,c){return c&&x(b)&&(b=b[b.length-1]),Qb(G(b),a,"not a function, got "+(b&&"object"==typeof b?b.constructor.name||"Object":typeof b)),b}function Ma(b,a){if("hasOwnProperty"===b)throw Ka("badname",a)}function vc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&G(b)?nc(e,b):b}function tb(b){var a=b[0];b=b[b.length-1];var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return B(c)}function ha(){return Object.create(null)}function Od(b){function a(a,b,c){return a[b]||(a[b]=c())}var c=T("$injector"),d=T("ng");return b=a(b,"angular",Object),b.$$minErr=b.$$minErr||T,a(b,"module",function(){var b={};return function(f,g,h){if("hasOwnProperty"===f)throw d("badname","module");return g&&b.hasOwnProperty(f)&&(b[f]=null),a(b,f,function(){function a(c,d,e,f){return f||(f=b),function()
{return f[e||"push"]([c,d,arguments]),u}}if(!g)throw c("nomod",f);var b=[],d=[],e=[],q=a("$injector","invoke","push",d),u={_invokeQueue:b,_configBlocks:d,_runBlocks:e,requires:g,name:f,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:q,run:function(a){return e.push(a),this}};return h&&q(h),u})}})}function Pd(b){z(b,{bootstrap:sc,copy:Ea,extend:z,equals:fa,element:B,forEach:s,injector:Ob,noop:C,bind:nc,toJson:$a,fromJson:oc,identity:oa,isUndefined:D,isDefined:y,isString:F,isFunction:G,isObject:H,isNumber:V,isElement:mc,isArray:x,version:Qd,isDate:pa,lowercase:Q,uppercase:ub,callbacks:{counter:0},getTestability:Ld,$$minErr:T,$$csp:ab,reloadWithDebugInfo:Kd}),bb=Od(M);try{bb("ngLocale")}catch(a
){bb("ngLocale",[]).provider("$locale",Rd)}bb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Sd}),a.provider("$compile",wc).directive({a:Td,input:xc,textarea:xc,form:Ud,script:Vd,select:Wd,style:Xd,option:Yd,ngBind:Zd,ngBindHtml:$d,ngBindTemplate:ae,ngClass:be,ngClassEven:ce,ngClassOdd:de,ngCloak:ee,ngController:fe,ngForm:ge,ngHide:he,ngIf:ie,ngInclude:je,ngInit:ke,ngNonBindable:le,ngPluralize:me,ngRepeat:ne,ngShow:oe,ngStyle:pe,ngSwitch:qe,ngSwitchWhen:re,ngSwitchDefault:se,ngOptions:te,ngTransclude:ue,ngModel:ve,ngList:we,ngChange:xe,pattern:yc,ngPattern:yc,required:zc,ngRequired:zc,minlength:Ac,ngMinlength:Ac,maxlength:Bc,ngMaxlength:Bc,ngValue:ye,ngModelOptions:ze}).directive({ngInclude:Ae}).directive(vb).directive(Cc),a.provider({$anchorScroll:Be,$animate:Ce,$browser:De,$cacheFactory:Ee,$controller:Fe,$document:Ge,$exceptionHandler:He,$filter:Dc,$interpolate:Ie,$interval:Je,$http:Ke,$httpBackend:Le,$location:Me,$log:Ne,$parse:Oe,$rootScope:Pe,$q:Qe,$$q:Re,$sce:
Se,$sceDelegate:Te,$sniffer:Ue,$templateCache:Ve,$templateRequest:We,$$testability:Xe,$timeout:Ye,$window:Ze,$$rAF:$e,$$asyncCallback:af,$$jqLite:bf})}])}function cb(b){return b.replace(cf,function(a,b,d,e){return e?d.toUpperCase():d}).replace(df,"Moz$1")}function Ec(b){return b=b.nodeType,b===na||!b||9===b}function Fc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Rb.test(b)){c=c||e.appendChild(a.createElement("div")),d=(ef.exec(b)||["",""])[1].toLowerCase(),d=ia[d]||ia._default,c.innerHTML=d[1]+b.replace(ff,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=Ya(f,c.childNodes),c=e.firstChild,c.textContent=""}else f.push(a.createTextNode(b));return e.textContent="",e.innerHTML="",s(f,function(a){e.appendChild(a)}),e}function R(b){if(b instanceof R)return b;var a;F(b)&&(b=U(b),a=!0);if(!(this instanceof R)){if(a&&"<"!=b.charAt(0))throw Sb("nosel");return new R(b)}if(a){a=Y;var c;b=(c=gf.exec(b))?[a.createElement(c[1])]:(c=Fc(b,a))?c.childNodes:[]}Gc(this,b)}function Tb(b){return b.cloneNode
(!0)}function wb(b,a){a||xb(b);if(b.querySelectorAll)for(var c=b.querySelectorAll("*"),d=0,e=c.length;d<e;d++)xb(c[d])}function Hc(b,a,c,d){if(y(d))throw Sb("offargs");var e=(d=yb(b))&&d.events,f=d&&d.handle;if(f)if(a)s(a.split(" "),function(a){if(y(c)){var d=e[a];Xa(d||[],c);if(d&&0<d.length)return}b.removeEventListener(a,f,!1),delete e[a]});else for(a in e)"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a]}function xb(b,a){var c=b.ng339,d=c&&zb[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Hc(b)),delete zb[c],b.ng339=t))}function yb(b,a){var c=b.ng339,c=c&&zb[c];return a&&!c&&(b.ng339=c=++hf,c=zb[c]={events:{},data:{},handle:t}),c}function Ub(b,a,c){if(Ec(b)){var d=y(c),e=!d&&a&&!H(a),f=!a;b=(b=yb(b,!e))&&b.data;if(d)b[a]=c;else{if(f)return b;if(e)return b&&b[a];z(b,a)}}}function Ab(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function Bb(b,a){a&&b.setAttribute&&s(a.split(" "
),function(a){b.setAttribute("class",U((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+U(a)+" "," ")))})}function Cb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");s(a.split(" "),function(a){a=U(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),b.setAttribute("class",U(c))}}function Gc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;if("number"==typeof c&&a.window!==a){if(c)for(var d=0;d<c;d++)b[b.length++]=a[d]}else b[b.length++]=a}}function Ic(b,a){return Db(b,"$"+(a||"ngController")+"Controller")}function Db(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=x(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=B.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function Jc(b){for(wb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}function Kc(b,a){a||wb(b);var c=b.parentNode;c&&c.removeChild(b)}function jf(b,a){a=a||M,"complete"===a.document.readyState?a.setTimeout(b):B(a).on("load",b)}function Lc
(b,a){var c=Eb[a.toLowerCase()];return c&&Mc[ua(b)]&&c}function kf(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Nc[a]}function lf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=a[e||c.type],g=f?f.length:0;if(g){if(D(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped},1<g&&(f=qa(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||f[l].call(b,c)}};return c.elem=b,c}function bf(){this.$get=function(){return z(R,{hasClass:function(b,a){return b.attr&&(b=b[0]),Ab(b,a)},addClass:function(b,a){return b.attr&&(b=b[0]),Cb(b,a)},removeClass:function(b,a){return b.attr&&(b=b[0]),Bb(b,a)}})}}function Na(b,a){var c=b&&b.$$hashKey;return c?("function"==typeof c&&(c=b.$$hashKey()),c):(c=typeof b,c="function"==c||"object"==
c&&null!==b?b.$$hashKey=c+":"+(a||Fd)():c+":"+b)}function db(b,a){if(a){var c=0;this.nextUid=function(){return++c}}s(b,this.put,this)}function mf(b){return(b=b.toString().replace(Oc,"").match(Pc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Vb(b,a,c){var d;if("function"==typeof b){if(!(d=b.$inject)){d=[];if(b.length){if(a)throw F(c)&&c||(c=b.name||mf(b)),Ga("strictdi",c);a=b.toString().replace(Oc,""),a=a.match(Pc),s(a[1].split(nf),function(a){a.replace(of,function(a,b,c){d.push(c)})})}b.$inject=d}}else x(b)?(a=b.length-1,sb(b[a],"fn"),d=b.slice(0,a)):sb(b,"fn",!0);return d}function Ob(b,a){function c(a){return function(b,c){if(!H(b))return a(b,c);s(b,kc(a))}}function d(a,b){Ma(a,"service");if(G(b)||x(b))b=q.instantiate(b);if(!b.$get)throw Ga("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=r.invoke(b,this);if(D(c))throw Ga("undef",a);return c}}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b})}function g(a){var b=[],c;return s(a,function(
a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=q.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{F(a)?(c=bb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):G(a)?b.push(q.invoke(a)):x(a)?b.push(q.invoke(a)):sb(a,"module")}catch(e){throw x(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ga("modulerr",a,e.stack||e.message||e)}}}),b}function h(b,c){function d(a,e){if(b.hasOwnProperty(a)){if(b[a]===l)throw Ga("cdep",a+" <- "+k.join(" <- "));return b[a]}try{return k.unshift(a),b[a]=l,b[a]=c(a,e)}catch(f){throw b[a]===l&&delete b[a],f}finally{k.shift()}}function e(b,c,f,g){"string"==typeof f&&(g=f,f=null);var h=[],k=Vb(b,a,g),l,q,p;q=0;for(l=k.length;q<l;q++){p=k[q];if("string"!=typeof p)throw Ga("itkn",p);h.push(f&&f.hasOwnProperty(p)?f[p]:d(p,g))}return x(b)&&(b=b[l]),b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((x(a)?a[a.length-1]:a).
prototype);return a=e(a,d,b,c),H(a)||G(a)?a:d},get:d,annotate:Vb,has:function(a){return p.hasOwnProperty(a+"Provider")||b.hasOwnProperty(a)}}}a=!0===a;var l={},k=[],m=new db([],!0),p={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return f(a,da(b),!1)}),constant:c(function(a,b){Ma(a,"constant"),p[a]=b,u[a]=b}),decorator:function(a,b){var c=q.get(a+"Provider"),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},q=p.$injector=h(p,function(a,b){throw ga.isString(b)&&k.push(b),Ga("unpr",k.join(" <- "))}),u={},r=u.$injector=h(u,function(a,b){var c=q.get(a+"Provider",b);return r.invoke(c.$get,c,t,a)});return s(g(b),function(a){r.invoke(a||C)}),r}function Be(){var b=!0;this.disableAutoScrolling=function(){b=!1},this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){if("a"===ua(a))
return b=a,!0}),b}function f(b){if(b){b.scrollIntoView();var c;c=g.yOffset,G(c)?c=c():mc(c)?(c=c[0],c="fixed"!==a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):V(c)||(c=0),c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c))}else a.scrollTo(0,0)}function g(){var a=c.hash(),b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=a.document;return b&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||jf(function(){d.$evalAsync(g)})}),g}]}function af(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function pf(b,a,c,d){function e(a){try{a.apply(null,Za.call(arguments,1))}finally{if(v--,0===v)for(;w.length;)try{w.pop()()}catch(b){c.error(b)}}}function f(a,b){(function N(){s(L,function(a){a()}),J=b(N,a)})()}function g(){h(),l()}function h(){A=b.history.state,A=D(A)?null:A,fa(A,I)&&(A=I),I=A}function l(){if(E!==m.url()||P!==A)E=m.url(),P=A,s
(W,function(a){a(m.url(),A)})}function k(a){try{return decodeURIComponent(a)}catch(b){return a}}var m=this,p=a[0],q=b.location,u=b.history,r=b.setTimeout,O=b.clearTimeout,n={};m.isMock=!1;var v=0,w=[];m.$$completeOutstandingRequest=e,m.$$incOutstandingRequestCount=function(){v++},m.notifyWhenNoOutstandingRequests=function(a){s(L,function(a){a()}),0===v?a():w.push(a)};var L=[],J;m.addPollFn=function(a){return D(J)&&f(100,r),L.push(a),a};var A,P,E=q.href,S=a.find("base"),X=null;h(),P=A,m.url=function(a,c,e){D(e)&&(e=null),q!==b.location&&(q=b.location),u!==b.history&&(u=b.history);if(a){var f=P===e;if(E===a&&(!d.history||f))return m;var g=E&&Ha(E)===Ha(a);return E=a,P=e,!d.history||g&&f?(g||(X=a),c?q.replace(a):g?(c=q,e=a.indexOf("#"),a=-1===e?"":a.substr(e+1),c.hash=a):q.href=a):(u[c?"replaceState":"pushState"](e,"",a),h(),P=A),m}return X||q.href.replace(/%27/g,"'")},m.state=function(){return A};var W=[],wa=!1,I=null;m.onUrlChange=function(a){return wa||(d.history&&B(b).on("popstate",g),
B(b).on("hashchange",g),wa=!0),W.push(a),a},m.$$checkUrlChange=l,m.baseHref=function(){var a=S.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var ea={},y="",ca=m.baseHref();m.cookies=function(a,b){var d,e,f,g;if(!a){if(p.cookie!==y)for(y=p.cookie,d=y.split("; "),ea={},f=0;f<d.length;f++)e=d[f],g=e.indexOf("="),0<g&&(a=k(e.substring(0,g)),ea[a]===t&&(ea[a]=k(e.substring(g+1))));return ea}b===t?p.cookie=encodeURIComponent(a)+"=;path="+ca+";expires=Thu, 01 Jan 1970 00:00:00 GMT":F(b)&&(d=(p.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+ca).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"))},m.defer=function(a,b){var c;return v++,c=r(function(){delete n[c],e(a)},b||0),n[c]=!0,c},m.defer.cancel=function(a){return n[a]?(delete n[a],O(a),e(C),!0):!1}}function De(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new pf(b,d,a,c)}]}function Ee(){this.$get=function(
){function b(b,d){function e(a){a!=p&&(q?q==a&&(q=a.n):q=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw T("$cacheFactory")("iid",b);var g=0,h=z({},d,{id:b}),l={},k=d&&d.capacity||Number.MAX_VALUE,m={},p=null,q=null;return a[b]={put:function(a,b){if(k<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}if(!D(b))return a in l||g++,l[a]=b,g>k&&this.remove(q.key),b},get:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return l[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=m[a];if(!b)return;b==p&&(p=b.p),b==q&&(q=b.n),f(b.n,b.p),delete m[a]}delete l[a],g--},removeAll:function(){l={},g=0,m={},p=q=null},destroy:function(){m=h=l=null,delete a[b]},info:function(){return z({},h,{size:g})}}}var a={};return b.info=function(){var b={};return s(a,function(a,e){b[e]=a.info()}),b},b.get=function(b){return a[b]},b}}function Ve(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function wc(b,a){function c(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/
,d={};return s(a,function(a,e){var f=a.match(c);if(!f)throw ja("iscp",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}var d={},e=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,g=Gd("ngSrc,ngSrcset,src,srcset"),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/;this.directive=function p(a,e){return Ma(a,"directive"),F(a)?(Qb(e,"directiveFactory"),d.hasOwnProperty(a)||(d[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,e){var f=[];return s(d[a],function(d,g){try{var h=b.invoke(d);G(h)?h={compile:da(h)}:!h.compile&&h.link&&(h.compile=da(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||a,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",H(h.scope)&&(h.$$isolateBindings=c(h.scope,h.name)),f.push(h)}catch(l){e(l)}}),f}])),d[a].push(e)):s(a,kc(p)),this},this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist
()},this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};var k=!0;this.debugInfoEnabled=function(a){return y(a)?(k=a,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,r,O,n,v,w,L,J,A){function P(a,b){try{a.addClass(b)}catch(c){}}function E(a,b,c,d,e){a instanceof B||(a=B(a)),s(a,function(b,c){b.nodeType==pb&&b.nodeValue.match(/\S+/)&&(a[c]=B(b).wrap("<span></span>").parent()[0])});var f=S(a,b,a,c,d,e);E.$$addScopeClass(a);var g=null;return function(b,c,d){Qb(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;d=d.futureParentElement,e&&e.$$boundTransclude&&(e=e.$$boundTransclude),g||(g=(d=d&&d[0])?"foreignobject"!==ua(d)&&d.toString().match(/SVG/)?"svg":"html":"html"),d="html"!==g?B(Wb(g,B("<div>").append(a).html())):c?La.clone.call(a):a;if(h)for(var l in 
h)d.data("$"+l+"Controller",h[l].instance);return E.$$addScopeInfo(d,b),c&&c(d,b),f&&f(b,d,d,e),d}}function S(a,b,c,d,e,f){function g(a,c,d,e){var f,l,k,q,p,n,w;if(r)for(w=Array(c.length),q=0;q<h.length;q+=3)f=h[q],w[f]=c[f];else w=c;q=0;for(p=h.length;q<p;)l=w[h[q++]],c=h[q++],f=h[q++],c?(c.scope?(k=a.$new(),E.$$addScopeInfo(B(l),k)):k=a,n=c.transcludeOnThisElement?X(a,c.transclude,e,c.elementTranscludeOnThisElement):!c.templateOnThisElement&&e?e:!e&&b?X(a,b):null,c(f,k,l,d,n)):f&&f(a,l.childNodes,t,e)}for(var h=[],l,k,q,p,r,n=0;n<a.length;n++){l=new Xb,k=W(a[n],[],l,0===n?d:t,e),(f=k.length?ea(k,a[n],l,b,c,null,[],[],f):null)&&f.scope&&E.$$addScopeClass(l.$$element),l=f&&f.terminal||!(q=a[n].childNodes)||!q.length?null:S(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(n,f,l),p=!0,r=r||f;f=null}return p?g:null}function X(a,b,c,d){return function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers
:f,futureParentElement:g})}}function W(a,b,c,d,g){var h=c.$attr,l;switch(a.nodeType){case na:ca(b,ya(ua(a)),"E",d,g);for(var k,q,p,r=a.attributes,n=0,w=r&&r.length;n<w;n++){var O=!1,L=!1;k=r[n],l=k.name,q=U(k.value),k=ya(l);if(p=fb.test(k))l=l.replace(Rc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});var u=k.replace(/(Start|End)$/,"");D(u)&&k===u+"Start"&&(O=l,L=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6)),k=ya(l.toLowerCase()),h[k]=l;if(p||!c.hasOwnProperty(k))c[k]=q,Lc(a,k)&&(c[k]=!0);Pa(a,b,q,k,p),ca(b,k,"A",d,g,O,L)}a=a.className;if(F(a)&&""!==a)for(;l=f.exec(a);)k=ya(l[2]),ca(b,k,"C",d,g)&&(c[k]=U(l[3])),a=a.substr(l.index+l[0].length);break;case pb:M(b,a.nodeValue);break;case 8:try{if(l=e.exec(a.nodeValue))k=ya(l[1]),ca(b,k,"M",d,g)&&(c[k]=U(l[2]))}catch(v){}}return b.sort(N),b}function wa(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);a.nodeType==na&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push
(a),a=a.nextSibling}while(0<e)}else d.push(a);return B(d)}function I(a,b,c){return function(d,e,f,g,h){return e=wa(e[0],b,c),a(d,e,f,g,h)}}function ea(a,d,e,f,g,l,k,p,r){function w(a,b,c,d){if(a){c&&(a=I(a,c,d)),a.require=K.require,a.directiveName=z;if(S===K||K.$$isolateScope)a=Z(a,{isolateScope:!0});k.push(a)}if(b){c&&(b=I(b,c,d)),b.require=K.require,b.directiveName=z;if(S===K||K.$$isolateScope)b=Z(b,{isolateScope:!0});p.push(b)}}function L(a,b,c,d){var e,f="data",g=!1,l=c,k;if(F(b)){k=b.match(h),b=b.substring(k[0].length),k[3]&&(k[1]?k[3]=null:k[1]=k[3]),"^"===k[1]?f="inheritedData":"^^"===k[1]&&(f="inheritedData",l=c.parent()),"?"===k[2]&&(g=!0),e=null,d&&"data"===f&&(e=d[b])&&(e=e.instance),e=e||l[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);return e||null}return x(b)&&(e=[],s(b,function(b){e.push(L(a,b,c,d))})),e}function v(a,c,f,g,h){function l(a,b,c){var d;return Va(a)||(c=b,b=a,a=t),C&&(d=P),c||(c=C?W.parent():W),h(a,b,d,c,wa)}var r,w,u,A,P,eb,W,I;d===f?(I=e,W=e.$$element
):(W=B(f),I=new Xb(W,e)),S&&(A=c.$new(!0)),h&&(eb=l,eb.$$boundTransclude=h),J&&(X={},P={},s(J,function(a){var b={$scope:a===S||a.$$isolateScope?A:c,$element:W,$attrs:I,$transclude:eb};u=a.controller,"@"==u&&(u=I[a.name]),b=n(u,b,!0,a.controllerAs),P[a.name]=b,C||W.data("$"+a.name+"Controller",b.instance),X[a.name]=b}));if(S){E.$$addScopeInfo(W,A,!0,!ka||ka!==S&&ka!==S.$$originalDirective),E.$$addScopeClass(W,!0),g=X&&X[S.name];var xa=A;g&&g.identifier&&!0===S.bindToController&&(xa=g.instance),s(A.$$isolateBindings=S.$$isolateBindings,function(a,d){var e=a.attrName,f=a.optional,g,h,l,k;switch(a.mode){case"@":I.$observe(e,function(a){xa[d]=a}),I.$$observers[e].$$scope=c,I[e]&&(xa[d]=b(I[e])(c));break;case"=":if(f&&!I[e])break;h=O(I[e]),k=h.literal?fa:function(a,b){return a===b||a!==a&&b!==b},l=h.assign||function(){throw g=xa[d]=h(c),ja("nonassign",I[e],S.name)},g=xa[d]=h(c),f=function(a){return k(a,xa[d])||(k(a,g)?l(c,a=xa[d]):xa[d]=a),g=a},f.$stateful=!0,f=a.collection?c.$watchCollection
(I[e],f):c.$watch(O(I[e],f),null,h.literal),A.$on("$destroy",f);break;case"&":h=O(I[e]),xa[d]=function(a){return h(c,a)}}})}X&&(s(X,function(a){a()}),X=null),g=0;for(r=k.length;g<r;g++)w=k[g],$(w,w.isolateScope?A:c,W,I,w.require&&L(w.directiveName,w.require,W,P),eb);var wa=c;S&&(S.template||null===S.templateUrl)&&(wa=A),a&&a(wa,f.childNodes,t,h);for(g=p.length-1;0<=g;g--)w=p[g],$(w,w.isolateScope?A:c,W,I,w.require&&L(w.directiveName,w.require,W,P),eb)}r=r||{};for(var A=-Number.MAX_VALUE,P,J=r.controllerDirectives,X,S=r.newIsolateScopeDirective,ka=r.templateDirective,ea=r.nonTlbTranscludeDirective,ca=!1,D=!1,C=r.hasElementTranscludeDirective,aa=e.$$element=B(d),K,z,N,Aa=f,Q,M=0,R=a.length;M<R;M++){K=a[M];var Pa=K.$$start,fb=K.$$end;Pa&&(aa=wa(d,Pa,fb)),N=t;if(A>K.priority)break;if(N=K.scope)K.templateUrl||(H(N)?(Oa("new/isolated scope",S||P,K,aa),S=K):Oa("new/isolated scope",S,K,aa)),P=P||K;z=K.name,!K.templateUrl&&K.controller&&(N=K.controller,J=J||{},Oa("'"+z+"' controller",J[z],K,aa),
J[z]=K);if(N=K.transclude)ca=!0,K.$$tlb||(Oa("transclusion",ea,K,aa),ea=K),"element"==N?(C=!0,A=K.priority,N=aa,aa=e.$$element=B(Y.createComment(" "+z+": "+e[z]+" ")),d=aa[0],V(g,Za.call(N,0),d),Aa=E(N,f,A,l&&l.name,{nonTlbTranscludeDirective:ea})):(N=B(Tb(d)).contents(),aa.empty(),Aa=E(N,f));if(K.template)if(D=!0,Oa("template",ka,K,aa),ka=K,N=G(K.template)?K.template(aa,e):K.template,N=Sc(N),K.replace){l=K,N=Rb.test(N)?Tc(Wb(K.templateNamespace,U(N))):[],d=N[0];if(1!=N.length||d.nodeType!==na)throw ja("tplrt",z,"");V(g,aa,d),R={$attr:{}},N=W(d,[],R);var ba=a.splice(M+1,a.length-(M+1));S&&y(N),a=a.concat(N).concat(ba),Qc(e,R),R=a.length}else aa.html(N);if(K.templateUrl)D=!0,Oa("template",ka,K,aa),ka=K,K.replace&&(l=K),v=T(a.splice(M,a.length-M),aa,e,g,ca&&Aa,k,p,{controllerDirectives:J,newIsolateScopeDirective:S,templateDirective:ka,nonTlbTranscludeDirective:ea}),R=a.length;else if(K.compile)try{Q=K.compile(aa,e,Aa),G(Q)?w(null,Q,Pa,fb):Q&&w(Q.pre,Q.post,Pa,fb)}catch(qf){c(qf,va(aa))}K.
terminal&&(v.terminal=!0,A=Math.max(A,K.priority))}return v.scope=P&&!0===P.scope,v.transcludeOnThisElement=ca,v.elementTranscludeOnThisElement=C,v.templateOnThisElement=D,v.transclude=Aa,r.hasElementTranscludeDirective=C,v}function y(a){for(var b=0,c=a.length;b<c;b++){var d=b,e;e=z(Object.create(a[b]),{$$isolateScope:!0}),a[d]=e}}function ca(b,e,f,g,h,l,k){if(e===h)return null;h=null;if(d.hasOwnProperty(e)){var q;e=a.get(e+"Directive");for(var r=0,n=e.length;r<n;r++)try{if(q=e[r],(g===t||g>q.priority)&&-1!=q.restrict.indexOf(f)){if(l){var w={$$start:l,$$end:k};q=z(Object.create(q),w)}b.push(q),h=q}}catch(O){c(O)}}return h}function D(b){if(d.hasOwnProperty(b))for(var c=a.get(b+"Directive"),e=0,f=c.length;e<f;e++)if(b=c[e],b.multiElement)return!0;return!1}function Qc(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;s(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),s(b,function(b,f){"class"==f?(P(e,b),a["class"]=(a["class"]?a["class"]+" "
:"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function T(a,b,c,d,e,f,g,h){var l=[],k,q,p=b[0],n=a.shift(),w=z({},n,{templateUrl:null,transclude:null,replace:null,$$originalDirective:n}),O=G(n.templateUrl)?n.templateUrl(b,c):n.templateUrl,u=n.templateNamespace;return b.empty(),r(L.getTrustedResourceUrl(O)).then(function(r){var L,v;r=Sc(r);if(n.replace){r=Rb.test(r)?Tc(Wb(u,U(r))):[],L=r[0];if(1!=r.length||L.nodeType!==na)throw ja("tplrt",n.name,O);r={$attr:{}},V(d,b,L);var A=W(L,[],r);H(n.scope)&&y(A),a=A.concat(a),Qc(c,r)}else L=p,b.html(r);a.unshift(w),k=ea(a,L,c,e,b,n,f,g,h),s(d,function(a,c){a==L&&(d[c]=b[0])});for(q=S(b[0].childNodes,e);l.length;){r=l.shift(),v=l.shift();var J=l.shift(),E=l.shift(),A=b[0];if(!r.$$destroyed){if(v!==p){var I=v.className;h.hasElementTranscludeDirective&&n.replace||(A=Tb(L)),V(J,B(v),A),P(B(A),I)}v=k.transcludeOnThisElement?X(r,k.transclude,E):E,k
(q,r,A,d,v)}}l=null}),function(a,b,c,d,e){a=e,b.$$destroyed||(l?l.push(b,c,d,a):(k.transcludeOnThisElement&&(a=X(b,k.transclude,e)),k(q,b,c,d,a)))}}function N(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Oa(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,va(d))}function M(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;return b&&E.$$addBindingClass(a),function(a,c){var e=c.parent();b||E.$$addBindingClass(e),E.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Wb(a,b){a=Q(a||"html");switch(a){case"svg":case"math":var c=Y.createElement("div");return c.innerHTML="<"+a+">"+b+"</"+a+">",c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==b)return L.HTML;var c=ua(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return L.RESOURCE_URL}function Pa(a,c,d,e,f){var h=R(a,e);f=g[e]||f;var k=b(d,!0,h,f);if(
k){if("multiple"===e&&"select"===ua(a))throw ja("selmulti",va(a));c.push({priority:100,compile:function(){return{pre:function(a,c,g){c=g.$$observers||(g.$$observers={});if(l.test(e))throw ja("nodomevents");var p=g[e];p!==d&&(k=p&&b(p,!0,h,f),d=p),k&&(g[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||a).$watch(k,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function V(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c,h=g+e-1;for(var l=a.length;g<l;g++,h++)h<l?a[g]=a[h]:delete a[g];a.length-=e-1,a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d),a=Y.createDocumentFragment(),a.appendChild(d),B(c).data(B(d).data()),ra?(Pb=!0,ra.cleanData([d])):delete B.cache[d[B.expando]],d=1;for(e=b.length;d<e;d++)f=b[d],B(f).remove(),a.appendChild(f),delete b[d];b[0]=c,b.length=1}function Z(a,b){return z(function(){return a.apply(null,arguments)},a,b)}function $(a,b,d,e,f,g){try{a(b,d,e,f,g)
}catch(h){c(h,va(d))}}var Xb=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};Xb.prototype={$normalize:ya,$addClass:function(a){a&&0<a.length&&J.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&J.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Uc(a,b);c&&c.length&&J.addClass(this.$$element,c),(c=Uc(b,a))&&c.length&&J.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=this.$$element[0],g=Lc(f,a),h=kf(f,a),f=a;g?(this.$$element.prop(a,b),e=g):h&&(this[h]=b,f=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=tc(a,"-")),g=ua(this.$$element);if("a"===g&&"href"===a||"img"===g&&"src"===a)this[a]=b=A(b,"src"===a);else if("img"===g&&"srcset"===a){for(var g="",h=U(b),l=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,l=/\s/.test(h)?l:/(,)/,h=h.split(l),l=Math.floor(h.length/2),k=0;k<l;k++)var q=2*k,g=g+A(U(h[q]),!0),g=g+(" "+U(h[q+1]));h=U(h[2*k]).split(/\s/),g+=A(U(
h[0]),!0),2===h.length&&(g+=" "+U(h[1])),this[a]=b=g}!1!==d&&(null===b||b===t?this.$$element.removeAttr(e):this.$$element.attr(e,b)),(a=this.$$observers)&&s(a[f],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ha()),e=d[a]||(d[a]=[]);return e.push(b),v.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){Xa(e,b)}}};var Aa=b.startSymbol(),ka=b.endSymbol(),Sc="{{"==Aa||"}}"==ka?oa:function(a){return a.replace(/\{\{/g,Aa).replace(/}}/g,ka)},fb=/^ngAttr[A-Z]/;return E.$$addBindingInfo=k?function(a,b){var c=a.data("$binding")||[];x(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:C,E.$$addBindingClass=k?function(a){P(a,"ng-binding")}:C,E.$$addScopeInfo=k?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:C,E.$$addScopeClass=k?function(a,b){P(a,b?"ng-isolate-scope":"ng-scope")}:C,E}]}function ya(b){return cb(b.replace(Rc,""))}function Uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/
),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function Tc(b){b=B(b);var a=b.length;if(1>=a)return b;for(;a--;)8===b[a].nodeType&&rf.call(b,a,1);return b}function Fe(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){Ma(a,"controller"),H(a)?z(b,a):b[a]=c},this.allowGlobals=function(){a=!0},this.$get=["$injector","$window",function(d,e){function f(a,b,c,d){if(!a||!H(a.$scope))throw T("$controller")("noscp",d,b);a.$scope[b]=c}return function(g,h,l,k){var m,p,q;return l=!0===l,k&&F(k)&&(q=k),F(g)&&(k=g.match(c),p=k[1],q=q||k[3],g=b.hasOwnProperty(p)?b[p]:vc(h.$scope,p,!0)||(a?vc(e,p,!0):t),sb(g,p,!0)),l?(l=(x(g)?g[g.length-1]:g).prototype,m=Object.create(l),q&&f(h,q,m,p||g.name),z(function(){return d.invoke(g,m,h,p),m},{instance:m,identifier:q})):(m=d.instantiate(g,h,p),q&&f(h,q,m,p||g.name),m)}}]}function Ge(){this.$get=["$window",function(b){return B(b.document)}]}function He(){this.$get=["$log",
function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Yb(b,a){if(F(b)){var c=b.replace(sf,"").trim();if(c){var d=a("Content-Type");(d=d&&0===d.indexOf(Vc))||(d=(d=c.match(tf))&&uf[d[0]].test(c)),d&&(b=oc(c))}}return b}function Wc(b){var a=ha(),c,d,e;return b?(s(b.split("\n"),function(b){e=b.indexOf(":"),c=Q(U(b.substr(0,e))),d=U(b.substr(e+1)),c&&(a[c]=a[c]?a[c]+", "+d:d)}),a):a}function Xc(b){var a=H(b)?b:t;return function(c){return a||(a=Wc(b)),c?(c=a[Q(c)],void 0===c&&(c=null),c):a}}function Yc(b,a,c,d){return G(d)?d(b,a,c):(s(d,function(d){b=d(b,a,c)}),b)}function Ke(){var b=this.defaults={transformResponse:[Yb],transformRequest:[function(a){return H(a)&&"[object File]"!==Da.call(a)&&"[object Blob]"!==Da.call(a)&&"[object FormData]"!==Da.call(a)?$a(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:qa(Zb),put:qa(Zb),patch:qa(Zb)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},a=!1;this.useApplyAsync=function(b){return y(b)?(a=!!b,this
):a};var c=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(d,e,f,g,h,l){function k(a){function c(a){var b=z({},a);return b.data=a.data?Yc(a.data,a.headers,a.status,e.transformResponse):a.data,a=a.status,200<=a&&300>a?b:h.reject(b)}function d(a){var b,c={};return s(a,function(a,d){G(a)?(b=a(),null!=b&&(c[d]=b)):c[d]=a}),c}if(!ga.isObject(a))throw T("$http")("badreq",a);var e=z({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse},a);e.headers=function(a){var c=b.headers,e=z({},a.headers),f,g,c=z({},c.common,c[Q(a.method)]);a:for(f in c){a=Q(f);for(g in e)if(Q(g)===a)continue a;e[f]=c[f]}return d(e)}(a),e.method=ub(e.method);var f=[function(a){var d=a.headers,e=Yc(a.data,Xc(d),t,a.transformRequest);return D(e)&&s(d,function(a,b){"content-type"===Q(b)&&delete d[b]}),D(a.withCredentials)&&!D(b.withCredentials)&&(a.withCredentials=b.withCredentials),m(a,e).then(c,c)},t],g=h.when(e);for(s(u,function(
a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError),(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var l=f.shift(),g=g.then(a,l)}return g.success=function(a){return g.then(function(b){a(b.data,b.status,b.headers,e)}),g},g.error=function(a){return g.then(null,function(b){a(b.data,b.status,b.headers,e)}),g},g}function m(c,f){function l(b,c,d,e){function f(){m(c,b,d,e)}P&&(200<=b&&300>b?P.put(X,[b,c,Wc(d),e]):P.remove(X)),a?g.$applyAsync(f):(f(),g.$$phase||g.$apply())}function m(a,b,d,e){b=Math.max(b,0),(200<=b&&300>b?J.resolve:J.reject)({data:a,status:b,headers:Xc(d),config:c,statusText:e})}function w(a){m(a.data,a.status,qa(a.headers()),a.statusText)}function u(){var a=k.pendingRequests.indexOf(c);-1!==a&&k.pendingRequests.splice(a,1)}var J=h.defer(),A=J.promise,P,E,s=c.headers,X=p(c.url,c.params);return k.pendingRequests.push(c),A.then(u,u),!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(P=H(c.cache)?c.
cache:H(b.cache)?b.cache:q),P&&(E=P.get(X),y(E)?E&&G(E.then)?E.then(w,w):x(E)?m(E[1],E[0],qa(E[2]),E[3]):m(E,200,{},"OK"):P.put(X,A)),D(E)&&((E=Zc(c.url)?e.cookies()[c.xsrfCookieName||b.xsrfCookieName]:t)&&(s[c.xsrfHeaderName||b.xsrfHeaderName]=E),d(c.method,X,f,l,s,c.timeout,c.withCredentials,c.responseType)),A}function p(a,b){if(!b)return a;var c=[];return Ed(b,function(a,b){null===a||D(a)||(x(a)||(a=[a]),s(a,function(a){H(a)&&(a=pa(a)?a.toISOString():$a(a)),c.push(Fa(b)+"="+Fa(a))}))}),0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var q=f("$http"),u=[];return s(c,function(a){u.unshift(F(a)?l.get(a):l.invoke(a))}),k.pendingRequests=[],function(a){s(arguments,function(a){k[a]=function(b,c){return k(z(c||{},{method:a,url:b}))}})}("get","delete","head","jsonp"),function(a){s(arguments,function(a){k[a]=function(b,c,d){return k(z(d||{},{method:a,url:b,data:c}))}})}("post","put","patch"),k.defaults=b,k}]}function vf(){return new M.XMLHttpRequest}function Le(){this.$get=["$browser"
,"$window","$document",function(b,a,c){return wf(b,vf,b.defer,a.angular.callbacks,c[0])}]}function wf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),m=null;return f.type="text/javascript",f.src=a,f.async=!0,m=function(a){f.removeEventListener("load",m,!1),f.removeEventListener("error",m,!1),e.body.removeChild(f),f=null;var g=-1,u="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),u=a.type,g="error"===a.type?404:200),c&&c(g,u)},f.addEventListener("load",m,!1),f.addEventListener("error",m,!1),e.body.appendChild(f),m}return function(e,h,l,k,m,p,q,u){function r(){v&&v(),w&&w.abort()}function O(a,d,e,f,g){J!==t&&c.cancel(J),v=w=null,a(d,e,f,g),b.$$completeOutstandingRequest(C)}b.$$incOutstandingRequestCount(),h=h||b.url();if("jsonp"==Q(e)){var n="_"+(d.counter++).toString(36);d[n]=function(a){d[n].data=a,d[n].called=!0};var v=f(h.replace("JSON_CALLBACK","angular.callbacks."+n),n,function(a,b){O(k,a,d[n].data,"",b),d[n]=C})}else{var w=a();w.open(e,h,!0),s(m,function(
a,b){y(a)&&w.setRequestHeader(b,a)}),w.onload=function(){var a=w.statusText||"",b="response"in w?w.response:w.responseText,c=1223===w.status?204:w.status;0===c&&(c=b?200:"file"==Ba(h).protocol?404:0),O(k,c,b,w.getAllResponseHeaders(),a)},e=function(){O(k,-1,null,null,"")},w.onerror=e,w.onabort=e,q&&(w.withCredentials=!0);if(u)try{w.responseType=u}catch(L){if("json"!==u)throw L}w.send(l||null)}if(0<p)var J=c(r,p);else p&&G(p.then)&&p.then(r)}}function Ie(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b},this.endSymbol=function(b){return b?(a=b,this):a},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,u,r){function O(c){return c.replace(k,b).replace(m,a)}function n(a){try{var b=a;a=u?e.getTrusted(u,b):e.valueOf(b);var c;if(r&&!y(a))c=a;else if(null==a)c="";else{switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=$a(a)}c=a}return c}catch(g){c=$b("interr",f,g.toString()),d(c)}}r=!!r;for(var v
,w,L=0,J=[],A=[],P=f.length,E=[],s=[];L<P;){if(-1==(v=f.indexOf(b,L))||-1==(w=f.indexOf(a,v+h))){L!==P&&E.push(O(f.substring(L)));break}L!==v&&E.push(O(f.substring(L,v))),L=f.substring(v+h,w),J.push(L),A.push(c(L,n)),L=w+l,s.push(E.length),E.push("")}if(u&&1<E.length)throw $b("noconcat",f);if(!g||J.length){var X=function(a){for(var b=0,c=J.length;b<c;b++){if(r&&D(a[b]))return;E[s[b]]=a[b]}return E.join("")};return z(function(a){var b=0,c=J.length,e=Array(c);try{for(;b<c;b++)e[b]=A[b](a);return X(e)}catch(g){a=$b("interr",f,g.toString()),d(a)}},{exp:f,expressions:J,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(A,function(c,e){var f=X(c);G(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=b.length,l=a.length,k=new RegExp(b.replace(/./g,f),"g"),m=new RegExp(a.replace(/./g,f),"g");return g.startSymbol=function(){return b},g.endSymbol=function(){return a},g}]}function Je(){this.$get=["$rootScope","$window","$q","$$q",function(b,a,c,d){function e(e,h,l,k){var m=a.setInterval,p=a.clearInterval
,q=0,u=y(k)&&!k,r=(u?d:c).defer(),O=r.promise;return l=y(l)?l:0,O.then(null,null,e),O.$$intervalId=m(function(){r.notify(q++),0<l&&q>=l&&(r.resolve(q),p(O.$$intervalId),delete f[O.$$intervalId]),u||b.$apply()},h),f[O.$$intervalId]=r,O}var f={};return e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1},e}]}function Rd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY
:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function ac(b){b=b.split("/");for(var a=b.length;a--;)b[a]=qb(b[a]);return b.join("/")}function $c(b,a){var c=Ba(b);a.$$protocol=c.protocol,a.$$host=c.hostname,a.$$port=ba(c.port)||xf[c.protocol]||null}function ad(b,a){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=Ba(b);a.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),a.$$search=qc(d.search),a.$$hash=decodeURIComponent(d.hash),a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function za(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Ha(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function bd(b){return b.replace(/(#.+)|#$/,"$1")}function bc(b){return b.substr(0,Ha(b).lastIndexOf
("/")+1)}function cc(b,a){this.$$html5=!0,a=a||"";var c=bc(b);$c(b,this),this.$$parse=function(a){var b=za(c,a);if(!F(b))throw Fb("ipthprfx",a,c);ad(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=Nb(this.$$search),b=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=ac(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=c+this.$$url.substr(1)},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return(f=za(b,d))!==t?(g=f,g=(f=za(a,f))!==t?c+(za("/",f)||f):b+g):(f=za(c,d))!==t?g=c+f:c==d+"/"&&(g=c),g&&this.$$parse(g),!!g}}function dc(b,a){var c=bc(b);$c(b,this),this.$$parse=function(d){d=za(b,d)||za(c,d);var e;"#"===d.charAt(0)?(e=za(a,d),D(e)&&(e=d)):e=this.$$html5?d:"",ad(e,this),d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,"")),f.exec(e)||(d=(e=f.exec(d))?e[1]:d),this.$$path=d,this.$$compose()},this.$$compose=function(){var c=Nb(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=ac(
this.$$path)+(c?"?"+c:"")+e,this.$$absUrl=b+(this.$$url?a+this.$$url:"")},this.$$parseLinkUrl=function(a,c){return Ha(b)==Ha(a)?(this.$$parse(a),!0):!1}}function cd(b,a){this.$$html5=!0,dc.apply(this,arguments);var c=bc(b);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return b==Ha(d)?f=d:(g=za(c,d))?f=b+a+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=Nb(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=ac(this.$$path)+(c?"?"+c:"")+e,this.$$absUrl=b+a+this.$$url}}function Gb(b){return function(){return this[b]}}function dd(b,a){return function(c){return D(c)?this[b]:(this[b]=a(c),this.$$compose(),this)}}function Me(){var b="",a={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return y(a)?(b=a,this):b},this.html5Mode=function(b){return Wa(b)?(a.enabled=b,this):H(b)?(Wa(b.enabled)&&(a.enabled=b.enabled),Wa(b.requireBase)&&(a.requireBase=b.requireBase),Wa(b.rewriteLinks)&&(a.rewriteLinks=
b.rewriteLinks),this):a},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(g){throw k.url(e),k.$$state=f,g}}function l(a,b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,m;m=d.baseHref();var p=d.url(),q;if(a.enabled){if(!m&&a.requireBase)throw Fb("nobase");q=p.substring(0,p.indexOf("/",p.indexOf("//")+2))+(m||"/"),m=e.history?cc:cd}else q=Ha(p),m=dc;k=new m(q,"#"+b),k.$$parseLinkUrl(p,p),k.$$state=d.state();var u=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var e=B(b.target);"a"!==ua(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),l=e.attr("href")||e.attr("xlink:href");H(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Ba(h.animVal).href),u.test(h)||!h||e.attr("target")||b.isDefaultPrevented()||!k.$$parseLinkUrl(h,l)||(b.preventDefault(),k.absUrl(
)!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),k.absUrl()!=p&&d.url(k.absUrl(),!0);var r=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d=k.absUrl(),e=k.$$state,f;k.$$parse(a),k.$$state=b,f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented,k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,h(d,!1,e)):(r=!1,l(d,e)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=bd(d.url()),b=bd(k.absUrl()),f=d.state(),g=k.$$replace,q=a!==b||k.$$html5&&e.history&&f!==k.$$state;if(r||q)r=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=f):(q&&h(b,g,f===k.$$state?null:k.$$state),l(a,f)))});k.$$replace=!1}),k}]}function Ne(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+
a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||C;a=!1;try{a=!!e.apply}catch(l){}return a?function(){var a=[];return s(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function sa(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function ta(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.window===b)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a)}return b}function ec(b){return b.constant}function gb(b,a,c,d){ta(b,d),a=a.split(".");for(var e,f=0;1<a.length;f++){e=sa(a.shift(),d);var g=ta(b[e],d);g||(g={},b[e]=g),b=g}return e=sa(a.shift(),
d),ta(b[e],d),b[e]=c}function Qa(b){return"constructor"==b}function ed(b,a,c,d,e,f,g){sa(b,f),sa(a,f),sa(c,f),sa(d,f),sa(e,f);var h=function(a){return ta(a,f)},l=g||Qa(b)?h:oa,k=g||Qa(a)?h:oa,m=g||Qa(c)?h:oa,p=g||Qa(d)?h:oa,q=g||Qa(e)?h:oa;return function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;return null==h?h:(h=l(h[b]),a?null==h?t:(h=k(h[a]),c?null==h?t:(h=m(h[c]),d?null==h?t:(h=p(h[d]),e?null==h?t:h=q(h[e]):h):h):h):h)}}function yf(b,a){return function(c,d){return b(c,d,ta,a)}}function zf(b,a,c){var d=a.expensiveChecks,e=d?Af:Bf,f=e[b];if(f)return f;var g=b.split("."),h=g.length;if(a.csp)f=6>h?ed(g[0],g[1],g[2],g[3],g[4],c,d):function(a,b){var e=0,f;do f=ed(g[e++],g[e++],g[e++],g[e++],g[e++],c,d)(a,b),b=t,a=f;while(e<h);return f};else{var l="";d&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var k=d;s(g,function(a,b){sa(a,c);var e=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;if(d||Qa(a))e="eso("+e+", fe)",k=!0;l+="if(s == null) return undefined;\ns="+e+";\n"}),l+="return s;",a=new 
Function("s","l","eso","fe",l),a.toString=da(l),k&&(a=yf(a,c)),f=a}return f.sharedGetter=!0,f.assign=function(a,c){return gb(a,b,c,b)},e[b]=f}function fc(b){return G(b.valueOf)?b.valueOf():Cf.call(b)}function Oe(){var b=ha(),a=ha();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function f(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.constant||(e.inputs?f(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function g(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=fc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,c,d){var e=d.$$inputs||(d.$$inputs=f(d.inputs,[])),h;if(1===e.length){var l=g,e=e[0];return a.$watch(function(a){var b=e(a);return g(b,l)||(h=d(a),l=b&&fc(b)),h},b,c)}for(var k=[],q=0,p=e.length;q<p;q++)k[q]=g;return a.$watch(function(a){for(var b=!1,c=0,f=e.length;c<f;c++){var l=e[c](a);if(b||(b=!g(l,k[c])))k[c]=l&&
fc(l)}return b&&(h=d(a)),h},b,c)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,G(b)&&b.apply(this,arguments),y(a)&&d.$$postDigest(function(){y(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return s(a,function(a){y(a)||(b=!1)}),b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a,G(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function m(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){G(b)&&b.apply(this,arguments),e()},c)}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==k&&c!==l?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return y(e)?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==h?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=h,c.inputs=[a]),c}var q={csp:d.csp,expensiveChecks:!1},u={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var v,w,L;switch(typeof d){case"string":L=d=d.trim();
var J=g?a:b;return v=J[L],v||(":"===d.charAt(0)&&":"===d.charAt(1)&&(w=!0,d=d.substring(2)),g=g?u:q,v=new gc(g),v=(new hb(v,c,g)).parse(d),v.constant?v.$$watchDelegate=m:w?(v=e(v),v.$$watchDelegate=v.literal?k:l):v.inputs&&(v.$$watchDelegate=h),J[L]=v),p(v,f);case"function":return p(d,f);default:return p(C,f)}}}]}function Qe(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return fd(function(a){b.$evalAsync(a)},a)}]}function Re(){this.$get=["$browser","$exceptionHandler",function(b,a){return fd(function(a){b.defer(a)},a)}]}function fd(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function d(){this.$$state={status:0}}function e(a,b){return function(c){b.call(a,c)}}function f(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending,c.processScheduled=!1,c.pending=t;for(var f=0,g=e.length;f<g;++f){d=e[f][0],b=e[f][c.status];try{G(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value
):d.reject(c.value)}catch(h){d.reject(h),a(h)}}}))}function g(){this.promise=new d,this.resolve=e(this,this.resolve),this.reject=e(this,this.reject),this.notify=e(this,this.notify)}var h=T("$q",TypeError);d.prototype={then:function(a,b,c){var d=new g;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),0<this.$$state.status&&f(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}},g.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(h("qcycle",a)):this.$$resolve(a))},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,this.$$reject);try{if(H(b)||G(b))d=b&&b.then;G(d)?(this.promise.$$state.status=-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state))}catch(g){e[1](g),a(g)}},reject:function(a){this.promise.$$state.status||this
.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,f(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,e,f=0,g=d.length;f<g;f++){e=d[f][0],b=d[f][3];try{e.notify(G(b)?b(c):c)}catch(h){a(h)}}})}};var l=function(a,b){var c=new g;return b?c.resolve(a):c.reject(a),c.promise},k=function(a,b,c){var d=null;try{G(c)&&(d=c())}catch(e){return l(e,!1)}return d&&G(d.then)?d.then(function(){return l(a,b)},function(a){return l(a,!1)}):l(a,b)},m=function(a,b,c,d){var e=new g;return e.resolve(a),e.promise.then(b,c,d)},p=function u(a){if(!G(a))throw h("norslvr",a);if(this instanceof u){var b=new g;return a(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise}return new u(a)};return p.defer=function(){return new g},p.reject=function(a){var b=new g;return b.reject(a),b.promise},p.when=m,p.all=function(a){var b=new g,c=0,d=x(a)?[]:{};return s(a,function(a,e){c++
,m(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise},p}function $e(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};return f.supported=e,f}]}function Pe(){var b=10,a=T("$rootScope"),c=null,d=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(e,f,g,h){function l(){this.$id=++nb,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function k(b){if(r.$$phase)throw a("inprog"
,r.$$phase);r.$$phase=b}function m(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function p(){}function q(){for(;v.length;)try{v.shift()()}catch(a){f(a)}d=null}function u(){null===d&&(d=h.defer(function(){r.$apply(q)}))}l.prototype={constructor:l,$new:function(a,b){function c(){d.$$destroyed=!0}var d;return b=b||this,a?(d=new l,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++nb,this.$$ChildScope=null},this.$$ChildScope.prototype=this),d=new this.$$ChildScope),d.$parent=b,d.$$prevSibling=b.$$childTail,b.$$childHead?(b.$$childTail.$$nextSibling=d,b.$$childTail=d):b.$$childHead=b.$$childTail=d,(a||b!=this)&&d.$on("$destroy",c),d},$watch:function(a,b,d){var e=g(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,d,e);var f=this.$$watchers,h={fn:b,last:p,get:e,exp:a,eq:!!d};return c=
null,G(b)||(h.fn=C),f||(f=this.$$watchers=[]),f.unshift(h),function(){Xa(f,h),c=null}},$watchGroup:function(a,b){function c(){h=!1,l?(l=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,l=!0;if(!a.length){var k=!0;return g.$evalAsync(function(){k&&b(e,e,g)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(s(a,function(a,b){var l=g.$watch(a,function(a,f){e[b]=a,d[b]=f,h||(h=!0,g.$evalAsync(c))});f.push(l)}),function(){for(;f.length;)f.shift()()})},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!D(e)){if(H(e))if(Ta(e))for(f!==q&&(f=q,u=f.length=0,k++),a=e.length,u!==a&&(k++,f.length=u=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(k++,f[b]=g);else{f!==m&&(f=m={},u=0,k++),a=0;for(b in e)e.hasOwnProperty(b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(k++,f[b]=g)):(u++,f[b]=g,k++));if(u>a)for(b in k++,f)e.hasOwnProperty(b)||(u--,delete f[b])}else f!==e&&(f=e,k++);return k}}
c.$stateful=!0;var d=this,e,f,h,l=1<b.length,k=0,p=g(a,c),q=[],m={},n=!0,u=0;return this.$watch(p,function(){n?(n=!1,b(e,e,d)):b(e,h,d);if(l)if(H(e))if(Ta(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)rc.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var e,g,l,m,u,v,s=b,t,W=[],y,I;k("$digest"),h.$$checkUrlChange(),this===r&&null!==d&&(h.defer.cancel(d),q()),c=null;do{v=!1;for(t=this;O.length;){try{I=O.shift(),I.scope.$eval(I.expression,I.locals)}catch(B){f(B)}c=null}a:do{if(m=t.$$watchers)for(u=m.length;u--;)try{if(e=m[u])if((g=e.get(t))!==(l=e.last)&&!(e.eq?fa(g,l):"number"==typeof g&&"number"==typeof l&&isNaN(g)&&isNaN(l)))v=!0,c=e,e.last=e.eq?Ea(g,null):g,e.fn(g,l===p?g:l,t),5>s&&(y=4-s,W[y]||(W[y]=[]),W[y].push({msg:G(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:g,oldVal:l}));else if(e===c){v=!1;break a}}catch(D){f(D)}if(!(m=t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(m=t.$$nextSibling);)t=t.$parent}while(t=m);if((
v||O.length)&&!(s--))throw r.$$phase=null,a("infdig",b,W)}while(v||O.length);for(r.$$phase=null;n.length;)try{n.shift()()}catch(ca){f(ca)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0;if(this!==r){for(var b in this.$$listenerCount)m(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=C,this.$on=this.$watch=this.$watchGroup=function(){return C},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){r.$$phase||O.length||h.defer(function(){O.length&&r.$digest()}),O.push({
scope:this,expression:a,locals:b})},$$postDigest:function(a){n.push(a)},$apply:function(a){try{return k("$apply"),this.$eval(a)}catch(b){f(b)}finally{r.$$phase=null;try{r.$digest()}catch(c){throw f(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&v.push(b),u()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,m(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},l=Ya([h],arguments,1),k,p;do{d=e.$$listeners[a]||c,h.currentScope=e,k=0;for(p=d.length;k<p;k++)if(d[k])try{d[k].apply(null,l)}catch(m){f(m)}else d.splice(k,1),k--,p--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);return h.currentScope=null,h},$broadcast:function(a,b){var c=
this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=Ya([e],arguments,1),h,l;c=d;){e.currentScope=c,d=c.$$listeners[a]||[],h=0;for(l=d.length;h<l;h++)if(d[h])try{d[h].apply(null,g)}catch(k){f(k)}else d.splice(h,1),h--,l--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return e.currentScope=null,e}};var r=new l,O=r.$$asyncQueue=[],n=r.$$postDigestQueue=[],v=r.$$applyAsyncQueue=[];return r}]}function Sd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b},this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a},this.$get=function(){return function(c,d){var e=d?a:b,f;return f=Ba(c).href,""===f||f.match(e)?c:"unsafe:"+f}}}function Df(b){if("self"===b)return b;if(F(b)){if(-1<b.indexOf("***"))throw Ca
("iwcard",b);return b=gd(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+b+"$")}if(ob(b))return new RegExp("^"+b.source+"$");throw Ca("imatcher")}function hd(b){var a=[];return y(b)&&s(b,function(b){a.push(Df(b))}),a}function Te(){this.SCE_CONTEXTS=ma;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){return arguments.length&&(b=hd(a)),b},this.resourceUrlBlacklist=function(b){return arguments.length&&(a=hd(b)),a},this.$get=["$injector",function(c){function d(a,b){return"self"===a?Zc(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}var f=function(a){throw Ca("unsafe")};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),h={};return h[ma.HTML]=e(g),h[ma.CSS]=e(g),h[ma.URL]=e(g),h[ma.JS]=e(g),h[ma.RESOURCE_URL]=e(h[ma.URL]),{trustAs:function(
a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ca("icontext",a,b);if(null===b||b===t||""===b)return b;if("string"!=typeof b)throw Ca("itype",a);return new c(b)},getTrusted:function(c,e){if(null===e||e===t||""===e)return e;var g=h.hasOwnProperty(c)?h[c]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(c===ma.RESOURCE_URL){var g=Ba(e.toString()),p,q,u=!1;p=0;for(q=b.length;p<q;p++)if(d(b[p],g)){u=!0;break}if(u)for(p=0,q=a.length;p<q;p++)if(d(a[p],g)){u=!1;break}if(u)return e;throw Ca("insecurl",e.toString())}if(c===ma.HTML)return f(e);throw Ca("unsafe")},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Se(){var b=!0;this.enabled=function(a){return arguments.length&&(b=!!a),b},this.$get=["$parse","$sceDelegate",function(a,c){if(b&&8>Ra)throw Ca("iequirks");var d=qa(ma);d.isEnabled=function(){return b},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,b||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=oa),d.parseAs=
function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a)})};var e=d.parseAs,f=d.getTrusted,g=d.trustAs;return s(ma,function(a,b){var c=Q(b);d[cb("parse_as_"+c)]=function(b){return e(a,b)},d[cb("get_trusted_"+c)]=function(b){return f(a,b)},d[cb("trust_as_"+c)]=function(b){return g(a,b)}}),d}]}function Ue(){this.$get=["$window","$document",function(b,a){var c={},d=ba((/android (\d+)/.exec(Q((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g,h=/^(Moz|webkit|ms)(?=[A-Z])/,l=f.body&&f.body.style,k=!1,m=!1;if(l){for(var p in l)if(k=h.exec(p)){g=k[0],g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit"),k="transition"in l||g+"Transition"in l,m="animation"in l||g+"Animation"in l,!d||k&&m||(k=F(f.body.style.webkitTransition),m=F(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Ra)return!1;if(D(c[a]))
{var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:ab(),vendorPrefix:g,transitions:k,animations:m,android:d}}]}function We(){this.$get=["$templateCache","$http","$q",function(b,a,c){function d(e,f){d.totalPendingRequests++;var g=a.defaults&&a.defaults.transformResponse;return x(g)?g=g.filter(function(a){return a!==Yb}):g===Yb&&(g=null),a.get(e,{cache:b,transformResponse:g}).then(function(a){return d.totalPendingRequests--,a.data},function(a){d.totalPendingRequests--;if(!f)throw ja("tpload",e);return c.reject(a)})}return d.totalPendingRequests=0,d}]}function Xe(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var g=[];return s(a,function(a){var d=ga.element(a).data("$binding");d&&s(d,function(d){c?(new RegExp("(^|\\s)"+gd(b)+"(\\s|\\||$)")).test(d)&&g.push(a):-1!=d.indexOf(b)&&g.push(a)})}),g},findModels:function(a,b,c){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var l=a
.querySelectorAll("["+g[h]+"model"+(c?"=":"*=")+'"'+b+'"]');if(l.length)return l}},getLocation:function(){return c.url()},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest())},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b)}}}]}function Ye(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,l,k){var m=y(k)&&!k,p=(m?d:c).defer(),q=p.promise;return l=a.defer(function(){try{p.resolve(f())}catch(a){p.reject(a),e(a)}finally{delete g[q.$$timeoutId]}m||b.$apply()},l),q.$$timeoutId=l,g[l]=p,q}var g={};return f.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1},f}]}function Ba(b){return Ra&&(Z.setAttribute("href",b),b=Z.href),Z.setAttribute("href",b),{href:Z.href,protocol:Z.protocol?Z.protocol.replace(/:$/,""):"",host:Z.host,search:Z.search?Z.search.replace(/^\?/,""):"",hash:Z.hash?Z.hash.replace(/^#/,""):"",hostname:Z.hostname,port:Z.port
,pathname:"/"===Z.pathname.charAt(0)?Z.pathname:"/"+Z.pathname}}function Zc(b){return b=F(b)?Ba(b):b,b.protocol===id.protocol&&b.host===id.host}function Ze(){this.$get=da(M)}function Dc(b){function a(c,d){if(H(c)){var e={};return s(c,function(b,c){e[c]=a(c,b)}),e}return b.factory(c+"Filter",d)}this.register=a,this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}],a("currency",jd),a("date",kd),a("filter",Ef),a("json",Ff),a("limitTo",Gf),a("lowercase",Hf),a("number",ld),a("orderBy",md),a("uppercase",If)}function Ef(){return function(b,a,c){if(!x(b))return b;var d;switch(typeof a){case"function":break;case"boolean":case"number":case"string":d=!0;case"object":a=Jf(a,c,d);break;default:return b}return b.filter(a)}}function Jf(b,a,c){var d=H(b)&&"$"in b;return!0===a?a=fa:G(a)||(a=function(a,b){return H(a)||H(b)?!1:(a=Q(""+a),b=Q(""+b),-1!==a.indexOf(b))}),function(e){return d&&!H(e)?Ia(e,b.$,a,!1):Ia(e,b,a,c)}}function Ia(b,a,c,d,e){var f=typeof b,g=typeof a;if("string"===
g&&"!"===a.charAt(0))return!Ia(b,a.substring(1),c,d);if("array"===f)return b.some(function(b){return Ia(b,a,c,d)});switch(f){case"object":var h;if(d){for(h in b)if("$"!==h.charAt(0)&&Ia(b[h],a,c,!0))return!0;return e?!1:Ia(b,a,c,!1)}if("object"===g){for(h in a)if(e=a[h],!G(e)&&(f="$"===h,!Ia(f?b:b[h],e,c,f,f)))return!1;return!0}return c(b,a);case"function":return!1;default:return c(b,a)}}function jd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){return D(d)&&(d=a.CURRENCY_SYM),D(e)&&(e=a.PATTERNS[1].maxFrac),null==b?b:nd(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,e).replace(/\u00A4/g,d)}}function ld(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==b?b:nd(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function nd(b,a,c,d,e){if(!isFinite(b)||H(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",h="",l=[],k=!1;if(-1!==g.indexOf("e")){var m=g.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&m[3]>e+1?b=0:(h=g,k=!0)}if(k)0<e&&1>b&&(h=b.toFixed(e),b=parseFloat(h));else{g=(g.split(od)[1]||"").length
,D(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac)),b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+ -e);var g=(""+b).split(od),k=g[0],g=g[1]||"",p=0,q=a.lgSize,u=a.gSize;if(k.length>=q+u)for(p=k.length-q,m=0;m<p;m++)0===(p-m)%u&&0!==m&&(h+=c),h+=k.charAt(m);for(m=p;m<k.length;m++)0===(k.length-m)%q&&0!==m&&(h+=c),h+=k.charAt(m);for(;g.length<e;)g+="0";e&&"0"!==e&&(h+=d+g.substr(0,e))}return 0===b&&(f=!1),l.push(f?a.negPre:a.posPre,h,f?a.negSuf:a.posSuf),l.join("")}function Hb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;return c&&(b=b.substr(b.length-a)),d+b}function $(b,a,c,d){return c=c||0,function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;return 0===e&&-12==c&&(e=12),Hb(e,a,d)}}function Ib(b,a){return function(c,d){var e=c["get"+b](),f=ub(a?"SHORT"+b:b);return d[f][e]}}function pd(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function qd(b){return function(a){var c=pd(a.getFullYear());return a=+(new Date(a.getFullYear(),a.getMonth(),a.getDate
()+(4-a.getDay())))- +c,a=1+Math.round(a/6048e5),Hb(a,b)}}function kd(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,l=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=ba(b[9]+b[10]),g=ba(b[9]+b[11])),h.call(a,ba(b[1]),ba(b[2])-1,ba(b[3])),f=ba(b[4]||0)-f,g=ba(b[5]||0)-g,h=ba(b[6]||0),b=Math.round(1e3*parseFloat("0."+(b[7]||0))),l.call(a,f,g,h,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g="",h=[],l,k;e=e||"mediumDate",e=b.DATETIME_FORMATS[e]||e,F(c)&&(c=Kf.test(c)?ba(c):a(c)),V(c)&&(c=new Date(c));if(!pa(c))return c;for(;e;)(k=Lf.exec(e))?(h=Ya(h,k,1),e=h.pop()):(h.push(e),e=null);return f&&"UTC"===f&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),s(h,function(a){l=Mf[a],g+=l?l(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}}function Ff(){return function(b,a){return D(a)&&(a=2),$a(b,a)}
}function Gf(){return function(b,a){V(b)&&(b=b.toString());if(!x(b)&&!F(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):ba(a);if(F(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c,d;a>b.length?a=b.length:a<-b.length&&(a=-b.length);if(0<a)c=0,d=a;else{if(!a)return[];c=b.length+a,d=b.length}return b.slice(c,d)}}function md(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function g(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),f(a))||"function"==typeof a.toString&&(a=a.toString(),f(a))?a:""}function h(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=g(a),b=g(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}return Ta(a)?(c=x(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(a){var c=!1,d=a||oa;if(F(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring
(1);if(""===a)return e(h,c);d=b(a);if(d.constant){var f=d();return e(function(a,b){return h(a[f],b[f])},c)}}return e(function(a,b){return h(d(a),d(b))},c)}),Za.call(a).sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))):a}}function Ja(b){return G(b)&&(b={link:b}),b.restrict=b.restrict||"AC",da(b)}function rd(b,a,c,d,e){var f=this,g=[],h=f.$$parentForm=b.parent().controller("form")||Jb;f.$error={},f.$$success={},f.$pending=t,f.$name=e(a.name||a.ngForm||"")(c),f.$dirty=!1,f.$pristine=!0,f.$valid=!0,f.$invalid=!1,f.$submitted=!1,h.$addControl(f),f.$rollbackViewValue=function(){s(g,function(a){a.$rollbackViewValue()})},f.$commitViewValue=function(){s(g,function(a){a.$commitViewValue()})},f.$addControl=function(a){Ma(a.$name,"input"),g.push(a),a.$name&&(f[a.$name]=a)},f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c],f[b]=a,a.$name=b},f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name],s(f.$pending,function(b
,c){f.$setValidity(c,null,a)}),s(f.$error,function(b,c){f.$setValidity(c,null,a)}),Xa(g,a)},sd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(Xa(d,c),0===d.length&&delete a[b])},parentForm:h,$animate:d}),f.$setDirty=function(){d.removeClass(b,Sa),d.addClass(b,Kb),f.$dirty=!0,f.$pristine=!1,h.$setDirty()},f.$setPristine=function(){d.setClass(b,Sa,Kb+" ng-submitted"),f.$dirty=!1,f.$pristine=!0,f.$submitted=!1,s(g,function(a){a.$setPristine()})},f.$setUntouched=function(){s(g,function(a){a.$setUntouched()})},f.$setSubmitted=function(){d.addClass(b,"ng-submitted"),f.$submitted=!0,h.$setSubmitted()}}function hc(b){b.$formatters.push(function(a){return b.$isEmpty(a)?a:a.toString()})}function ib(b,a,c,d,e,f){var g=Q(a[0].type);if(!e.android){var h=!1;a.on("compositionstart",function(a){h=!0}),a.on("compositionend",function(){h=!1,l()})}var l=function(b){k&&(f.defer.cancel(k),k=null);if(!h){var e=a.val();b=b&&b.
type,"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=U(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,b)}};if(e.hasEvent("input"))a.on("input",l);else{var k,m=function(a,b,c){k||(k=f.defer(function(){k=null,b&&b.value===c||l(a)}))};a.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)}),e.hasEvent("paste")&&a.on("paste cut",m)}a.on("change",l),d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Lb(b,a){return function(c,d){var e,f;if(pa(c))return c;if(F(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(Nf.test(c))return new Date(c);b.lastIndex=0;if(e=b.exec(c))return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},s(e,function(b,c){c<a.length&&(f[a[c]]=+b)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1e3*f.sss||0
)}return NaN}}function jb(b,a,c,d){return function(e,f,g,h,l,k,m){function p(a){return a&&(!a.getTime||a.getTime()===a.getTime())}function q(a){return y(a)?pa(a)?a:c(a):t}td(e,f,g,h),ib(e,f,g,h,l,k);var u=h&&h.$options&&h.$options.timezone,r;h.$$parserName=b,h.$parsers.push(function(b){return h.$isEmpty(b)?null:a.test(b)?(b=c(b,r),"UTC"===u&&b.setMinutes(b.getMinutes()-b.getTimezoneOffset()),b):t}),h.$formatters.push(function(a){if(a&&!pa(a))throw Mb("datefmt",a);if(p(a)){if((r=a)&&"UTC"===u){var b=6e4*r.getTimezoneOffset();r=new Date(r.getTime()+b)}return m("date")(a,d,u)}return r=null,""});if(y(g.min)||g.ngMin){var s;h.$validators.min=function(a){return!p(a)||D(s)||c(a)>=s},g.$observe("min",function(a){s=q(a),h.$validate()})}if(y(g.max)||g.ngMax){var n;h.$validators.max=function(a){return!p(a)||D(n)||c(a)<=n},g.$observe("max",function(a){n=q(a),h.$validate()})}}}function td(b,a,c,d){(d.$$hasNativeValidators=H(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};return c
.badInput&&!c.typeMismatch?t:b})}function ud(b,a,c,d,e){if(y(d)){b=b(d);if(!b.constant)throw T("ngModel")("constexpr",c,d);return b(a)}return e}function sd(b){function a(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function c(b,c){b=b?"-"+tc(b,"-"):"",a(kb+b,!0===c),a(vd+b,!1===c)}var d=b.ctrl,e=b.$element,f={},g=b.set,h=b.unset,l=b.parentForm,k=b.$animate;f[vd]=!(f[kb]=e.hasClass(kb)),d.$setValidity=function(b,e,f){e===t?(d.$pending||(d.$pending={}),g(d.$pending,b,f)):(d.$pending&&h(d.$pending,b,f),wd(d.$pending)&&(d.$pending=t)),Wa(e)?e?(h(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),h(d.$$success,b,f)):(h(d.$error,b,f),h(d.$$success,b,f)),d.$pending?(a(xd,!0),d.$valid=d.$invalid=t,c("",null)):(a(xd,!1),d.$valid=wd(d.$error),d.$invalid=!d.$valid,c("",d.$valid)),e=d.$pending&&d.$pending[b]?t:d.$error[b]?!1:d.$$success[b]?!0:null,c(b,e),l.$setValidity(b,e,d)}}function wd(b){if(b)for(var a in b)return!1;return!0}function ic(b,a){return b="ngClass"+
b,["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){if(!x(a)){if(F(a))return a.split(" ");if(H(a)){var b=[];return s(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}}return a}return{restrict:"AC",link:function(f,g,h){function l(a,b){var c=g.data("$classCounts")||{},d=[];return s(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)}),g.data("$classCounts",c),d.join(" ")}function k(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var u=l(k,1);h.$addClass(u)}else if(!fa(b,m)){var r=e(m),u=d(k,r),k=d(r,k),u=l(u,1),k=l(k,-1);u&&u.length&&c.addClass(g,u),k&&k.length&&c.removeClass(g,k)}}m=qa(b)}var m;f.$watch(h[b],k,!0),h.$observe("class",function(a){k(f.$eval(h[b]))}),"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var k=e(f.$eval(h[b]));g===a?(g=l(k,1),h.$addClass(g)):(g=l(k,-1),h.$removeClass(g))}})}}}]}var Of=/^\/(.+)\/([a-z]*)$/,Q=
function(b){return F(b)?b.toLowerCase():b},rc=Object.prototype.hasOwnProperty,ub=function(b){return F(b)?b.toUpperCase():b},Ra,B,ra,Za=[].slice,rf=[].splice,Pf=[].push,Da=Object.prototype.toString,Ka=T("ng"),ga=M.angular||(M.angular={}),bb,nb=0;Ra=Y.documentMode,C.$inject=[],oa.$inject=[];var x=Array.isArray,U=function(b){return F(b)?b.trim():b},gd=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ab=function(){if(y(ab.isActive_))return ab.isActive_;var b=!!Y.querySelector("[ng-csp]")||!!Y.querySelector("[data-ng-csp]");if(!b)try{new Function("")}catch(a){b=!0}return ab.isActive_=b},rb=["ng-","data-ng-","ng:","x-ng-"],Md=/[A-Z]/g,uc=!1,Pb,na=1,pb=3,Qd={full:"1.3.8",major:1,minor:3,dot:8,codeName:"prophetic-narwhal"};R.expando="ng339";var zb=R.cache={},hf=1;R._data=function(b){return this.cache[b[this.expando]]||{}};var cf=/([\:\-\_]+(.))/g,df=/^moz([A-Z])/,Qf={mouseleave:"mouseout",mouseenter:"mouseover"},Sb=T("jqLite"),gf=/^<(\w+)\s*\/?>(?:<\/\1>|)$/
,Rb=/<|&#?\w+;/,ef=/<([\w:]+)/,ff=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ia={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;var La=R.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===Y.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),R(M).on("load",a))},toString:function(){var b=[];return s(this,function(a){b.push(""+a)}),"["+b.join(", ")+"]"},eq:function(b){return 0<=b?B(this[b]):B(this[this.length+b])},length:0,push:Pf,sort:[].sort,splice:[].splice},Eb={};s("multiple selected checked disabled readOnly required open".split(" "),function(b){Eb[Q(b)]=b});var Mc={};s("input select option textarea button form details".split(" "),function(b
){Mc[b]=!0});var Nc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};s({data:Ub,removeData:xb},function(b,a){R[a]=b}),s({data:Ub,inheritedData:Db,scope:function(b){return B.data(b,"$scope")||Db(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return B.data(b,"$isolateScope")||B.data(b,"$isolateScopeNoTemplate")},controller:Ic,injector:function(b){return Db(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Ab,css:function(b,a,c){a=cb(a);if(!y(c))return b.style[a];b.style[a]=c},attr:function(b,a,c){var d=Q(a);if(Eb[d]){if(!y(c))return b[a]||(b.attributes.getNamedItem(a)||C).specified?d:t;c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d))}else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(!y(c))return b[a];b[a]=c},text:function(){function b(a,b){if(D(b)){var d=a.nodeType;return d===na||d===pb?a.textContent:""}a.textContent=
b}return b.$dv="",b}(),val:function(b,a){if(D(a)){if(b.multiple&&"select"===ua(b)){var c=[];return s(b.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(D(a))return b.innerHTML;wb(b,!0),b.innerHTML=a},empty:Jc},function(b,a){R.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==Jc&&(2==b.length&&b!==Ab&&b!==Ic?a:d)===t){if(H(a)){for(e=0;e<g;e++)if(b===Ub)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv,g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var h=b(this[f],a,d);e=e?e+h:h}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}}),s({removeData:xb,on:function a(c,d,e,f){if(y(f))throw Sb("onargs");if(Ec(c)){var g=yb(c,!0);f=g.events;var h=g.handle;h||(h=g.handle=lf(c,f));for(var g=0<=d.indexOf(" ")?d.split(" "):[d],l=g.length;l--;){d=g[l];var k=f[d];k||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,Qf[d],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||h(a,d)}):"$destroy"!==d&&
c.addEventListener(d,h,!1),k=f[d]),k.push(e)}}},off:Hc,one:function(a,c,d){a=B(a),a.on(c,function f(){a.off(c,d),a.off(c,f)}),a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;wb(a),s(new R(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a),d=c})},children:function(a){var c=[];return s(a.childNodes,function(a){a.nodeType===na&&c.push(a)}),c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){var d=a.nodeType;if(d===na||11===d){c=new R(c);for(var d=0,e=c.length;d<e;d++)a.appendChild(c[d])}},prepend:function(a,c){if(a.nodeType===na){var d=a.firstChild;s(new R(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=B(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a),c.appendChild(a)},remove:Kc,detach:function(a){Kc(a,!0)},after:function(a,c){var d=a,e=a.parentNode;c=new R(c);for(var f=0,g=c.length;f<g;f++){var h=c[f];e.insertBefore(h,d.nextSibling),d=h}},addClass:Cb,removeClass:Bb,toggleClass:function(a,c,d){c&&s(
c.split(" "),function(c){var f=d;D(f)&&(f=!Ab(a,c)),(f?Cb:Bb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Tb,triggerHandler:function(a,c,d){var e,f,g=c.type||c,h=yb(a);if(h=(h=h&&h.events)&&h[g])e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:C,type:g,target:a},c.type&&(e=z(e,c)),c=qa(h),f=d?[e].concat(d):[e],s(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f)})}},function(a,c){R.prototype[c]=function(c,e,f){for(var g,h=0,l=this.length;h<l;h++)D(g)?(g=a(this[h],c,e,f),y(g)&&(g=B(g))):Gc(g,a(this[h],c,e,f));return y(g)?g:this},R.prototype.bind=R.prototype.on,R.prototype.unbind=
R.prototype.off}),db.prototype={put:function(a,c){this[Na(a,this.nextUid)]=c},get:function(a){return this[Na(a,this.nextUid)]},remove:function(a){var c=this[a=Na(a,this.nextUid)];return delete this[a],c}};var Pc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,nf=/,/,of=/^\s*(_?)(\S+?)\1\s*$/,Oc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ga=T("$injector");Ob.$$annotate=Vb;var Rf=T("$animate"),Ce=["$provide",function(a){this.$$selectors={},this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Rf("notcsel",c);this.$$selectors[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,d,e){function f(d){var f,g=a.defer();return g.promise.$$cancelFn=function(){f&&f()},e.$$postDigest(function(){f=d(function(){g.resolve()})}),g.promise}function g(a,c){var d=[],e=[],f=ha();return s((a.attr("class")||"").split(/\s+/),function(
a){f[a]=!0}),s(c,function(a,c){var g=f[c];!1===a&&g?e.push(c):!0!==a||g||d.push(c)}),0<d.length+e.length&&[d.length?d:null,e.length?e:null]}function h(a,c,d){for(var e=0,f=c.length;e<f;++e)a[c[e]]=d}function l(){return m||(m=a.defer(),d(function(){m.resolve(),m=null})),m.promise}function k(a,c){if(ga.isObject(c)){var d=z(c.from||{},c.to||{});a.css(d)}}var m;return{animate:function(a,c,d){return k(a,{from:c,to:d}),l()},enter:function(a,c,d,e){return k(a,e),d?d.after(a):c.prepend(a),l()},leave:function(a,c){return a.remove(),l()},move:function(a,c,d,e){return this.enter(a,c,d,e)},addClass:function(a,c,d){return this.setClass(a,c,[],d)},$$addClassImmediately:function(a,c,d){return a=B(a),c=F(c)?c:x(c)?c.join(" "):"",s(a,function(a){Cb(a,c)}),k(a,d),l()},removeClass:function(a,c,d){return this.setClass(a,[],c,d)},$$removeClassImmediately:function(a,c,d){return a=B(a),c=F(c)?c:x(c)?c.join(" "):"",s(a,function(a){Bb(a,c)}),k(a,d),l()},setClass:function(a,c,d,e){var k=this,l=!1;a=B(a);var m=a.
data("$$animateClasses");return m?e&&m.options&&(m.options=ga.extend(m.options||{},e)):(m={classes:{},options:e},l=!0),e=m.classes,c=x(c)?c:c.split(" "),d=x(d)?d:d.split(" "),h(e,c,!0),h(e,d,!1),l&&(m.promise=f(function(c){var d=a.data("$$animateClasses");a.removeData("$$animateClasses");if(d){var e=g(a,d.classes);e&&k.$$setClassImmediately(a,e[0],e[1],d.options)}c()}),a.data("$$animateClasses",m)),m.promise},$$setClassImmediately:function(a,c,d,e){return c&&this.$$addClassImmediately(a,c),d&&this.$$removeClassImmediately(a,d),k(a,e),l()},enabled:C,cancel:C}}]}],ja=T("$compile");wc.$inject=["$provide","$$sanitizeUriProvider"];var Rc=/^((?:x|data)[\:\-_])/i,Vc="application/json",Zb={"Content-Type":Vc+";charset=utf-8"},tf=/^\[|^\{(?!\{)/,uf={"[":/]$/,"{":/}$/},sf=/^\)\]\}',?\n/,$b=T("$interpolate"),Sf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,xf={http:80,https:443,ftp:21},Fb=T("$location"),Tf={$$html5:!1,$$replace:!1,absUrl:Gb("$$absUrl"),url:function(a){if(D(a))return this.$$url;var c=Sf.exec(a)
;return(c[1]||""===a)&&this.path(decodeURIComponent(c[1])),(c[2]||c[1]||""===a)&&this.search(c[3]||""),this.hash(c[5]||""),this},protocol:Gb("$$protocol"),host:Gb("$$host"),port:Gb("$$port"),path:dd("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||V(a))a=a.toString(),this.$$search=qc(a);else{if(!H(a))throw Fb("isrcharg");a=Ea(a,{}),s(a,function(c,e){null==c&&delete a[e]}),this.$$search=a}break;default:D(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}return this.$$compose(),this},hash:dd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};s([cd,dc,cc],function(a){a.prototype=Object.create(Tf),a.prototype.state=function(c){if(!arguments.length)return this.$$state;if(a!==cc||!this.$$html5)throw Fb("nostate");return this.$$state=D(c)?null:c,this}});var la=T("$parse"),Uf=Function.prototype.call,Vf=Function.prototype
.apply,Wf=Function.prototype.bind,lb=ha();s({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},"undefined":function(){}},function(a,c){a.constant=a.literal=a.sharedGetter=!0,lb[c]=a}),lb["this"]=function(a){return a},lb["this"].sharedGetter=!0;var mb=z(ha(),{"+":function(a,c,d,e){return d=d(a,c),e=e(a,c),y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){return d=d(a,c),e=e(a,c),(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a
,c,d,e){return d(a,c)||e(a,c)},"!":function(a,c,d){return!d(a,c)},"=":!0,"|":!0}),Xf={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},gc=function(a){this.options=a};gc.prototype={constructor:gc,lex:function(a){this.text=a,this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var c=a+this.peek(),d=c+this.peek(2),e=mb[c],f=mb[d];mb[a]||e||f?(a=f?d:e?c:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,c){return-1!==c.indexOf(a)},peek:function(a){return a=a||1,this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber
:function(a){return"0"<=a&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){throw d=d||this.index,c=y(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d,la("lexerr",a,c,this.text)},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=Q(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else{if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:c,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){
var c=this.text.charAt(this.index);if(!this.isIdent(c)&&!this.isNumber(c))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Xf[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++,this.tokens.push({index:c,text:e,constant:!0,value:d});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var hb=function(a,c,d){this.lexer=a,this.$filter=c,this.options=d};hb.ZERO=z(function(){return 0},{sharedGetter:!0,constant:!0}),hb.prototype={constructor:hb,parse:function(a){return this.text=a,this.tokens=this.lexer.lex(a),a=this.statements(),0!==this.tokens.length&&this.throwError("is an unexpected token"
,this.tokens[0]),a.literal=!!a.literal,a.constant=!!a.constant,a},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in lb?a=lb[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index))},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){return this.peekAhead(0,a,c,d,e)},peekAhead:function(a,c,d,e,f){if(this.tokens.length>a){a=this.tokens[a];var g=a.text;if(g===c||g===
d||g===e||g===f||!(c||d||e||f))return a}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){if(0===this.tokens.length)throw la("ueoe",this.text);var c=this.expect(a);return c||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),c},unaryFn:function(a,c){var d=mb[a];return z(function(a,f){return d(a,f,c)},{constant:c.constant,inputs:[c]})},binaryFn:function(a,c,d,e){var f=mb[c];return z(function(c,e){return f(c,e,a,d)},{constant:a.constant&&d.constant,inputs:!e&&[a,d]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return zf(a,this.options,this.text)},constant:function(){var a=this.consume().value;return z(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.
length?a[0]:function(c,d){for(var e,f=0,g=a.length;f<g;f++)e=a[f](c,d);return e}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},filter:function(a){var c=this.$filter(this.consume().text),d,e;if(this.peek(":"))for(d=[],e=[];this.expect(":");)d.push(this.expression());var f=[a].concat(d||[]);return z(function(f,h){var l=a(f,h);if(e){e[0]=l;for(l=d.length;l--;)e[l+1]=d[l](f,h);return c.apply(t,e)}return c(l)},{constant:!c.$stateful&&f.every(ec),inputs:!c.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),z(function(d,f){return a.assign(d,c(d,f),f)},{inputs:[a,c]})):a},ternary:function(){var a=this.logicalOR(),c;if(this.expect("?")&&(c=this.assignment(),this.consume(":"))){var d=this.assignment();return z(function(e,f){return a
(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})}return a},logicalOR:function(){for(var a=this.logicalAND(),c;c=this.expect("||");)a=this.binaryFn(a,c.text,this.logicalAND(),!0);return a},logicalAND:function(){for(var a=this.equality(),c;c=this.expect("&&");)a=this.binaryFn(a,c.text,this.equality(),!0);return a},equality:function(){for(var a=this.relational(),c;c=this.expect("==","!=","===","!==");)a=this.binaryFn(a,c.text,this.relational());return a},relational:function(){for(var a=this.additive(),c;c=this.expect("<",">","<=",">=");)a=this.binaryFn(a,c.text,this.additive());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.text,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.text,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(hb.ZERO,a.text,this.unary()):
(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var c=this.identifier();return z(function(d,e,f){return d=f||a(d,e),null==d?t:c(d)},{assign:function(d,e,f){return(f=a(d,f))||a.assign(d,f={}),c.assign(f,e)}})},objectIndex:function(a){var c=this.text,d=this.expression();return this.consume("]"),z(function(e,f){var g=a(e,f),h=d(e,f);return sa(h,c),g?ta(g[h],c):t},{assign:function(e,f,g){var h=sa(d(e,g),c);return(g=ta(a(e,g),c))||a.assign(e,g={}),g[h]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text)do d.push(this.expression());while(this.expect(","));this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var l=c?c(g,h):y(c)?t:g,k=a(g,h,l)||C;if(f)for(var m=d.length;m--;)f[m]=ta(d[m](g,h),e);ta(l,e);if(k){if(k.constructor===k)throw la("isecfn",e);if(k===Uf||k===Vf||k===Wf)throw la("isecff",e)}return l=k.apply?k.apply(l,f):k(f[0],f[1],f[2],f[3],f[4]),ta(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==
this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),z(function(c,d){for(var e=[],f=0,g=a.length;f<g;f++)e.push(a[f](c,d));return e},{literal:!0,constant:a.every(ec),inputs:a})},object:function(){var a=[],c=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var d=this.consume();d.constant?a.push(d.value):d.identifier?a.push(d.text):this.throwError("invalid key",d),this.consume(":"),c.push(this.expression())}while(this.expect(","));return this.consume("}"),z(function(d,f){for(var g={},h=0,l=c.length;h<l;h++)g[a[h]]=c[h](d,f);return g},{literal:!0,constant:c.every(ec),inputs:c})}};var Bf=ha(),Af=ha(),Cf=Object.prototype.valueOf,Ca=T("$sce"),ma={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ja=T("$compile"),Z=Y.createElement("a"),id=Ba(M.location.href);Dc.$inject=["$provide"],jd.$inject=["$locale"],ld.$inject=["$locale"];var od=".",Mf={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear"
,1),MMMM:Ib("Month"),MMM:Ib("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:Ib("Day"),EEE:Ib("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){return a=-1*a.getTimezoneOffset(),a=(0<=a?"+":"")+(Hb(Math[0<a?"floor":"ceil"](a/60),2)+Hb(Math.abs(a%60),2))},ww:qd(2),w:qd(1)},Lf=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Kf=/^\-?\d+$/;kd.$inject=["$locale"];var Hf=da(Q),If=da(ub);md.$inject=["$parse"];var Td=da({restrict:"E",compile:function(a,c){if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===Da.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}),vb={};s(Eb,function(a,c){if("multiple"!=a){var d=ya("ng-"+c);vb[d]=function(){return{
restrict:"A",priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}}),s(Nc,function(a,c){vb[c]=function(){return{priority:100,link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(Of))){f.$set("ngPattern",new RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}}),s(["src","srcset","href"],function(a){var c=ya("ng-"+a);vb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,h=a;"href"===a&&"[object SVGAnimatedString]"===Da.call(e.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",g=null),f.$observe(c,function(c){c?(f.$set(h,c),Ra&&g&&e.prop(g,f[h])):"href"===a&&f.$set(h,null)})}}}});var Jb={$addControl:C,$$renameControl:function(a,c){a.$name=c},$removeControl:C,$setValidity:C,$setDirty:C,$setPristine:C,$setSubmitted:C};rd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var yd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:rd,compile:function(
a){return a.addClass(Sa).addClass(kb),{pre:function(a,d,g,h){if(!("action"in g)){var l=function(c){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),c.preventDefault()};d[0].addEventListener("submit",l,!1),d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",l,!1)},0,!1)})}var k=h.$$parentForm,m=h.$name;m&&(gb(a,m,h,m),g.$observe(g.name?"name":"ngForm",function(c){m!==c&&(gb(a,m,t,m),m=c,gb(a,m,h,m),k.$$renameControl(h,m))})),d.on("$destroy",function(){k.$removeControl(h),m&&gb(a,m,t,m),z(h,Jb)})}}}}}]},Ud=yd(),ge=yd(!0),Nf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Yf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Zf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,$f=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,zd=/^(\d{4})-(\d{2})-(\d{2})$/,Ad=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,jc=/^(\d{4})-W(\d\d)$/,Bd=/^(\d{4})-(\d\d)$/
,Cd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ag=/(\s+|^)default(\s+|$)/,Mb=new T("ngModel"),Dd={text:function(a,c,d,e,f,g){ib(a,c,d,e,f,g),hc(e)},date:jb("date",zd,Lb(zd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":jb("datetimelocal",Ad,Lb(Ad,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:jb("time",Cd,Lb(Cd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:jb("week",jc,function(a,c){if(pa(a))return a;if(F(a)){jc.lastIndex=0;var d=jc.exec(a);if(d){var e=+d[1],f=+d[2],g=d=0,h=0,l=0,k=pd(e),f=7*(f-1);return c&&(d=c.getHours(),g=c.getMinutes(),h=c.getSeconds(),l=c.getMilliseconds()),new Date(e,0,k.getDate()+f,d,g,h,l)}}return NaN},"yyyy-Www"),month:jb("month",Bd,Lb(Bd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,g){td(a,c,d,e),ib(a,c,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:$f.test(a)?parseFloat(a):t}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!V(a))throw Mb("numfmt",a);a=a.toString()}return a});if(d.min||
d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||D(h)||a>=h},d.$observe("min",function(a){y(a)&&!V(a)&&(a=parseFloat(a,10)),h=V(a)&&!isNaN(a)?a:t,e.$validate()})}if(d.max||d.ngMax){var l;e.$validators.max=function(a){return e.$isEmpty(a)||D(l)||a<=l},d.$observe("max",function(a){y(a)&&!V(a)&&(a=parseFloat(a,10)),l=V(a)&&!isNaN(a)?a:t,e.$validate()})}},url:function(a,c,d,e,f,g){ib(a,c,d,e,f,g),hc(e),e.$$parserName="url",e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||Yf.test(d)}},email:function(a,c,d,e,f,g){ib(a,c,d,e,f,g),hc(e),e.$$parserName="email",e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||Zf.test(d)}},radio:function(a,c,d,e){D(d.name)&&c.attr("name",++nb),c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type)}),e.$render=function(){c[0].checked=d.value==e.$viewValue},d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,g,h,l){var k=ud(l,a,"ngTrueValue",d.ngTrueValue,!0),m=ud(l,a,"ngFalseValue",d.ngFalseValue
,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,a&&a.type)}),e.$render=function(){c[0].checked=e.$viewValue},e.$isEmpty=function(a){return!1===a},e.$formatters.push(function(a){return fa(a,k)}),e.$parsers.push(function(a){return a?k:m})},hidden:C,button:C,submit:C,reset:C,file:C},xc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,g,h,l){l[0]&&(Dd[Q(h.type)]||Dd.text)(f,g,h,l[0],c,a,d,e)}}}}],kb="ng-valid",vd="ng-invalid",Sa="ng-pristine",Kb="ng-dirty",xd="ng-pending",bg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,g,h,l,k,m){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=t,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this
.$$success={},this.$pending=t,this.$name=m(d.name||"",!1)(a);var p=f(d.ngModel),q=p.assign,u=p,r=q,O=null,n=this;this.$$setOptions=function(a){if((n.$options=a)&&a.getterSetter){var c=f(d.ngModel+"()"),g=f(d.ngModel+"($$$p)");u=function(a){var d=p(a);return G(d)&&(d=c(a)),d},r=function(a,c){G(p(a))?g(a,{$$$p:n.$modelValue}):q(a,n.$modelValue)}}else if(!p.assign)throw Mb("nonassign",d.ngModel,va(e))},this.$render=C,this.$isEmpty=function(a){return D(a)||""===a||null===a||a!==a};var v=e.inheritedData("$formController")||Jb,w=0;sd({ctrl:this,$element:e,set:function(a,c){a[c]=!0},unset:function(a,c){delete a[c]},parentForm:v,$animate:g}),this.$setPristine=function(){n.$dirty=!1,n.$pristine=!0,g.removeClass(e,Kb),g.addClass(e,Sa)},this.$setDirty=function(){n.$dirty=!0,n.$pristine=!1,g.removeClass(e,Sa),g.addClass(e,Kb),v.$setDirty()},this.$setUntouched=function(){n.$touched=!1,n.$untouched=!0,g.setClass(e,"ng-untouched","ng-touched")},this.$setTouched=function(){n.$touched=!0,n.$untouched=!1
,g.setClass(e,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){h.cancel(O),n.$viewValue=n.$$lastCommittedViewValue,n.$render()},this.$validate=function(){if(!V(n.$modelValue)||!isNaN(n.$modelValue)){var a=n.$$rawModelValue,c=n.$valid,d=n.$modelValue,e=n.$options&&n.$options.allowInvalid;n.$$runValidators(n.$error[n.$$parserName||"parse"]?!1:t,a,n.$$lastCommittedViewValue,function(f){e||c===f||(n.$modelValue=f?a:t,n.$modelValue!==d&&n.$$writeModelToScope())})}},this.$$runValidators=function(a,c,d,e){function f(){var a=!0;return s(n.$validators,function(e,f){var g=e(c,d);a=a&&g,h(f,g)}),a?!0:(s(n.$asyncValidators,function(a,c){h(c,null)}),!1)}function g(){var a=[],e=!0;s(n.$asyncValidators,function(f,g){var l=f(c,d);if(!l||!G(l.then))throw Mb("$asyncValidators",l);h(g,t),a.push(l.then(function(){h(g,!0)},function(a){e=!1,h(g,!1)}))}),a.length?k.all(a).then(function(){l(e)},C):l(!0)}function h(a,c){m===w&&n.$setValidity(a,c)}function l(a){m===w&&e(a)}w++;var m=w;(function(a
){var c=n.$$parserName||"parse";if(a===t)h(c,null);else if(h(c,a),!a)return s(n.$validators,function(a,c){h(c,null)}),s(n.$asyncValidators,function(a,c){h(c,null)}),!1;return!0})(a)?f()?g():l(!1):l(!1)},this.$commitViewValue=function(){var a=n.$viewValue;h.cancel(O);if(n.$$lastCommittedViewValue!==a||""===a&&n.$$hasNativeValidators)n.$$lastCommittedViewValue=a,n.$pristine&&this.$setDirty(),this.$$parseAndValidate()},this.$$parseAndValidate=function(){var c=n.$$lastCommittedViewValue,d=D(c)?t:!0;if(d)for(var e=0;e<n.$parsers.length;e++)if(c=n.$parsers[e](c),D(c)){d=!1;break}V(n.$modelValue)&&isNaN(n.$modelValue)&&(n.$modelValue=u(a));var f=n.$modelValue,g=n.$options&&n.$options.allowInvalid;n.$$rawModelValue=c,g&&(n.$modelValue=c,n.$modelValue!==f&&n.$$writeModelToScope()),n.$$runValidators(d,c,n.$$lastCommittedViewValue,function(a){g||(n.$modelValue=a?c:t,n.$modelValue!==f&&n.$$writeModelToScope())})},this.$$writeModelToScope=function(){r(a,n.$modelValue),s(n.$viewChangeListeners,function(
a){try{a()}catch(d){c(d)}})},this.$setViewValue=function(a,c){n.$viewValue=a,n.$options&&!n.$options.updateOnDefault||n.$$debounceViewValueCommit(c)},this.$$debounceViewValueCommit=function(c){var d=0,e=n.$options;e&&y(e.debounce)&&(e=e.debounce,V(e)?d=e:V(e[c])?d=e[c]:V(e["default"])&&(d=e["default"])),h.cancel(O),d?O=h(function(){n.$commitViewValue()},d):l.$$phase?n.$commitViewValue():a.$apply(function(){n.$commitViewValue()})},a.$watch(function(){var c=u(a);if(c!==n.$modelValue){n.$modelValue=n.$$rawModelValue=c;for(var d=n.$formatters,e=d.length,f=c;e--;)f=d[e](f);n.$viewValue!==f&&(n.$viewValue=n.$$lastCommittedViewValue=f,n.$render(),n.$$runValidators(t,c,f,C))}return c})}],ve=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:bg,priority:1,compile:function(c){return c.addClass(Sa).addClass("ng-untouched").addClass(kb),{pre:function(a,c,f,g){var h=g[0],l=g[1]||Jb;h.$$setOptions(g[2]&&g[2].$options),l.$addControl(h),f.$observe("name"
,function(a){h.$name!==a&&l.$$renameControl(h,a)}),a.$on("$destroy",function(){l.$removeControl(h)})},post:function(c,e,f,g){var h=g[0];h.$options&&h.$options.updateOn&&e.on(h.$options.updateOn,function(a){h.$$debounceViewValueCommit(a&&a.type)}),e.on("blur",function(e){h.$touched||(a.$$phase?c.$evalAsync(h.$setTouched):c.$apply(h.$setTouched))})}}}}}],xe=da({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},yc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw T("ngPattern")("noregexp",g,a,va(c));f=a||t,e.$validate()}),e.$validators.pattern=function(a
){return e.$isEmpty(a)||D(f)||f.test(a)}}}}},Bc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=-1;d.$observe("maxlength",function(a){a=ba(a),f=isNaN(a)?-1:a,e.$validate()}),e.$validators.maxlength=function(a,c){return 0>f||e.$isEmpty(a)||c.length<=f}}}}},Ac=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=ba(a)||0,e.$validate()}),e.$validators.minlength=function(a,c){return e.$isEmpty(c)||c.length>=f}}}}},we=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",g="false"!==d.ngTrim,h=g?U(f):f;e.$parsers.push(function(a){if(!D(a)){var c=[];return a&&s(a.split(h),function(a){a&&c.push(g?U(a):a)}),c}}),e.$formatters.push(function(a){return x(a)?a.join(f):t}),e.$isEmpty=function(a){return!a||!a.length}}}},cg=/^(true|false|\d+)$/,ye=function(){return{restrict:"A",priority:100,compile:function(a,c){return cg.test(c.ngValue
)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},ze=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions),this.$options.updateOn!==t?(this.$options.updateOnDefault=!1,this.$options.updateOn=U(this.$options.updateOn.replace(ag,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Zd=["$compile",function(a){return{restrict:"AC",compile:function(c){return a.$$addBindingClass(c),function(c,e,f){a.$$addBindingInfo(e,f.ngBind),e=e[0],c.$watch(f.ngBind,function(a){e.textContent=a===t?"":a})}}}}],ae=["$interpolate","$compile",function(a,c){return{compile:function(d){return c.$$addBindingClass(d),function(d,f,g){d=a(f.attr(g.$attr.ngBindTemplate)),c.$$addBindingInfo(f,d.expressions),f=f[0],g.$observe("ngBindTemplate",function(a){f.textContent=a===t?"":a})}}}}],$d=["$sce","$parse","$compile",function(a,c,d){return{
restrict:"A",compile:function(e,f){var g=c(f.ngBindHtml),h=c(f.ngBindHtml,function(a){return(a||"").toString()});return d.$$addBindingClass(e),function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml),c.$watch(h,function(){e.html(a.getTrustedHtml(g(c))||"")})}}}}],be=ic("",!0),de=ic("Odd",0),ce=ic("Even",1),ee=Ja({compile:function(a,c){c.$set("ngCloak",t),a.removeClass("ng-cloak")}}),fe=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Cc={},dg={blur:!0,focus:!0};s("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ya("ng-"+a);Cc[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,g){var h=d(g[c],null,!0);return function(c,d){d.on(a,function(d){var f=function(){h(c,{$event:d})};dg[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var ie=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0
,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,l,k;c.$watch(e.ngIf,function(c){c?l||g(function(c,f){l=f,c[c.length++]=Y.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),l&&(l.$destroy(),l=null),h&&(k=tb(h.clone),a.leave(k).then(function(){k=null}),h=null))})}}}],je=["$templateRequest","$anchorScroll","$animate","$sce",function(a,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ga.noop,compile:function(f,g){var h=g.ngInclude||g.src,l=g.onload||"",k=g.autoscroll;return function(f,g,q,s,r){var t=0,n,v,w,L=function(){v&&(v.remove(),v=null),n&&(n.$destroy(),n=null),w&&(d.leave(w).then(function(){v=null}),v=w,w=null)};f.$watch(e.parseAsResourceUrl(h),function(e){var h=function(){!y(k)||k&&!f.$eval(k)||c()},q=++t;e?(a(e,!0).then(function(a){if(q===t){var c=f.$new();s.template=a,a=r(c,function(a){L(),d.enter(a,null,g).then(h)}),n=c,w=a,n.$emit("$includeContentLoaded",e),f.$eval(l)}},function(){q===t&&
(L(),f.$emit("$includeContentError",e))}),f.$emit("$includeContentRequested",e)):(L(),s.template=null)})}}}}],Ae=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Fc(f.template,Y).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],ke=Ja({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),le=Ja({terminal:!0,priority:1e3}),me=["$locale","$interpolate",function(a,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(f,g,h){function l(a){g.text(a||"")}var k=h.count,m=h.$attr.when&&g.attr(h.$attr.when),p=h.offset||0,q=f.$eval(m)||{},u={},m=c.startSymbol(),r=c.endSymbol(),t=m+k+"-"+p+r,n=ga.noop,v;s(h,function(a,c){var d=e.exec(c);d&&(d=(d[1]?"-":"")+Q(d[2]),q[d]=g.attr(h.$attr[c]))}),s(q,function(a,e){u[e]=c(a.replace(d,t))}),f.$watch(k,function(c){c=parseFloat(c);var d=isNaN(c);d||c in q||(c=
a.pluralCat(c-p)),c===v||d&&isNaN(v)||(n(),n=f.$watch(u[c],l),v=c)})}}}],ne=["$parse","$animate",function(a,c){var d=T("ngRepeat"),e=function(a,c,d,e,k,m,p){a[d]=e,k&&(a[k]=m),a.$index=c,a.$first=0===c,a.$last=c===p-1,a.$middle=!a.$first&&!a.$last,a.$odd=!(a.$even=0===(c&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,l=Y.createComment(" end ngRepeat: "+h+" "),k=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",h);var m=k[1],p=k[2],q=k[3],u=k[4],k=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!k)throw d("iidexp",m);var r=k[3]||k[1],y=k[2];if(q&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(q)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(q)))throw d("badident",q);var n,v,w,D,z={$id:Na};return u?n=a(u):(w=function(a,c){return Na(c)},D=function(a){return a}),function(a,f,g,k,m){n&&
(v=function(c,d,e){return y&&(z[y]=c),z[r]=d,z.$index=e,n(a,z)});var u=ha();a.$watchCollection(p,function(g){var k,p,n=f[0],E,z=ha(),C,S,N,G,J,x,H;q&&(a[q]=g);if(Ta(g))J=g,p=v||w;else{p=v||D,J=[];for(H in g)g.hasOwnProperty(H)&&"$"!=H.charAt(0)&&J.push(H);J.sort()}C=J.length,H=Array(C);for(k=0;k<C;k++)if(S=g===J?k:J[k],N=g[S],G=p(S,N,k),u[G])x=u[G],delete u[G],z[G]=x,H[k]=x;else{if(z[G])throw s(H,function(a){a&&a.scope&&(u[a.id]=a)}),d("dupes",h,G,N);H[k]={id:G,scope:t,clone:t},z[G]=!0}for(E in u){x=u[E],G=tb(x.clone),c.leave(G);if(G[0].parentNode)for(k=0,p=G.length;k<p;k++)G[k].$$NG_REMOVED=!0;x.scope.$destroy()}for(k=0;k<C;k++)if(S=g===J?k:J[k],N=g[S],x=H[k],x.scope){E=n;do E=E.nextSibling;while(E&&E.$$NG_REMOVED);x.clone[0]!=E&&c.move(tb(x.clone),null,B(n)),n=x.clone[x.clone.length-1],e(x.scope,k,r,N,y,S,C)}else m(function(a,d){x.scope=d;var f=l.cloneNode(!1);a[a.length++]=f,c.enter(a,null,B(n)),n=f,x.clone=a,z[x.id]=x,e(x.scope,k,r,N,y,S,C)});u=z})}}}}],oe=["$animate",function(a){return{
restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],he=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],pe=Ja(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&s(d,function(a,d){c.css(d,"")}),a&&c.css(a)},!0)}),qe=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],h=[],l=[],k=[],m=function(a,c){return function(){a.splice(c,1)}};c.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=l.length;d<e;++d)a.cancel(l[d]);d=l.length=0;for(e=k.length;d<e;++d){var r=tb(h[d].clone);k[d].$destroy(),(l[d]=a.leave(r)).then(m(l,d))}h.length=0,k.length=0,(g=f.cases["!"+c]||f.cases["?"])&&s(g,function(c){c.transclude(function(d,e){k.push(e);var f=c.element
;d[d.length++]=Y.createComment(" end ngSwitchWhen: "),h.push({clone:d}),a.enter(d,f.parent(),f)})})})}}}],re=Ja({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[],e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),se=Ja({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:f,element:c})}}),ue=Ja({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw T("ngTransclude")("orphan",va(c));f(function(a){c.empty(),c.append(a)})}}),Vd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],eg=T("ngOptions"),te=da({restrict:"A",terminal:!0}),Wd=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/
,e={$setViewValue:C};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var l=this,k={},m=e,p;l.databound=d.ngModel,l.init=function(a,c,d){m=a,p=d},l.addOption=function(c,d){Ma(c,'"option value"'),k[c]=!0,m.$viewValue==c&&(a.val(c),p.parent()&&p.remove()),d&&d[0].hasAttribute("selected")&&(d[0].selected=!0)},l.removeOption=function(a){this.hasOption(a)&&(delete k[a],m.$viewValue===a&&this.renderUnknownOption(a))},l.renderUnknownOption=function(c){c="? "+Na(c)+" ?",p.val(c),a.prepend(p),a.val(c),p.prop("selected",!0)},l.hasOption=function(a){return k.hasOwnProperty(a)},c.$on("$destroy",function(){l.renderUnknownOption=C})}],link:function(e,g,h,l){function k(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(C.parent()&&C.remove(),c.val(a),""===a&&n.prop("selected",!0)):D(a)&&n?c.val(""):e.renderUnknownOption(a)},c.on("change",function(){a.$apply(function(){C.parent()&&C.remove(),d.$setViewValue(c.val())})})}function m(
a,c,d){var e;d.$render=function(){var a=new db(d.$viewValue);s(c.find("option"),function(c){c.selected=y(a.get(c.value))})},a.$watch(function(){fa(e,d.$viewValue)||(e=qa(d.$viewValue),d.$render())}),c.on("change",function(){a.$apply(function(){var a=[];s(c.find("option"),function(c){c.selected&&a.push(c.value)}),d.$setViewValue(a)})})}function p(e,f,g){function h(a,c,d){return T[A]=d,H&&(T[H]=c),a(e,T)}function k(a){var c;if(u)if(M&&x(a)){c=new db([]);for(var d=0;d<a.length;d++)c.put(h(M,null,a[d]),!0)}else c=new db(a);else M&&(a=h(M,null,a));return function(d,e){var f;return f=M?M:B?B:F,u?y(c.remove(h(f,d,e))):a===h(f,d,e)}}function l(){v||(e.$$postDigest(p),v=!0)}function m(a,c,d){a[c]=a[c]||0,a[c]+=d?1:-1}function p(){v=!1;var a={"":[]},c=[""],d,l,n,r,t;n=g.$viewValue,r=P(e)||[];var B=H?Object.keys(r).sort():r,x,A,D,F,N={};t=k(n);var I=!1,U,V;Q={};for(F=0;D=B.length,F<D;F++){x=F;if(H&&(x=B[F],"$"===x.charAt(0)))continue;A=r[x],d=h(J,x,A)||"",(l=a[d])||(l=a[d]=[],c.push(d)),d=t(x,A),I=
I||d,A=h(C,x,A),A=y(A)?A:"",V=M?M(e,T):H?B[F]:F,M&&(Q[V]=x),l.push({id:V,label:A,selected:d})}u||(z||null===n?a[""].unshift({id:"",label:"",selected:!I}):I||a[""].unshift({id:"?",label:"",selected:!0})),x=0;for(B=c.length;x<B;x++){d=c[x],l=a[d],R.length<=x?(n={element:G.clone().attr("label",d),label:l.label},r=[n],R.push(r),f.append(n.element)):(r=R[x],n=r[0],n.label!=d&&n.element.attr("label",n.label=d)),I=null,F=0;for(D=l.length;F<D;F++)d=l[F],(t=r[F+1])?(I=t.element,t.label!==d.label&&(m(N,t.label,!1),m(N,d.label,!0),I.text(t.label=d.label),I.prop("label",t.label)),t.id!==d.id&&I.val(t.id=d.id),I[0].selected!==d.selected&&(I.prop("selected",t.selected=d.selected),Ra&&I.prop("selected",t.selected))):(""===d.id&&z?U=z:(U=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),r.push(t={element:U,label:d.label,id:d.id,selected:d.selected}),m(N,d.label,!0),I?I.after(U):n.element.append(U),I=U);for(F++;r.length>F;)d=r.pop(),m(N,d.label
,!1),d.element.remove()}for(;R.length>x;){l=R.pop();for(F=1;F<l.length;++F)m(N,l[F].label,!1);l[0].element.remove()}s(N,function(a,c){0<a?q.addOption(c):0>a&&q.removeOption(c)})}var n;if(!(n=r.match(d)))throw eg("iexp",r,va(f));var C=c(n[2]||n[1]),A=n[4]||n[6],D=/ as /.test(n[0])&&n[1],B=D?c(D):null,H=n[5],J=c(n[3]||""),F=c(n[2]?n[1]:A),P=c(n[7]),M=n[8]?c(n[8]):null,Q={},R=[[{element:f,label:""}]],T={};z&&(a(z)(e),z.removeClass("ng-scope"),z.remove()),f.empty(),f.on("change",function(){e.$apply(function(){var a=P(e)||[],c;if(u)c=[],s(f.val(),function(d){d=M?Q[d]:d,c.push("?"===d?t:""===d?null:h(B?B:F,d,a[d]))});else{var d=M?Q[f.val()]:f.val();c="?"===d?t:""===d?null:h(B?B:F,d,a[d])}g.$setViewValue(c),p()})}),g.$render=p,e.$watchCollection(P,l),e.$watchCollection(function(){var a=P(e),c;if(a&&x(a)){c=Array(a.length);for(var d=0,f=a.length;d<f;d++)c[d]=h(C,d,a[d])}else if(a)for(d in c={},a)a.hasOwnProperty(d)&&(c[d]=h(C,d,a[d]));return c},l),u&&e.$watchCollection(function(){return g.$modelValue
},l)}if(l[1]){var q=l[0];l=l[1];var u=h.multiple,r=h.ngOptions,z=!1,n,v=!1,w=B(Y.createElement("option")),G=B(Y.createElement("optgroup")),C=w.clone();h=0;for(var A=g.children(),H=A.length;h<H;h++)if(""===A[h].value){n=z=A.eq(h);break}q.init(l,z,C),u&&(l.$isEmpty=function(a){return!a||0===a.length}),r?p(e,g,l):u?m(e,g,l):k(e,g,l,q)}}}}],Yd=["$interpolate",function(a){var c={addOption:C,removeOption:C};return{restrict:"E",priority:100,compile:function(d,e){if(D(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var k=d.parent(),m=k.data("$selectController")||k.parent().data("$selectController");m&&m.databound||(m=c),f?a.$watch(f,function(a,c){e.$set("value",a),c!==a&&m.removeOption(c),m.addOption(a,d)}):m.addOption(e.value,d),d.on("$destroy",function(){m.removeOption(e.value)})}}}}],Xd=da({restrict:"E",terminal:!1});M.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(Nd(),Pd(ga),B(Y).ready(function(){Jd(Y,sc)}))}(window,document
),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),define("angular",["jcookie"],function(global){return function(){var ret,fn;return ret||global.angular}}(this)),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0
,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2
,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()
},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.
fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i
,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e
(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):
c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1
;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1
;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==
b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e
(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o,o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void (q=d.url()):void (d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates
(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky"
);return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift
())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J
(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=
d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,
l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q))throw f.relative?new Error("Could not resolve '"+b+"' from state '"+f.relative+"'"):new Error("No such state '"+b+"'")}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=
null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError"
,b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params
.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet
},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){
a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"
),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!
c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=
b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util"
,["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+
this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&
(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==
f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller"
,"$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular),define("uiRouter",function(){}),function(window,angular,undefined){angular.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function($rootScope,$browser){var cookies={},lastCookies={},lastBrowserCookies,runEval=!1,copy=angular.copy,isUndefined=angular.isUndefined;$browser.addPollFn(function(){var currentCookies=$browser.cookies();lastBrowserCookies!=currentCookies&&(lastBrowserCookies=currentCookies,copy(currentCookies,lastCookies),copy(currentCookies,cookies),runEval&&$rootScope.$apply())})(),runEval=!0,$rootScope
.$watch(push);return cookies;function push(){var name,value,browserCookies,updated;for(name in lastCookies)isUndefined(cookies[name])&&$browser.cookies(name,undefined);for(name in cookies)value=cookies[name],angular.isString(value)||(value=""+value,cookies[name]=value),value!==lastCookies[name]&&($browser.cookies(name,value),updated=!0);if(updated){updated=!1,browserCookies=$browser.cookies();for(name in cookies)cookies[name]!==browserCookies[name]&&(isUndefined(browserCookies[name])?delete cookies[name]:cookies[name]=browserCookies[name],updated=!0)}}}]).factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){var value=$cookies[key];return typeof value=="object"&&Object.prototype.toString.call(value).toLowerCase()=="[object object]"&&!value.length?value?angular.fromJson(value):value:value},put:function(key,value){$cookies[key]=angular.toJson(value)},remove:function(key){delete $cookies[key]}}}])}(window,window.angular),define("ngCookies",function(){}),define("directives/module"
,["angular"],function(ng){return ng.module("app.directives",[])}),define("directives/lazyImgDirective",["./module"],function(directives){directives.directive("lazyImgSrc",[function(){return{restrict:"A",scope:{eventHandler:"&ngClick"},link:function($scope,element,attrs){var currentElement=element,img,loadImage,IMAGE_LOAD="images/default.png",IMAGE_FAIL="images/default.png",defaultImg=element[0].getAttribute("default-img");defaultImg&&(IMAGE_LOAD=defaultImg,IMAGE_FAIL=defaultImg),img=null;var source=attrs.src;element[0].src=IMAGE_LOAD,loadImage=function(){var psrc=attrs.lazyImgSrc,newElement=element.clone(!0);img=new Image;if(psrc==undefined||psrc=="")psrc=source;psrc=psrc==undefined?IMAGE_FAIL:psrc,img.src=psrc,img.onload=function(){newElement[0].src=psrc,currentElement.replaceWith(newElement),currentElement=newElement},img.onerror=function(){newElement[0].src=IMAGE_FAIL,currentElement.replaceWith(newElement),currentElement=newElement},newElement.bind("click",function(e){$scope.$apply(function(
){})})},attrs.$observe("lazyImgSrc",function(src){loadImage()})}}}])}),define("directives/scrollUp",["./module"],function(directives){directives.directive("scrollUp",[function(){return{restrict:"AECM",replace:!0,link:function(scope,iElm,iAttrs,controller){var $body=$(document.body),$bottomTools=$(".bottom_tools");$(window).scroll(function(){var scrollHeight=$(document).height(),scrollTop=$(window).scrollTop(),$footerHeight=$(".page-footer").outerHeight(!0),$windowHeight=$(window).innerHeight();scrollTop>$(window).height()*2?$("#scrollUp").fadeIn(200).css("display","block"):$("#scrollUp").fadeOut(200),$bottomTools.css("bottom",scrollHeight-scrollTop-$footerHeight>$windowHeight?40:$windowHeight+scrollTop+$footerHeight+40-scrollHeight)}),$("#scrollUp").click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:0})})}}}])}),define("directives/shouQi",["./module"],function(directives){directives.directive("shouQi",[function(){return{scope:{speed:"@"},restrict:"AE",template:'<p class="control" ng-click="shouqi()">\u6536\u8d77<img src="images/1_23.png"/></p>'
,replace:!0,link:function(scope,iElm,iAttrs,controller){var control=$(".content-m .control");scope.shouqi=function(){$("#content-m").toggle(scope.speed,function(e){control.text()=="\u6536\u8d77"?($(".content-m").css("margin-top","-25px"),$(".content-m .control").html('\u5c55\u5f00<img src="images/1_23-1.png"/>')):($(".content-m").css("margin-top","0px"),$(".content-m .control").html('\u6536\u8d77<img src="images/1_23.png"/>'))})}}}}])}),define("directives/projectFocus",["./module"],function(directives){directives.directive("projectFocus",[function(){return{scope:{focusState:"@"},controller:function($scope,$element,$attrs,$transclude){console.log($scope.focusState)},restrict:"AE",template:'<span id="xuxiaoguanzhu" class="reply"><img src="images/1_2.png"/><span>\u53d6\u6d88\u5173\u6ce8</span></span>',replace:!0,link:function(scope,iElm,iAttrs,controller){console.log(scope.focusState);var xuxiaoguanzhu=$("#xuxiaoguanzhu");$("#xuxiaoguanzhu").on("click",function(){xuxiaoguanzhu.find("span")
.text()=="\u53d6\u6d88\u5173\u6ce8"?xuxiaoguanzhu.html('<img src="images/1_2-1.png"/><span>\u5173\u6ce8</span>'):xuxiaoguanzhu.html('<img src="images/1_2.png"/><span>\u53d6\u6d88\u5173\u6ce8</span>')})}}}])}),define("directives/index",["./module","./lazyImgDirective","./scrollUp","./shouQi","./projectFocus"],function(){}),define("services/module",["angular"],function(ng){return ng.module("app.services",[])}),define("services/loginService",["./module"],function(services){services.factory("loginService",["$http","config","$cookieStore",function($http,config,$cookieStore){var service={login:function(login){return $http({url:config.ucenterUrl+"/sys/login",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:login,cache:!1})},logout:function(){return $http({url:config.ucenterUrl+"/system/logout",method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},cache:!1})},isActive:function(){return $http({url:config.ucenterUrl+"/sys/isActive",method:"GET",headers
:{"Content-Type":"application/json;charset=UTF-8"},cache:!1})}};return service}])}),define("services/projectHomeService",["./module"],function(services){services.factory("projectHomeService",["$http","config","$cookieStore",function($http,config,$cookieStore){var service={hotList:function(enterpriseCode){var data="&enterpriseCode="+enterpriseCode+"&userCode="+portal.user.userCode+"&count=10"+"&freq=1"+"&relatedType=0";return $http({url:config.baseUrl+"/project/hotList?__ajax=true"+data,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},cache:!1})},queryExpert:function(name,status,hot,sort){var data={name:name,status:status,hot:hot,orderBy:"USERNAME",isAsc:sort};return $http({url:config.ucenterUrl+"/expert/queryExpert",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:data,cache:!1})},bannerList:function(enterpriseCode,channelCode){var data="channelCode="+channelCode+"&addType=3&enterpriseCode="+enterpriseCode;return $http({url:config.baseUrl+"/news/banner/bannerList?__ajax=true&"+
data,method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},cache:!1})}};return service}])}),define("services/index",["./module","./loginService","./projectHomeService"],function(){});var MessageCenterModule=angular.module("MessageCenterModule",[]);MessageCenterModule.service("messageCenterService",["$rootScope","$sce","$timeout",function($rootScope,$sce,$timeout){return{mcMessages:this.mcMessages||[],offlistener:this.offlistener||undefined,status:{unseen:"unseen",shown:"shown",next:"next",permanent:"permanent"},add:function(type,message,options){var availableTypes=["info","warning","danger","success"],service=this;options=options||{};if(availableTypes.indexOf(type)==-1)throw"Invalid message type";var messageObject={type:type,status:options.status||this.status.unseen,processed:!1,close:function(){return service.remove(this)}};return messageObject.message=options.html?$sce.trustAsHtml(message):message,messageObject.html=!!options.html,angular.isDefined(options.timeout)&&(
messageObject.timer=$timeout(function(){messageObject.close()},options.timeout)),this.mcMessages.push(messageObject),messageObject},remove:function(message){var index=this.mcMessages.indexOf(message);this.mcMessages.splice(index,1)},reset:function(){this.mcMessages=[]},removeShown:function(){for(var index=this.mcMessages.length-1;index>=0;index--)this.mcMessages[index].status==this.status.shown&&this.remove(this.mcMessages[index])},markShown:function(){for(var index=this.mcMessages.length-1;index>=0;index--)this.mcMessages[index].processed||(this.mcMessages[index].status==this.status.unseen?(this.mcMessages[index].status=this.status.shown,this.mcMessages[index].processed=!0):this.mcMessages[index].status==this.status.next&&(this.mcMessages[index].status=this.status.unseen))},flush:function(){$rootScope.mcMessages=this.mcMessages}}}]),MessageCenterModule.directive("mcMessages",["$rootScope","messageCenterService",function($rootScope,messageCenterService){var templateString='          <span class="loginForm-message" id="mc-messages-wrapper" ng-cloak ng-repeat="message in mcMessages" style="position: static;" >                   <i class="span-icon-message-center ok-{{message.type}}" style="margin-left: -30px;margin-top: -8px;"></i>                  <span class="color-{{message.type}}">{{ message.message }}</span>          </span>           '
;return{restrict:"EA",template:templateString,link:function(scope,element,attrs){messageCenterService.flush();var changeReaction=function(event,to,from){messageCenterService.markShown(),messageCenterService.removeShown(),$rootScope.mcMessages=messageCenterService.mcMessages,messageCenterService.flush()};messageCenterService.offlistener===undefined&&(messageCenterService.offlistener=$rootScope.$on("$locationChangeSuccess",changeReaction)),scope.animation=attrs.animation||"fade in"}}}]),define("message-center",["angular"],function(){}),define("controllers/module",["angular","message-center"],function(ng){return ng.module("app.controllers",["app.services","MessageCenterModule","ngCookies","carouselar"])}),define("controllers/expertHomeController",["./module"],function(controllers){controllers.controller("expertHomeController",["$rootScope","$scope","$state","$stateParams","$window","$location","messageCenterService","config","$cookieStore","projectHomeService",function($rootScope,$scope,$state
,$stateParams,$window,$location,messageCenterService,config,$cookieStore,projectHomeService){$rootScope.titleStr="\u79d1\u6280\u5317\u6597 - \u79d1\u6280\u4e13\u5bb6",$scope.enterpriseCode=$stateParams.enterpriseCode,$scope.actor=$stateParams.actor?$stateParams.actor:0,$scope.bannerList=[],$scope.interval={},$scope.expertList=[],$scope.hotList=[],$scope.user={},$scope.admin=function(){var pt=portal.getCurrentUser().portal,admin=pt.admin;return admin=="true"?!0:!1},$scope.getBannerList=function(){projectHomeService.bannerList($scope.enterpriseCode,"8101").success(function(data,header,config,status){data.success?($scope.bannerList=data.bannerList==null?[]:data.bannerList,$scope.bannerList.forEach(function(e){e.enterpriseCode=$scope.enterpriseCode}),$scope.interval=data.cycletime):console.log("\u67e5\u8be2\u5173\u6ce8\u7684\u9879\u76ee\u5931\u8d25\uff01")}).error(function(data){console.log("\u67e5\u8be2\u5173\u6ce8\u7684\u9879\u76ee\u5931\u8d25------\u3002")})},$scope.expertQuery={name:"",
status:1,hot:1,isAsc:0},$scope.getExpertList=function(){projectHomeService.queryExpert($scope.expertQuery.name,$scope.expertQuery.status,$scope.expertQuery.hot,$scope.expertQuery.isAsc).success(function(data,header,config,status){data.success?$scope.expertList=data.experts:console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25\uff01")}).error(function(data){console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25------\u3002")})},$scope.getHotList=function(){projectHomeService.hotList($scope.enterpriseCode).success(function(data,header,config,status){data.success?$scope.hotList=data.hotProjectList:console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25\uff01")}).error(function(data){console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25------\u3002")})},$scope.initData=function(){$scope.user=portal.user,$rootScope.initActor(),portal.setCurrentAppModule("81"),$rootScope.initActor(),$scope.getBannerList(),$scope.getHotList(),$scope.getExpertList()},$scope.loadFlag=!1,typeof portal!="undefined"&&portal.ready&&portal
.setAppModules($scope.enterpriseCode,81,!1,function(){$scope.loadFlag=!0,$scope.initData()}),$(document).on("HeaderCompleteEvent",function(){if($scope.loadFlag&&$scope.enterpriseCode!=portal.getCurrentUser().portal.groupId){$state.go("home",{enterpriseCode:portal.getCurrentUser().portal.groupId});return}portal.setAppModules($scope.enterpriseCode,81,!1,function(){$scope.loadFlag=!0,$scope.initData()})}),$scope.toPersonalPage=function(userCode){$window.open("projectHome.html#/personalPage/"+userCode)}}])}),define("controllers/projectExpertController",["./module"],function(controllers){controllers.controller("projectExpertController",["$rootScope","$scope","$state","$window","messageCenterService","config","$cookieStore","projectHomeService",function($rootScope,$scope,$state,$window,messageCenterService,config,$cookieStore,projectHomeService){$rootScope.titleStr="\u79d1\u6280\u5317\u6597 - \u5168\u90e8\u4e13\u5bb6",$scope.storyList=[],$scope.hotList=[],$scope.user="",$scope.enterpriseCode="1"
,$scope.expertQuery={name:"",status:1,hot:"",isAsc:1},$scope.getExpertList=function(){projectHomeService.queryExpert($scope.expertQuery.name,$scope.expertQuery.status,$scope.expertQuery.hot,$scope.expertQuery.isAsc).success(function(data,header,config,status){data.success?$scope.expertList=data.experts:console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25\uff01")}).error(function(data){console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25------\u3002")})},$scope.getHotList=function(){projectHomeService.hotList("1").success(function(data,header,config,status){data.success?$scope.hotList=data.hotProjectList:console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25\uff01")}).error(function(data){console.log("\u67e5\u8be2\u4e13\u5bb6\u5931\u8d25------\u3002")})},$scope.initData=function(){$scope.user=portal.user,portal.setCurrentAppModule("81"),$scope.enterpriseCode=portal.getCurrentUser().portal.groupId,$scope.expertQuery={name:"",status:1,hot:"",isAsc:1},$scope.getExpertList(),$scope.getHotList()},typeof 
portal!="undefined"&&portal.ready&&$scope.initData(),$(document).on("HeaderCompleteEvent",function(){$scope.initData()}),$scope.search=function(){$scope.getExpertList()},$scope.sort=function(){$scope.expertQuery.isAsc=$scope.expertQuery.isAsc==0?1:0,$scope.getExpertList()},$scope.toPersonalPage=function(userCode){$window.open("projectHome.html#/personalPage/"+userCode)}}])}),define("controllers/index",["./module","./expertHomeController","./projectExpertController"],function(){}),define("filters/module",["angular"],function(ng){var module=ng.module("app.filters",[]);return module.filter("patentType",function(){return function(value){return value==undefined?"":value=="0"?"\u53d1\u660e":value=="1"?"\u5b9e\u7528\u65b0\u578b":value=="2"?"\u5916\u89c2\u8bbe\u8ba1":value}}),module.filter("patentState",function(){return function(value){return value==undefined?"":value=="0"?"\u7533\u8bf7\u4e2d":value=="1"?"\u5df2\u6388\u6743":value}}),module.filter("typeName",function(){return function(value){return value==
undefined?"":value=="1"?"\u9879\u76ee":value=="2"?"\u8bba\u6587":value=="3"?"\u4e13\u5229":value=="11"?"\u9879\u76ee\u6545\u4e8b":value}}),module.filter("typeImg",function(){return function(value){return value==undefined?"":value=="1"?"/images/hot-xiangmu.png":value=="2"?"/images/hot-lunwen.png":value=="3"?"/images/hot-zhuanli.png":value}}),module.filter("imgType",function(){var filterfun=function(url){return url==undefined?"images/defaulfile.png":url.endWith("docx")||url.endWith("doc")?"images/word.fw.png":url.endWith("xlsx")||url.endWith("xls")?"images/excel.fw.png":url.endWith("pdf")?"images/pdf.png":url.endWith("zip")?"images/zip.png":url.endWith("rar")?"images/rar.png":"images/defaulfile.png"};return filterfun}),module.filter("cutFileName",function(){return function(input,size){var indexOfDian=input.lastIndexOf("."),fileSuffix=input.substring(indexOfDian,input.length),name=input.substring(0,indexOfDian),cut=name;return name.length>size&&(cut=name.substring(0,8)+"..."+name.substring
(name.length-3,name.length)),cut+fileSuffix}}),module.filter("attSizeFormate",function(){return function(value){return value<1024?value+"B":value>=1024&&value<1048576?(value/1024).toFixed(2)+"KB":value>=1048576?(value/1024/1024).toFixed(2)+"M":value}}),module.filter("checkStateName",function(){return function(value){return value==undefined?"":value==1?"\u5ba1\u6838\u4e2d":value==2?"\u5ba1\u6838\u901a\u8fc7":value==3?"\u5ba1\u6838\u672a\u901a\u8fc7":value==9?"\u8349\u7a3f\u7bb1":value}}),module.filter("cutImgStyle",function(){return function(value,style){return value?value+"@!"+style:""}}),module}),define("filters/cutFilter",["./module"],function(filters){filters.filter("cut",function(){return function(value,wordwise,max){return value?(max=parseInt(max,10),max?value.length<=max?value:(value=value.substr(0,max)+"....",value):value):""}})}),define("filters/to_trusted",["./module"],function(filters){filters.filter("to_trusted",function($sce){return function(text){return $sce.trustAsHtml(text
)}})}),define("filters/htmlFilter",["./module"],function(filters){filters.filter("htmlFilter",function(){return function(value){if(!value)return"";var str=value;return str=str.replace(/<\/?[^>]*>/g,""),str=str.replace(/[ | ]*\n/g,"\n"),str=str.replace(/&nbsp;/ig,""),str}})}),define("filters/index",["./module","./cutFilter","./to_trusted","./htmlFilter"],function(){}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html"
,"template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular
.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(a){return{link:function(b,c,d){function e(){c.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),a.addClass(c,"in",{to:{height:c[0].scrollHeight+"px"}}).then(f)}function f(){c.removeClass("collapsing"),c.css({height:"auto"})}function g(){return c.hasClass("collapse")||c.hasClass("in")?(c.css({height:c[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void a.removeClass(c,"in",{to:{height:"0"}}).then(h)):h()}function h(){c.css({height:"0"}),c.removeClass("collapsing"),c.addClass("collapse")}b.$watch(d.collapse,function(a){a?g():e()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b
.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion.html"}}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}
}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable=!!b.close,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).value
("$bindHtmlUnsafeSuppressDeprecated",!1).directive("bindHtmlUnsafe",["$log","$bindHtmlUnsafeSuppressDeprecated",function(a,b){return function(c,d,e){b||a.warn("bindHtmlUnsafe is now deprecated. Use ngBindHtml instead"),d.addClass("ng-binding").data("$binding",e.bindHtmlUnsafe),c.$watch(e.bindHtmlUnsafe,function(a){d.html(a||"")})}}]),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){if(!c.disabled){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue
(d?null:a.$eval(c.btnRadio)),f.$render()})}})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$element","$interval","$animate",function(a,b,c,d){function e(b,c,e){r||(angular.extend(b,{direction:e,active:!0}),angular.extend(l.currentSlide||{},{direction:e,active:!1}),d.enabled()&&!a.noTransition&&!a.$currentTransition&&b.$element&&l.slides.length>1&&(b.$element.data(p,b.direction),l.currentSlide&&l.currentSlide.
$element&&l.currentSlide.$element.data(p,b.direction),a.$currentTransition=!0,n?d.on("addClass",b.$element,function(b,c){"close"===c&&(a.$currentTransition=null,d.off("addClass",b))}):b.$element.one("$animate:close",function(){a.$currentTransition=null})),l.currentSlide=b,q=c,g())}function f(a){if(angular.isUndefined(m[a].index))return m[a];var b;m.length;for(b=0;b<m.length;++b)if(m[b].index==a)return m[b]}function g(){h();var b=+a.interval;!isNaN(b)&&b>0&&(j=c(i,b))}function h(){j&&(c.cancel(j),j=null)}function i(){var b=+a.interval;k&&!isNaN(b)&&b>0&&m.length?a.next():a.pause()}var j,k,l=this,m=l.slides=a.slides=[],n=angular.version.minor>=4,o="uib-noTransition",p="uib-slideDirection",q=-1;l.currentSlide=null;var r=!1;l.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>l.getCurrentIndex()?"next":"prev"),b&&b!==l.currentSlide&&!a.$currentTransition&&e(b,d,c)},a.$on("$destroy",function(){r=!0}),l.getCurrentIndex=function(){return l.currentSlide&&angular.isDefined(l.
currentSlide.index)?+l.currentSlide.index:q},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:m.indexOf(a)},a.next=function(){var b=(l.getCurrentIndex()+1)%m.length;return 0===b&&a.noWrap()?void a.pause():l.select(f(b),"next")},a.prev=function(){var b=l.getCurrentIndex()-1<0?m.length-1:l.getCurrentIndex()-1;return a.noWrap()&&b===m.length-1?void a.pause():l.select(f(b),"prev")},a.isActive=function(a){return l.currentSlide===a},a.$watch("interval",g),a.$on("$destroy",h),a.play=function(){k||(k=!0,g())},a.pause=function(){a.noPause||(k=!1,h())},l.addSlide=function(b,c){b.$element=c,m.push(b),1===m.length||b.active?(l.select(m[m.length-1]),1==m.length&&a.play()):b.active=!1},l.removeSlide=function(a){angular.isDefined(a.index)&&m.sort(function(a,b){return+a.index>+b.index});var b=m.indexOf(a);m.splice(b,1),m.length>0&&a.active?l.select(b>=m.length?m[b-1]:m[b]):q>b&&q--,0===m.length&&(l.currentSlide=null)},a.$watch("noTransition",function(a){b.data(o,a)})}]).directive("carousel"
,[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(a,b){return b.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$injector","$animate",function(a,b){function c(a,b,c){a.removeClass(b),c&&c()}var d="uib-noTransition",e="uib-slideDirection",f=null;return a.has("$animateCss")&&(f=a.get("$animateCss")),{beforeAddClass:function(a,g,h){if("active"==g&&a.parent()&&!a.parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k+" "+j,h);return a.addClass
(j),f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()},beforeRemoveClass:function(a,g,h){if("active"===g&&a.parent()&&!a.parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k,h);return f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$log","$locale","orderByFilter",function(a,b,c){function d(a){var b=[],d=a.split("");return angular.forEach(g,function(c,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+c.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),b.push({index:f,apply:c.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:c(b,"index")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var f=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var g={yyyy:{regex:"\\d{4}",apply
:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},MMM:{regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:b.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:b.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},hh:{regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a}},H:{regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},mm:{regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},m:{regex:"[0-9]|[1-5][0-9]",
apply:function(a){this.minutes=+a}},sss:{regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},ss:{regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}},a:{regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)}}};this.parse=function(c,g,h){if(!angular.isString(c)||!g)return c;g=b.DATETIME_FORMATS[g]||g,g=g.replace(f,"\\$&"),this.parsers[g]||(this.parsers[g]=d(g));var i=this.parsers[g],j=i.regex,k=i.map,l=c.match(j);if(l&&l.length){var m,n;angular.isDate(h)&&!isNaN(h.getTime())?m={year:h.getFullYear(),month:h.getMonth(),date:h.getDate(),hours:h.getHours(),minutes:h.getMinutes(),seconds:h.getSeconds(),milliseconds:h.getMilliseconds()}:(h&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,p=l.length;p>o;o++){var q=k[o-1];q.apply&&q.apply.call(m,l[o])}return e(m.year
,m.month,m.date)&&(n=new Date(m.year,m.month,m.date,m.hours,m.minutes,m.seconds,m.milliseconds||0)),n}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement
.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode
:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig","$datepickerSuppressError",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){i[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=g[d]?new Date(g[d]):null}),angular.forEach(["minMode","maxMode"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){i[d]=angular.isDefined(c)?c:b[d],a[d]=i[d],("minMode"==d&&i.modes.indexOf(a.datepickerMode)<i.modes.indexOf(i[d])||"maxMode"==
d&&i.modes.indexOf(a.datepickerMode)>i.modes.indexOf(i[d]))&&(a.datepickerMode=i[d])}):(i[d]=g[d]||null,a[d]=i[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date
(j.$viewValue):null;j.$setValidity("dateDisabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},this.fixTimeZone=function(a){var b=a.getHours();a.setHours(23===b?b+2:0)},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=
i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){i.element[0].focus()};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:function(a,b)
{return b.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){for(var c,d=new Array(b),f=new Date(a),g=0;b>g;)c=new Date(f),e.fixTimeZone(c),d[g++]=c,f.setDate(f.getDate()+1);return d}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate
.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=(11-e.startingDay)%7,p=b.rows.length,q=0;p>q;q++)b.weekNumbers.push(h(b.rows[q][o].date))}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate
.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c,d=new Array(12),f=e.activeDate.getFullYear(),g=0;12>g;g++)c=new Date(f,g,1),e.fixTimeZone(c),d[g]=angular.extend(e.createDateObject(c,e.formatMonth),{uid:b.uniqueId+"-"+g});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(d,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}
else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b,c=new Array(f),g=0,h=e(d.activeDate.getFullYear());f>g;g++)b=new Date(h+g,0,1),d.fixTimeZone(b),c[g]=angular.extend(d.createDateObject(b,d.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=d.split(c,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView
()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).directive("datepickerPopup",["$compile","$parse","$document","$rootScope","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(a){if(angular.isNumber(a)&&(a=new Date(a)),a){if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=g.parse(a,q,j.date);return isNaN(b)?void 0:b}return void 0
}return null}function p(a,b){var c=a||b;if(!l.ngRequired&&!c)return!0;if(angular.isNumber(c)&&(c=new Date(c)),c){if(angular.isDate(c)&&!isNaN(c))return!0;if(angular.isString(c)){var d=g.parse(c,q);return!isNaN(d)}return!1}return!0}var q,r=angular.isDefined(l.closeOnDateSelection)?j.$parent.$eval(l.closeOnDateSelection):h.closeOnDateSelection,s=angular.isDefined(l.datepickerAppendToBody)?j.$parent.$eval(l.datepickerAppendToBody):h.appendToBody,t=angular.isDefined(l.onOpenFocus)?j.$parent.$eval(l.onOpenFocus):h.onOpenFocus,u=angular.isDefined(l.datepickerPopupTemplateUrl)?l.datepickerPopupTemplateUrl:h.datepickerPopupTemplateUrl,v=angular.isDefined(l.datepickerTemplateUrl)?l.datepickerTemplateUrl:h.datepickerTemplateUrl;j.showButtonBar=angular.isDefined(l.showButtonBar)?j.$parent.$eval(l.showButtonBar):h.showButtonBar,j.getText=function(a){return j[a+"Text"]||h[a+"Text"]};var w=!1;if(h.html5Types[l.type]?(q=h.html5Types[l.type],w=!0):(q=l.datepickerPopup||h.datepickerPopup,l.$observe("datepickerPopup"
,function(a){var b=a||h.datepickerPopup;if(b!==q&&(q=b,m.$modelValue=null,!q))throw new Error("datepickerPopup must have a date format specified.")})),!q)throw new Error("datepickerPopup must have a date format specified.");if(w&&l.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":u});var y=angular.element(x.children()[0]);if(y.attr("template-url",v),w&&"month"==l.type&&(y.attr("datepicker-mode",'"month"'),y.attr("min-mode","month")),l.datepickerOptions){var z=j.$parent.$eval(l.datepickerOptions);z&&z.initDate&&(j.initDate=z.initDate,y.attr("init-date","initDate"),delete z.initDate),angular.forEach(z,function(a,b){y.attr(n(b),a)})}j.watchData={},angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(a){if(l[a]){var c=b(l[a]);if(j.$parent
.$watch(c,function(b){j.watchData[a]=b}),y.attr(n(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;j.$watch("watchData."+a,function(a,b){angular.isFunction(d)&&a!==b&&d(j.$parent,a)})}}}),l.dateDisabled&&y.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),l.showWeeks&&y.attr("show-weeks",l.showWeeks),l.customClass&&y.attr("custom-class","customClass({ date: date, mode: mode })"),w?m.$formatters.push(function(a){return j.date=a,a}):(m.$$parserName="date",m.$validators.date=p,m.$parsers.unshift(o),m.$formatters.push(function(a){return j.date=a,m.$isEmpty(a)?a:f(a,q)})),j.dateSelection=function(a){angular.isDefined(a)&&(j.date=a);var b=j.date?f(j.date,q):null;k.val(b),m.$setViewValue(b),r&&(j.isOpen=!1,k[0].focus())},m.$viewChangeListeners.push(function(){j.date=g.parse(m.$viewValue,q,j.date)});var A=function(a){j.isOpen&&!k[0].contains(a.target)&&j.$apply(function(){j.isOpen=!1})},B=function(a){27===a.which&&j.isOpen?(a.preventDefault(),a.stopPropagation(),j.$apply(function(
){j.isOpen=!1}),k[0].focus()):40!==a.which||j.isOpen||(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.isOpen=!0}))};k.bind("keydown",B),j.keydown=function(a){27===a.which&&(j.isOpen=!1,k[0].focus())},j.$watch("isOpen",function(a){a?(j.position=s?e.offset(k):e.position(k),j.position.top=j.position.top+k.prop("offsetHeight"),i(function(){t&&j.$broadcast("datepicker.focus"),c.bind("click",A)},0,!1)):c.unbind("click",A)}),j.select=function(a){if("today"===a){var b=new Date;angular.isDate(j.date)?(a=new Date(j.date),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}j.dateSelection(a)},j.close=function(){j.isOpen=!1,k[0].focus()};var C=a(x)(j);x.remove(),s?c.find("body").append(C):k.after(C),j.$on("$destroy",function(){j.isOpen===!0&&(d.$$phase||j.$apply(function(){j.isOpen=!1})),C.remove(),k.unbind("keydown",B),c.unbind("click",A)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:function(
a,b){return b.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.bind("click",d),a.bind("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind("click",d),a.unbind("keydown",e))};var d=function(a){if(c&&(!a||"disabled"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&/(38|40)/.test(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document"
,"$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j){var k,l,m=this,n=a.$new(),o=d.openClass,p=angular.noop,q=b.onToggle?c(b.onToggle):angular.noop,r=!1,s=!1;this.init=function(d){m.$element=d,b.isOpen&&(l=c(b.isOpen),p=l.assign,a.$watch(l,function(a){n.isOpen=!!a})),r=angular.isDefined(b.dropdownAppendToBody),s=angular.isDefined(b.keyboardNav),r&&m.dropdownMenu&&(h.find("body").append(m.dropdownMenu),d.on("$destroy",function(){m.dropdownMenu.remove()}))},this.toggle=function(a){return n.isOpen=arguments.length?!!a:!n.isOpen},this.isOpen=function(){return n.isOpen},n.getToggleElement=function(){return m.toggleElement},n.getAutoClose=function(){return b.autoClose||"always"},n.getElement=function(){return m.$element},n.isKeynavEnabled=function(){return s},n.focusDropdownEntry=function(a){var b=m.dropdownMenu?angular.element(m.dropdownMenu).find("a"):angular.element(m.$element).find("ul").eq(0).find("a");switch(a){case 40:m.selectedOption=angular.isNumber(m.selectedOption)?m.selectedOption===
b.length-1?m.selectedOption:m.selectedOption+1:0;break;case 38:if(!angular.isNumber(m.selectedOption))return;m.selectedOption=0===m.selectedOption?0:m.selectedOption-1}b[m.selectedOption].focus()},n.getDropdownElement=function(){return m.dropdownMenu},n.focusToggleElement=function(){m.toggleElement&&m.toggleElement[0].focus()},n.$watch("isOpen",function(b,c){if(r&&m.dropdownMenu){var d=g.positionElements(m.$element,m.dropdownMenu,"bottom-left",!0),h={top:d.top+"px",display:b?"block":"none"},l=m.dropdownMenu.hasClass("dropdown-menu-right");l?(h.left="auto",h.right=window.innerWidth-(d.left+m.$element.prop("offsetWidth"))+"px"):(h.left=d.left+"px",h.right="auto"),m.dropdownMenu.css(h)}if(f[b?"addClass":"removeClass"](m.$element,o).then(function(){angular.isDefined(b)&&b!==c&&q(a,{open:!!b})}),b)m.dropdownMenuTemplateUrl&&j(m.dropdownMenuTemplateUrl).then(function(a){k=n.$new(),i(a.trim())(k,function(a){var b=a;m.dropdownMenu.replaceWith(b),m.dropdownMenu=b})}),n.focusToggleElement(),e.open
(n);else{if(m.dropdownMenuTemplateUrl){k&&k.$destroy();var s=angular.element('<ul class="dropdown-menu"></ul>');m.dropdownMenu.replaceWith(s),m.dropdownMenu=s}e.close(n),m.selectedOption=null}angular.isFunction(p)&&p(a,b)}),a.$on("$locationChangeSuccess",function(){"disabled"!==n.getAutoClose()&&(n.isOpen=!1)}),a.$on("$destroy",function(){n.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b),b.addClass("dropdown")}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){if(d){var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("keyboardNav",function(){return{restrict:"A",require:"?^dropdown",link:function(a,b,c,d){b.bind("keydown",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=d.dropdownMenu.find("a");switch(a.which){case 40:d.selectedOption=angular.isNumber(d.selectedOption)?d.selectedOption===
b.length-1?d.selectedOption:d.selectedOption+1:0;break;case 38:d.selectedOption=0===d.selectedOption?0:d.selectedOption-1}b[d.selectedOption].focus()}})}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=
d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$animate","$injector","$modalStack",function(a,b,c){function d(b,d,f){f.modalInClass&&(e?e(d,{addClass:f.modalInClass}).start():a.addClass(d,f.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var g=c();e?e(d,{removeClass:f.modalInClass}).start().then(g):a.removeClass(d,f.modalInClass).then(g)}))}var e=null;return b.has("$animateCss")&&(e=b.get("$animateCss")),{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector",function(a,b,c,d){var e=null;return d.has("$animateCss")&&(e=d.get("$animateCss")),{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(d,f,g){f.addClass(g.windowClass||""),d.size=g
.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},d.$isRendered=!0;var h=b.defer();g.$observe("modalRender",function(a){"true"==a&&h.resolve()}),h.promise.then(function(){g.modalInClass&&(e?e(f,{addClass:g.modalInClass}).start():c.addClass(f,g.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();e?e(f,{removeClass:g.modalInClass}).start().then(d):c.removeClass(f,g.modalInClass).then(d)}));var b=f[0].querySelectorAll("[autofocus]");b.length?b[0].focus():f[0].focus();var h=a.getTop();h&&a.modalRendered(h.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope"
,"$q","$injector","$$stackedMap",function(a,b,c,d,e,f,g,h){function i(){for(var a=-1,b=s.keys(),c=0;c<b.length;c++)s.get(b[c]).value.backdrop&&(a=c);return a}function j(a,b){var d=c.find("body").eq(0),e=s.get(a).value;s.remove(a),l(e.modalDomEl,e.modalScope,function(){d.toggleClass(a.openedClass||r,s.length()>0)}),k(),b&&b.focus?b.focus():d.focus()}function k(){if(o&&-1==i()){var a=p;l(o,p,function(){a=null}),o=void 0,p=void 0}}function l(b,c,d){function e(){e.done||(e.done=!0,n?n(b,{event:"leave"}).start().then(function(){b.remove()}):a.leave(b),c.$destroy(),d&&d())}var g,h=null,i=function(){return g||(g=f.defer(),h=g.promise),function(){g.resolve()}};return c.$broadcast(t.NOW_CLOSING_EVENT,i),f.when(h).then(e)}function m(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var n=null;g.has("$animateCss")&&(n=g.get("$animateCss"));var o,p,q,r="modal-open",s=h.createNew(),t={NOW_CLOSING_EVENT:"modal.stack.now-closing"},u=0,v="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]"
;return e.$watch(i,function(a){p&&(p.index=a)}),c.bind("keydown",function(a){if(a.isDefaultPrevented())return a;var b=s.top();if(b&&b.value.keyboard)switch(a.which){case 27:a.preventDefault(),e.$apply(function(){t.dismiss(b.key,"escape key press")});break;case 9:t.loadFocusElementList(b);var c=!1;a.shiftKey?t.isFocusInFirstItem(a)&&(c=t.focusLastFocusableElement()):t.isFocusInLastItem(a)&&(c=t.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}),t.open=function(a,b){var f=c[0].activeElement;s.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard,openedClass:b.openedClass});var g=c.find("body").eq(0),h=i();if(h>=0&&!o){p=e.$new(!0),p.index=h;var j=angular.element('<div modal-backdrop="modal-backdrop"></div>');j.attr("backdrop-class",b.backdropClass),b.animation&&j.attr("modal-animation","true"),o=d(j)(p),g.append(o)}var k=angular.element('<div modal-window="modal-window"></div>');k.attr({"template-url"
:b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:s.length()-1,animate:"animate"}).html(b.content),b.animation&&k.attr("modal-animation","true");var l=d(k)(b.scope);s.top().value.modalDomEl=l,s.top().value.modalOpener=f,g.append(l),g.addClass(b.openedClass||r),t.clearFocusListCache()},t.close=function(a,b){var c=s.get(a);return c&&m(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),j(a,c.value.modalOpener),!0):!c},t.dismiss=function(a,b){var c=s.get(a);return c&&m(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),j(a,c.value.modalOpener),!0):!c},t.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},t.getTop=function(){return s.top()},t.modalRendered=function(a){var b=s.get(a);b&&b.value.renderDeferred.resolve()},t.focusFirstFocusableElement=function(){return q.length>0?(q[0].focus(),!0):!1},t.focusLastFocusableElement=function(){return q.length>0?(q[q.length-1].focus
(),!0):!1},t.isFocusInFirstItem=function(a){return q.length>0?(a.target||a.srcElement)==q[0]:!1},t.isFocusInLastItem=function(a){return q.length>0?(a.target||a.srcElement)==q[q.length-1]:!1},t.clearFocusListCache=function(){q=[],u=0},t.loadFocusElementList=function(a){if((void 0===q||!q.length0)&&a){var b=a.value.modalDomEl;b&&b.length&&(q=b[0].querySelectorAll(v))}},t}]).provider("$modal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(b,c,d,e,f,g){function h(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function i(a){var c=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?c.push(d.when(b.invoke(a))):angular.isString(a)&&c.push(d.when(b.get(a)))}),c}var j={};return j.open=function(b){var e=d.defer(),j=d.defer(),k=d.defer(),l={result:e.promise,opened:j.promise,rendered:k.promise,close:function(
a){return g.close(l,a)},dismiss:function(a){return g.dismiss(l,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var m=d.all([h(b)].concat(i(b.resolve)));return m.then(function(a){var d=(b.scope||c).$new();d.$close=l.close,d.$dismiss=l.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var h,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=l,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),h=f(b.controller,i),b.controllerAs&&(b.bindToController&&angular.extend(h,d),d[b.controllerAs]=h)),g.open(l,{scope:d,deferred:e,renderDeferred:k,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size,openedClass:b.openedClass})},function(a){e.reject(a)}),m.then(function(){j.resolve(!0)},function(a){j.reject
(a)}),l},j}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},
a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(
f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"\u00ab Previous",nextText:"Next \u00bb",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html"
,replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate","$rootScope",function(e,f,g,h,i,j,k){return function(e,l,m,n){function o(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var p=a(e),q=j.startSymbol(),r=j.endSymbol(),s="<div "+p+'-popup title="'+q+"title"+r+'" '+(n.useContentExp?'content-exp="contentExp()" '
:'content="'+q+"content"+r+'" ')+'placement="'+q+"placement"+r+'" popup-class="'+q+"popupClass"+r+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(){var a=f(s);return function(b,c,d){function f(){F.isOpen?m():j()}function j(){(!E||b.$eval(d[l+"Enable"]))&&(t(),F.popupDelay?B||(B=g(p,F.popupDelay,!1),B.then(function(a){a()})):p()())}function m(){q(),k.$$phase||k.$digest()}function p(){return B=null,A&&(g.cancel(A),A=null),(n.useContentExp?F.contentExp():F.content)?(r(),y.css({top:0,left:0,display:"block"}),H(),F.isOpen=!0,F.$apply(),H):angular.noop}function q(){F.isOpen=!1,g.cancel(B),B=null,F.animation?A||(A=g(s,500)):s()}function r(){y&&s(),z=F.$new(),y=a(z,function(a){C?h.find("body").append(a):c.after(a)}),n.useContentExp&&(z.$watch("contentExp()",function(a){!a&&F.isOpen&&q()}),z.$watch(function(){G||(G=!0,z.$$postDigest(function(){G=!1,I()}))}))}function s(){A=null,y&&(y.remove(),y=null),z&&(z.$destroy(),z=null)}function t
(){u(),v(),w()}function u(){F.popupClass=d[l+"Class"]}function v(){var a=d[l+"Placement"];F.placement=angular.isDefined(a)?a:n.placement}function w(){var a=d[l+"PopupDelay"],b=parseInt(a,10);F.popupDelay=isNaN(b)?n.popupDelay:b}function x(){var a=d[l+"Trigger"];J(),D=o(a),D.show.forEach(function(a,b){a===D.hide[b]?c.bind(a,f):a&&(c.bind(a,j),c.bind(D.hide[b],m))})}var y,z,A,B,C=angular.isDefined(n.appendToBody)?n.appendToBody:!1,D=o(void 0),E=angular.isDefined(d[l+"Enable"]),F=b.$new(!0),G=!1,H=function(){if(y){var a=i.positionElements(c,y,F.placement,C);a.top+="px",a.left+="px",y.css(a)}},I=function(){g(H,0,!1)};F.origScope=b,F.isOpen=!1,F.contentExp=function(){return b.$eval(d[e])},n.useContentExp||d.$observe(e,function(a){F.content=a,!a&&F.isOpen?q():I()}),d.$observe("disabled",function(a){B&&a&&g.cancel(B),a&&F.isOpen&&q()}),d.$observe(l+"Title",function(a){F.title=a,I()}),d.$observe(l+"Placement",function(){F.isOpen&&g(function(){v(),p()()},0,!1)});var J=function(){D.show.forEach(function(
a){c.unbind(a,j)}),D.hide.forEach(function(a){c.unbind(a,m)})};x();var K=b.$eval(d[l+"Animation"]);F.animation=angular.isDefined(K)?!!K:n.animation;var L=b.$eval(d[l+"AppendToBody"]);C=angular.isDefined(L)?L:C,C&&b.$on("$locationChangeSuccess",function(){F.isOpen&&q()}),b.$on("$destroy",function(){g.cancel(A),g.cancel(B),J(),s(),F=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.tooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}
}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(a){return a("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"
},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(a){return a("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(a,b,c){return b||c.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive
("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html"}}).directive("popoverHtml",["$tooltip",function(a){return a("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular
.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.$watch("value",function(){b.recalculatePercentage()}),b.recalculatePercentage=function(){b.percent=+(100*b.value/b.max).toFixed(2);var a=0;d.bars.forEach(function(b){a+=b.percent}),a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)},a.$watch("max",function(){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA"
,replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(
b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],
f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse","$log",function(a,b){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html"
,transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(c,d,e,f,g){c.$watch("active",function(a){a&&f.select(c)}),c.disabled=!1,e.disable&&c.$parent.$watch(a(e.disable),function(a){c.disabled=!!a}),e.disabled&&(b.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),c.$parent.$watch(a(e.disabled),function(a){c.disabled=!!a})),c.select=function(){c.disabled||(c.active=!0)},f.addTab(c),c.$on("$destroy",function(){f.removeTab(c)}),c.$transcludeFn=g}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(
b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===q[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function j(a){k(),p.$setViewValue(new Date(o)),l(a)}function k(){p.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=o.getHours(),d=o.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.
hours="h"===b?c:i(c),"m"!==b&&(a.minutes=i(d)),a.meridian=o.getHours()<12?q[0]:q[1]}function m(a,b){var c=new Date(a.getTime()+6e4*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes()),d}function n(a){o=m(o,a),j()}var o=new Date,p={$setViewValue:angular.noop},q=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){p=c,p.$render=this.render,p.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g);var i=angular.isDefined(b.arrowkeys)?a.$parent.$eval(b.arrowkeys):f.arrowkeys;i&&this.setupArrowkeyEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var r=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){r=parseInt(a,10)});var s=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b
.minuteStep),function(a){s=parseInt(a,10)});var t;a.$parent.$watch(c(b.min),function(a){var b=new Date(a);t=isNaN(b)?void 0:b});var u;a.$parent.$watch(c(b.max),function(a){var b=new Date(a);u=isNaN(b)?void 0:b}),a.noIncrementHours=function(){var a=m(o,60*r);return a>u||o>a&&t>a},a.noDecrementHours=function(){var a=m(o,60*-r);return t>a||a>o&&a>u},a.noIncrementMinutes=function(){var a=m(o,s);return a>u||o>a&&t>a},a.noDecrementMinutes=function(){var a=m(o,-s);return t>a||a>o&&a>u},a.noToggleMeridian=function(){return o.getHours()<13?m(o,720)>u:m(o,-720)<t},a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,p.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(o.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours
():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void (a.updateMinutes=angular.noop);var d=function(b,c){p.$setViewValue(null),p.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(o.setHours(a),t>o||o>u?d(!0):j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),
a.updateMinutes=function(){var a=h();angular.isDefined(a)?(o.setMinutes(a),t>o||o>u?d(void 0,!0):j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var b=p.$viewValue;isNaN(b)?(p.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(o=b),t>o||o>u?(p.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):k(),l())},a.showSpinners=angular.isDefined(b.showSpinners)?a.$parent.$eval(b.showSpinners):f.showSpinners,a.incrementHours=function(){a.noIncrementHours()||n(60*r)},a.decrementHours=function(){a.noDecrementHours()||n(60*-r)},a.incrementMinutes=function(){a.noIncrementMinutes()||n(s)},a.decrementMinutes=function(){a.noDecrementMinutes()||n(-s)},a.toggleMeridian=function(){a.noToggleMeridian()||n(720*(o.getHours()<12?1:-1))}}]).directive("timepicker"
,function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(a,b,c,d,e){function f(a){for(var b in a)if(void 0!==h.style[b])return a[b]}e||d.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var g=function(d,e,f){f=f||{};var h=a.defer(),i=g[f.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(e)?d.addClass(e):angular.isFunction(e)?e(d):angular.isObject(e)&&d.css(e),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},h=document
.createElement("trans"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},j={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return g.transitionEndEventName=f(i),g.animationEndEventName=f(j),g}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$position","typeaheadParser",function(a,b,c,d,e,f,g,
h,i){var j=[9,13,27,38,40],k=200;return{require:"ngModel",link:function(l,m,n,o){function p(){G.moveInProgress||(G.moveInProgress=!0,G.$digest()),N&&d.cancel(N),N=d(function(){G.matches.length&&q(),G.moveInProgress=!1,G.$digest()},k)}function q(){G.position=B?h.offset(m):h.position(m),G.position.top+=m.prop("offsetHeight")}var r=l.$eval(n.typeaheadMinLength);r||0===r||(r=1);var s,t,u=l.$eval(n.typeaheadWaitMs)||0,v=l.$eval(n.typeaheadEditable)!==!1,w=b(n.typeaheadLoading).assign||angular.noop,x=b(n.typeaheadOnSelect),y=angular.isDefined(n.typeaheadSelectOnBlur)?l.$eval(n.typeaheadSelectOnBlur):!1,z=b(n.typeaheadNoResults).assign||angular.noop,A=n.typeaheadInputFormatter?b(n.typeaheadInputFormatter):void 0,B=n.typeaheadAppendToBody?l.$eval(n.typeaheadAppendToBody):!1,C=l.$eval(n.typeaheadFocusFirst)!==!1,D=n.typeaheadSelectOnExact?l.$eval(n.typeaheadSelectOnExact):!1,E=b(n.ngModel).assign,F=i.parse(n.typeahead),G=l.$new();l.$on("$destroy",function(){G.$destroy()});var H="typeahead-"+G.$id+"-"+
Math.floor(1e4*Math.random());m.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":H});var I=angular.element("<div typeahead-popup></div>");I.attr({id:H,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(n.typeaheadTemplateUrl)&&I.attr("template-url",n.typeaheadTemplateUrl);var J=function(){G.matches=[],G.activeIdx=-1,m.attr("aria-expanded",!1)},K=function(a){return H+"-option-"+a};G.$watch("activeIdx",function(a){0>a?m.removeAttr("aria-activedescendant"):m.attr("aria-activedescendant",K(a))});var L=function(a,b){return G.matches.length>b&&a?a.toUpperCase()===G.matches[b].label.toUpperCase():!1},M=function(a){var b={$viewValue:a};w(l,!0),z(l,!1),c.when(F.source(l,b)).then(function(c){var d=a===o.$viewValue;if(d&&s)if(c&&c.length>0){G.activeIdx=C?0:-1,z(l,!1),G.matches.length=0;for(var e=0;e<c.length;e++)b[F.itemName]=c[e],G.matches.push({id:K(e),label:F.viewMapper(G,b),model
:c[e]});G.query=a,q(),m.attr("aria-expanded",!0),D&&1===G.matches.length&&L(a,0)&&G.select(0)}else J(),z(l,!0);d&&w(l,!1)},function(){J(),w(l,!1),z(l,!0)})};B&&(angular.element(f).bind("resize",p),e.find("body").bind("scroll",p));var N;G.moveInProgress=!1,J(),G.query=void 0;var O,P=function(a){O=d(function(){M(a)},u)},Q=function(){O&&d.cancel(O)};o.$parsers.unshift(function(a){return s=!0,0===r||a&&a.length>=r?u>0?(Q(),P(a)):M(a):(w(l,!1),Q(),J()),v?a:a?void o.$setValidity("editable",!1):(o.$setValidity("editable",!0),null)}),o.$formatters.push(function(a){var b,c,d={};return v||o.$setValidity("editable",!0),A?(d.$model=a,A(l,d)):(d[F.itemName]=a,b=F.viewMapper(l,d),d[F.itemName]=void 0,c=F.viewMapper(l,d),b!==c?b:a)}),G.select=function(a){var b,c,e={};t=!0,e[F.itemName]=c=G.matches[a].model,b=F.modelMapper(l,e),E(l,b),o.$setValidity("editable",!0),o.$setValidity("parse",!0),x(l,{$item:c,$model:b,$label:F.viewMapper(l,e)}),J(),d(function(){m[0].focus()},0,!1)},m.bind("keydown",function(
a){if(0!==G.matches.length&&-1!==j.indexOf(a.which)){if(-1===G.activeIdx&&(9===a.which||13===a.which))return J(),void G.$digest();a.preventDefault(),40===a.which?(G.activeIdx=(G.activeIdx+1)%G.matches.length,G.$digest()):38===a.which?(G.activeIdx=(G.activeIdx>0?G.activeIdx:G.matches.length)-1,G.$digest()):13===a.which||9===a.which?G.$apply(function(){G.select(G.activeIdx)}):27===a.which&&(a.stopPropagation(),J(),G.$digest())}}),m.bind("blur",function(){y&&G.matches.length&&-1!==G.activeIdx&&!t&&(t=!0,G.$apply(function(){G.select(G.activeIdx)})),s=!1,t=!1});var R=function(a){m[0]!==a.target&&3!==a.which&&0!==G.matches.length&&(J(),g.$$phase||G.$digest())};e.bind("click",R),l.$on("$destroy",function(){e.unbind("click",R),B&&S.remove(),I.remove()});var S=a(I)(G);B?e.find("body").append(S):m.after(S)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html"
,link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default" ng-class="{\'panel-open\': isOpen}">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n'
)}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close($event)">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n'
)}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'
)}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'
)}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'
)}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n    modal-in-class="in"\n	ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>'
)}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n'
)}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n'
)}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache"
,function(a){a.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(
a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n</div>\n'
)}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" ></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put
("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n'
)}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'
),define("ui-bootstrap",function(){}),function(n,h,p){function E(a){var d=[];return s(d,h.noop).chars(a),d.join("")}function g(a){var d={};a=a.split(",");var c;for(c=0;c<a.length;c++)d[a[c]]=!0;return d}function F(a,d){function c(a,b,c,l){b=h.lowercase(b);if(t[b])for(;f.last()&&u[f.last()];)e("",f.last());v[b]&&f.last()==b&&e("",b),(l=w[b]||!!l)||f.push(b);var m={};c.replace(G,function(a,b,d,c,e){m[b]=r(d||c||e||"")}),d.start&&d.start(b,m,l)}function e(a,b){var c=0,e;if(b=h.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);if(0<=c){for(e=f.length-1;e>=c;e--)d.end&&d.end(f[e]);f.length=c}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var b,k,f=[],m=a,l;for(f.last=function(){return f[f.length-1]};a;){l="",k=!0;if(f.last()&&x[f.last()])a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){return b=b.replace(H,"$1").replace(I,"$1"),d.chars&&d.chars(r(b)),""}),e("",f.last());else{if(0===a.indexOf("<!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("-->",
b)===b&&(d.comment&&d.comment(a.substring(4,b)),a=a.substring(b+3),k=!1);else if(y.test(a)){if(b=a.match(y))a=a.replace(b[0],""),k=!1}else if(J.test(a)){if(b=a.match(z))a=a.substring(b[0].length),b[0].replace(z,e),k=!1}else K.test(a)&&((b=a.match(A))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(A,c)),k=!1):(l+="<",a=a.substring(1)));k&&(b=a.indexOf("<"),l+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),d.chars&&d.chars(r(l)))}if(a==m)throw L("badparse",a);m=a}e()}function r(a){if(!a)return"";var d=M.exec(a);a=d[1];var c=d[3];if(d=d[2])q.innerHTML=d.replace(/</g,"&lt;"),d="textContent"in q?q.textContent:q.innerText;return a+d+c}function B(a){return a.replace(/&/g,"&amp;").replace(N,function(a){var c=a.charCodeAt(0);return a=a.charCodeAt(1),"&#"+(1024*(c-55296)+(a-56320)+65536)+";"}).replace(O,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(a,d){var c=!1,e=h.bind(a,a.push);return{start:function(a,k,f){a=h.lowercase(a),!c&&x[a]&&(c=a),c||!0!==
C[a]||(e("<"),e(a),h.forEach(k,function(c,f){var k=h.lowercase(f),g="img"===a&&"src"===k||"background"===k;!0!==P[k]||!0===D[k]&&!d(c,g)||(e(" "),e(f),e('="'),e(B(c)),e('"'))}),e(f?"/>":">"))},end:function(a){a=h.lowercase(a),c||!0!==C[a]||(e("</"),e(a),e(">")),a==c&&(c=!1)},chars:function(a){c||e(B(a))}}}var L=h.$$minErr("$sanitize"),A=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,z=/^<\/\s*([\w:-]+)[^>]*>/,G=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,K=/^</,J=/^<\//,H=/\x3c!--(.*?)--\x3e/g,y=/<!DOCTYPE([^>]*?)>/i,I=/<!\[CDATA\[(.*?)]]\x3e/g,N=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,O=/([^\#-~| |!])/g,w=g("area,br,col,hr,img,wbr");n=g("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),p=g("rp,rt");var v=h.extend({},p,n),t=h.extend({},n,g("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"
)),u=h.extend({},p,g("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));n=g("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var x=g("script,style"),C=h.extend({},w,t,u,v,n),D=g("background,cite,href,longdesc,src,usemap,xlink:href");n=g("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),p=g("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"
);var P=h.extend({},D,p,n),q=document.createElement("pre"),M=/^(\s*)([\s\S]*?)(\s*)$/;h.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(d){var c=[];return F(d,s(c,function(c,b){return!/^unsafe/.test(a(c,b))})),c.join("")}}]}),h.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,c=/^mailto:/;return function(e,b){function k(a){a&&g.push(E(a))}function f(a,c){g.push("<a "),h.isDefined(b)&&g.push('target="',b,'" '),g.push('href="',a.replace(/"/g,"&quot;"),'">'),k(c),g.push("</a>")}if(!e)return e;for(var m,l=e,g=[],n,p;m=l.match(d);)n=m[0],m[2]||m[4]||(n=(m[3]?"http://":"mailto:")+n),p=m.index,k(l.substr(0,p)),f(n,m[0].replace(c,"")),l=l.substring(p+m[0].length);return k(l),a(g.join(""))}}])}(window,window.angular),define("ngSanitize",function(){}),function(y,v,z){function t(g,a,b){q.directive(g,["$parse","$swipe",function(l,n
){var r=75,h=.3,d=30;return function(p,m,k){function e(e){if(!u)return!1;var c=Math.abs(e.y-u.y);return e=(e.x-u.x)*a,f&&c<r&&0<e&&e>d&&c/e<h}var c=l(k[g]),u,f;n.bind(m,{start:function(e,c){u=e,f=!0},cancel:function(e){f=!1},end:function(a,f){e(a)&&p.$apply(function(){m.triggerHandler(b),c(p,{$event:f})})}})}}])}var q=v.module("ngTouch",[]);q.factory("$swipe",[function(){function g(a){var b=a.touches&&a.touches.length?a.touches:[a];return a=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0],{x:a.clientX,y:a.clientY}}return{bind:function(a,b){var l,n,r,h,d=!1;a.on("touchstart mousedown",function(a){r=g(a),d=!0,n=l=0,h=r,b.start&&b.start(r,a)}),a.on("touchcancel",function(a){d=!1,b.cancel&&b.cancel(a)}),a.on("touchmove mousemove",function(a){if(d&&r){var m=g(a);l+=Math.abs(m.x-h.x),n+=Math.abs(m.y-h.y),h=m,10>l&&10>n||(n>l?(d=!1,b.cancel&&b.cancel(a)):(a.preventDefault(),b.move&&b.move(m,a)))}
}),a.on("touchend mouseup",function(a){d&&(d=!1,b.end&&b.end(g(a),a))})}}}]),q.config(["$provide",function(g){g.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),q.directive("ngClick",["$parse","$timeout","$rootElement",function(g,a,b){function l(a,c,b){for(var f=0;f<a.length;f+=2)if(Math.abs(a[f]-c)<d&&Math.abs(a[f+1]-b)<d)return a.splice(f,f+2),!0;return!1}function n(a){if(!(Date.now()-m>h)){var c=a.touches&&a.touches.length?a.touches:[a],b=c[0].clientX,c=c[0].clientY;1>b&&1>c||l(k,b,c)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur())}}function r(b){b=b.touches&&b.touches.length?b.touches:[b];var c=b[0].clientX,d=b[0].clientY;k.push(c,d),a(function(){for(var a=0;a<k.length;a+=2)if(k[a]==c&&k[a+1]==d){k.splice(a,a+2);break}},h,!1)}var h=2500,d=25,p="ng-click-active",m,k;return function(a,c,d){function f(){q=!1,c.removeClass(p)}var h=g(d.ngClick),q=!1,s,t,w,x;c.on("touchstart",function(a){q=!0,s=a.target?a.target:a.srcElement,3==s.nodeType&&
(s=s.parentNode),c.addClass(p),t=Date.now(),a=a.touches&&a.touches.length?a.touches:[a],a=a[0].originalEvent||a[0],w=a.clientX,x=a.clientY}),c.on("touchmove",function(a){f()}),c.on("touchcancel",function(a){f()}),c.on("touchend",function(a){var h=Date.now()-t,e=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],g=e[0].originalEvent||e[0],e=g.clientX,g=g.clientY,p=Math.sqrt(Math.pow(e-w,2)+Math.pow(g-x,2));q&&750>h&&12>p&&(k||(b[0].addEventListener("click",n,!0),b[0].addEventListener("touchstart",r,!0),k=[]),m=Date.now(),l(k,e,g),s&&s.blur(),v.isDefined(d.disabled)&&!1!==d.disabled||c.triggerHandler("click",[a])),f()}),c.onclick=function(a){},c.on("click",function(b,c){a.$apply(function(){h(a,{$event:c||b})})}),c.on("mousedown",function(a){c.addClass(p)}),c.on("mousemove mouseup",function(a){c.removeClass(p)})}}]),t("ngSwipeLeft",-1,"swipeleft"),t("ngSwipeRight",1,"swiperight")}(window,window.angular),define("ngTouch",function(){}),angular
.module("angucomplete",[]).directive("angucomplete",function($parse,$http,$sce,$timeout){return{restrict:"EA",scope:{id:"@id",placeholder:"@placeholder",selectedObject:"=selectedobject",url:"@url",dataField:"@datafield",titleField:"@titlefield",descriptionField:"@descriptionfield",imageField:"@imagefield",imageUri:"@imageuri",inputClass:"@inputclass",userPause:"@pause",localData:"=localdata",searchFields:"@searchfields",minLengthUser:"@minlength",matchClass:"@matchclass"},template:'<div class="angucomplete-holder"><input id="{{id}}_value" ng-model="searchStr" type="text" placeholder="{{placeholder}}" class="{{inputClass}}" onmouseup="this.select();" ng-focus="resetHideResults()" ng-blur="hideResults()" /><div id="{{id}}_dropdown" class="angucomplete-dropdown" ng-if="showDropdown"><div class="angucomplete-searching" ng-show="searching">Searching...</div><div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)">No results found</div><div class="angucomplete-row" ng-repeat="result in results" ng-mousedown="selectResult(result)" ng-mouseover="hoverRow()" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}"><div ng-if="imageField" class="angucomplete-image-holder"><img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/><div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div></div><div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div><div class="angucomplete-title" ng-if="!matchClass">{{ result.title }}</div><div ng-if="result.description && result.description != \'\'" class="angucomplete-description">{{result.description}}</div></div></div></div>'
,link:function($scope,elem,attrs){$scope.lastSearchTerm=null,$scope.currentIndex=null,$scope.justChanged=!1,$scope.searchTimer=null,$scope.hideTimer=null,$scope.searching=!1,$scope.pause=500,$scope.minLength=3,$scope.searchStr=null,$scope.minLengthUser&&$scope.minLengthUser!=""&&($scope.minLength=$scope.minLengthUser),$scope.userPause&&($scope.pause=$scope.userPause),isNewSearchNeeded=function(newTerm,oldTerm){return newTerm.length>=$scope.minLength&&newTerm!=oldTerm},$scope.processResults=function(responseData,str){if(responseData&&responseData.length>0){$scope.results=[];var titleFields=[];$scope.titleField&&$scope.titleField!=""&&(titleFields=$scope.titleField.split(","));for(var i=0;i<responseData.length;i++){var titleCode=[];for(var t=0;t<titleFields.length;t++)titleCode.push(responseData[i][titleFields[t]]);var description="";$scope.descriptionField&&(description=responseData[i][$scope.descriptionField]);var imageUri="";$scope.imageUri&&(imageUri=$scope.imageUri);var image="";$scope
.imageField&&(image=imageUri+responseData[i][$scope.imageField]);var text=titleCode.join(" ");if($scope.matchClass){var re=new RegExp(str,"i"),strPart=text.match(re)[0];text=$sce.trustAsHtml(text.replace(re,'<span class="'+$scope.matchClass+'">'+strPart+"</span>"))}var resultRow={title:text,description:description,image:image,originalObject:responseData[i]};$scope.results[$scope.results.length]=resultRow}}else $scope.results=[]},$scope.searchTimerComplete=function(str){if(str.length>=$scope.minLength)if($scope.localData){var searchFields=$scope.searchFields.split(","),matches=[];for(var i=0;i<$scope.localData.length;i++){var match=!1;for(var s=0;s<searchFields.length;s++)match=match||typeof $scope.localData[i][searchFields[s]]=="string"&&typeof str=="string"&&$scope.localData[i][searchFields[s]].toLowerCase().indexOf(str.toLowerCase())>=0;match&&(matches[matches.length]=$scope.localData[i])}$scope.searching=!1,$scope.processResults(matches,str)}else $http.get($scope.url+str,{}).success(
function(responseData,status,headers,config){$scope.searching=!1,$scope.processResults($scope.dataField?responseData[$scope.dataField]:responseData,str)}).error(function(data,status,headers,config){console.log("error")})},$scope.hideResults=function(){$scope.hideTimer=$timeout(function(){$scope.showDropdown=!1},$scope.pause)},$scope.resetHideResults=function(){$scope.hideTimer&&$timeout.cancel($scope.hideTimer)},$scope.hoverRow=function(index){$scope.currentIndex=index},$scope.keyPressed=function(event){event.which!=38&&event.which!=40&&event.which!=13?!$scope.searchStr||$scope.searchStr==""?($scope.showDropdown=!1,$scope.lastSearchTerm=null):isNewSearchNeeded($scope.searchStr,$scope.lastSearchTerm)&&($scope.lastSearchTerm=$scope.searchStr,$scope.showDropdown=!0,$scope.currentIndex=-1,$scope.results=[],$scope.searchTimer&&$timeout.cancel($scope.searchTimer),$scope.searching=!0,$scope.searchTimer=$timeout(function(){$scope.searchTimerComplete($scope.searchStr)},$scope.pause)):event.preventDefault
()},$scope.selectResult=function(result){$scope.matchClass&&(result.title=result.title.toString().replace(/(<([^>]+)>)/ig,"")),$scope.searchStr=$scope.lastSearchTerm=result.title,$scope.selectedObject=result,$scope.showDropdown=!1,$scope.results=[]};var inputField=elem.find("input");inputField.on("keyup",$scope.keyPressed),elem.on("keyup",function(event){event.which===40?($scope.results&&$scope.currentIndex+1<$scope.results.length&&($scope.currentIndex++,$scope.$apply(),event.preventDefault,event.stopPropagation()),$scope.$apply()):event.which==38?$scope.currentIndex>=1&&($scope.currentIndex--,$scope.$apply(),event.preventDefault,event.stopPropagation()):event.which==13?$scope.results&&$scope.currentIndex>=0&&$scope.currentIndex<$scope.results.length?($scope.selectResult($scope.results[$scope.currentIndex]),$scope.$apply(),event.preventDefault,event.stopPropagation()):($scope.results=[],$scope.$apply(),event.preventDefault,event.stopPropagation()):event.which==27?($scope.results=[],$scope
.showDropdown=!1,$scope.$apply()):event.which==8&&($scope.selectedObject=null,$scope.$apply())})}}}),define("angucomplete",function(){});var qrcode=function(){var qrcode=function(typeNumber,errorCorrectLevel){var PAD0=236,PAD1=17,_typeNumber=typeNumber,_errorCorrectLevel=QRErrorCorrectLevel[errorCorrectLevel],_modules=null,_moduleCount=0,_dataCache=null,_dataList=new Array,_this={},makeImpl=function(test,maskPattern){_moduleCount=_typeNumber*4+17,_modules=function(moduleCount){var modules=new Array(moduleCount);for(var row=0;row<moduleCount;row+=1){modules[row]=new Array(moduleCount);for(var col=0;col<moduleCount;col+=1)modules[row][col]=null}return modules}(_moduleCount),setupPositionProbePattern(0,0),setupPositionProbePattern(_moduleCount-7,0),setupPositionProbePattern(0,_moduleCount-7),setupPositionAdjustPattern(),setupTimingPattern(),setupTypeInfo(test,maskPattern),_typeNumber>=7&&setupTypeNumber(test),_dataCache==null&&(_dataCache=createData(_typeNumber,_errorCorrectLevel,_dataList
)),mapData(_dataCache,maskPattern)},setupPositionProbePattern=function(row,col){for(var r=-1;r<=7;r+=1){if(row+r<=-1||_moduleCount<=row+r)continue;for(var c=-1;c<=7;c+=1){if(col+c<=-1||_moduleCount<=col+c)continue;0<=r&&r<=6&&(c==0||c==6)||0<=c&&c<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=c&&c<=4?_modules[row+r][col+c]=!0:_modules[row+r][col+c]=!1}}},getBestMaskPattern=function(){var minLostPoint=0,pattern=0;for(var i=0;i<8;i+=1){makeImpl(!0,i);var lostPoint=QRUtil.getLostPoint(_this);if(i==0||minLostPoint>lostPoint)minLostPoint=lostPoint,pattern=i}return pattern},setupTimingPattern=function(){for(var r=8;r<_moduleCount-8;r+=1){if(_modules[r][6]!=null)continue;_modules[r][6]=r%2==0}for(var c=8;c<_moduleCount-8;c+=1){if(_modules[6][c]!=null)continue;_modules[6][c]=c%2==0}},setupPositionAdjustPattern=function(){var pos=QRUtil.getPatternPosition(_typeNumber);for(var i=0;i<pos.length;i+=1)for(var j=0;j<pos.length;j+=1){var row=pos[i],col=pos[j];if(_modules[row][col]!=null)continue;for(var r=-2;r<=2;
r+=1)for(var c=-2;c<=2;c+=1)r==-2||r==2||c==-2||c==2||r==0&&c==0?_modules[row+r][col+c]=!0:_modules[row+r][col+c]=!1}},setupTypeNumber=function(test){var bits=QRUtil.getBCHTypeNumber(_typeNumber);for(var i=0;i<18;i+=1){var mod=!test&&(bits>>i&1)==1;_modules[Math.floor(i/3)][i%3+_moduleCount-8-3]=mod}for(var i=0;i<18;i+=1){var mod=!test&&(bits>>i&1)==1;_modules[i%3+_moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo=function(test,maskPattern){var data=_errorCorrectLevel<<3|maskPattern,bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i+=1){var mod=!test&&(bits>>i&1)==1;i<6?_modules[i][8]=mod:i<8?_modules[i+1][8]=mod:_modules[_moduleCount-15+i][8]=mod}for(var i=0;i<15;i+=1){var mod=!test&&(bits>>i&1)==1;i<8?_modules[8][_moduleCount-i-1]=mod:i<9?_modules[8][15-i-1+1]=mod:_modules[8][15-i-1]=mod}_modules[_moduleCount-8][8]=!test},mapData=function(data,maskPattern){var inc=-1,row=_moduleCount-1,bitIndex=7,byteIndex=0,maskFunc=QRUtil.getMaskFunction(maskPattern);for(var col=_moduleCount-1;
col>0;col-=2){col==6&&(col-=1);for(;;){for(var c=0;c<2;c+=1)if(_modules[row][col-c]==null){var dark=!1;byteIndex<data.length&&(dark=(data[byteIndex]>>>bitIndex&1)==1);var mask=maskFunc(row,col-c);mask&&(dark=!dark),_modules[row][col-c]=dark,bitIndex-=1,bitIndex==-1&&(byteIndex+=1,bitIndex=7)}row+=inc;if(row<0||_moduleCount<=row){row-=inc,inc=-inc;break}}}},createBytes=function(buffer,rsBlocks){var offset=0,maxDcCount=0,maxEcCount=0,dcdata=new Array(rsBlocks.length),ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r+=1){var dcCount=rsBlocks[r].dataCount,ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount),maxEcCount=Math.max(maxEcCount,ecCount),dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i+=1)dcdata[r][i]=255&buffer.getBuffer()[i+offset];offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount),rawPoly=qrPolynomial(dcdata[r],rsPoly.getLength()-1),modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0
;i<ecdata[r].length;i+=1){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=modIndex>=0?modPoly.getAt(modIndex):0}}var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i+=1)totalCodeCount+=rsBlocks[i].totalCount;var data=new Array(totalCodeCount),index=0;for(var i=0;i<maxDcCount;i+=1)for(var r=0;r<rsBlocks.length;r+=1)i<dcdata[r].length&&(data[index]=dcdata[r][i],index+=1);for(var i=0;i<maxEcCount;i+=1)for(var r=0;r<rsBlocks.length;r+=1)i<ecdata[r].length&&(data[index]=ecdata[r][i],index+=1);return data},createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel),buffer=qrBitBuffer();for(var i=0;i<dataList.length;i+=1){var data=dataList[i];buffer.put(data.getMode(),4),buffer.put(data.getLength(),QRUtil.getLengthInBits(data.getMode(),typeNumber)),data.write(buffer)}var totalDataCount=0;for(var i=0;i<rsBlocks.length;i+=1)totalDataCount+=rsBlocks[i].dataCount;if(buffer.getLengthInBits()>totalDataCount*8)throw new 
Error("code length overflow. ("+buffer.getLengthInBits()+">"+totalDataCount*8+")");buffer.getLengthInBits()+4<=totalDataCount*8&&buffer.put(0,4);while(buffer.getLengthInBits()%8!=0)buffer.putBit(!1);for(;;){if(buffer.getLengthInBits()>=totalDataCount*8)break;buffer.put(PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8)break;buffer.put(PAD1,8)}return createBytes(buffer,rsBlocks)};return _this.addData=function(data){var newData=qr8BitByte(data);_dataList.push(newData),_dataCache=null},_this.isDark=function(row,col){if(row<0||_moduleCount<=row||col<0||_moduleCount<=col)throw new Error(row+","+col);return _modules[row][col]},_this.getModuleCount=function(){return _moduleCount},_this.make=function(){makeImpl(!1,getBestMaskPattern())},_this.createTableTag=function(cellSize,margin){cellSize=cellSize||2,margin=typeof margin=="undefined"?cellSize*4:margin;var qrHtml="";qrHtml+='<table style="',qrHtml+=" border-width: 0px; border-style: none;",qrHtml+=" border-collapse: collapse;",qrHtml+=" padding: 0px; margin: "+
margin+"px;",qrHtml+='">',qrHtml+="<tbody>";for(var r=0;r<_this.getModuleCount();r+=1){qrHtml+="<tr>";for(var c=0;c<_this.getModuleCount();c+=1)qrHtml+='<td style="',qrHtml+=" border-width: 0px; border-style: none;",qrHtml+=" border-collapse: collapse;",qrHtml+=" padding: 0px; margin: 0px;",qrHtml+=" width: "+cellSize+"px;",qrHtml+=" height: "+cellSize+"px;",qrHtml+=" background-color: ",qrHtml+=_this.isDark(r,c)?"#000000":"#ffffff",qrHtml+=";",qrHtml+='"/>';qrHtml+="</tr>"}return qrHtml+="</tbody>",qrHtml+="</table>",qrHtml},_this.createImgTag=function(cellSize,margin){cellSize=cellSize||2,margin=typeof margin=="undefined"?cellSize*4:margin;var size=_this.getModuleCount()*cellSize+margin*2,min=margin,max=size-margin;return createImgTag(size,size,function(x,y){if(min<=x&&x<max&&min<=y&&y<max){var c=Math.floor((x-min)/cellSize),r=Math.floor((y-min)/cellSize);return _this.isDark(r,c)?0:1}return 1})},_this};qrcode.stringToBytes=function(s){var bytes=new Array;for(var i=0;i<s.length;i+=1){var c=
s.charCodeAt(i);bytes.push(c&255)}return bytes},qrcode.createStringToBytes=function(unicodeData,numChars){var unicodeMap=function(){var bin=base64DecodeInputStream(unicodeData),read=function(){var b=bin.read();if(b==-1)throw new Error;return b},count=0,unicodeMap={};for(;;){var b0=bin.read();if(b0==-1)break;var b1=read(),b2=read(),b3=read(),k=String.fromCharCode(b0<<8|b1),v=b2<<8|b3;unicodeMap[k]=v,count+=1}if(count!=numChars)throw new Error(count+" != "+numChars);return unicodeMap}(),unknownChar="?".charCodeAt(0);return function(s){var bytes=new Array;for(var i=0;i<s.length;i+=1){var c=s.charCodeAt(i);if(c<128)bytes.push(c);else{var b=unicodeMap[s.charAt(i)];typeof b=="number"?(b&255)==b?bytes.push(b):(bytes.push(b>>>8),bytes.push(b&255)):bytes.push(unknownChar)}}return bytes}};var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110
:6,PATTERN111:7},QRUtil=function(){var PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15=1335,G18=7973,G15_MASK=21522,_this={},getBCHDigit=function(data){var digit=0;while(data!=0)digit+=1,data>>>=1;return digit};return _this.getBCHTypeInfo=function(data){var d=data<<10;while(getBCHDigit(d)-getBCHDigit(G15)>=0)d^=G15<<getBCHDigit(d)-getBCHDigit(G15);return(data<<10|d)^G15_MASK},_this.getBCHTypeNumber=function(
data){var d=data<<12;while(getBCHDigit(d)-getBCHDigit(G18)>=0)d^=G18<<getBCHDigit(d)-getBCHDigit(G18);return data<<12|d},_this.getPatternPosition=function(typeNumber){return PATTERN_POSITION_TABLE[typeNumber-1]},_this.getMaskFunction=function(maskPattern){switch(maskPattern){case QRMaskPattern.PATTERN000:return function(i,j){return(i+j)%2==0};case QRMaskPattern.PATTERN001:return function(i,j){return i%2==0};case QRMaskPattern.PATTERN010:return function(i,j){return j%3==0};case QRMaskPattern.PATTERN011:return function(i,j){return(i+j)%3==0};case QRMaskPattern.PATTERN100:return function(i,j){return(Math.floor(i/2)+Math.floor(j/3))%2==0};case QRMaskPattern.PATTERN101:return function(i,j){return i*j%2+i*j%3==0};case QRMaskPattern.PATTERN110:return function(i,j){return(i*j%2+i*j%3)%2==0};case QRMaskPattern.PATTERN111:return function(i,j){return(i*j%3+(i+j)%2)%2==0};default:throw new Error("bad maskPattern:"+maskPattern)}},_this.getErrorCorrectPolynomial=function(errorCorrectLength){var a=qrPolynomial
([1],0);for(var i=0;i<errorCorrectLength;i+=1)a=a.multiply(qrPolynomial([1,QRMath.gexp(i)],0));return a},_this.getLengthInBits=function(mode,type){if(1<=type&&type<10)switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}else if(type<27)switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}else{if(!(type<41))throw new Error("type:"+type);switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}},_this.getLostPoint=function(qrcode){var moduleCount=qrcode.getModuleCount(),lostPoint=0;for(var row=0;row<moduleCount;row+=1)for(var col=0;col<moduleCount;col+=1){var sameCount=0,dark=qrcode.isDark
(row,col);for(var r=-1;r<=1;r+=1){if(row+r<0||moduleCount<=row+r)continue;for(var c=-1;c<=1;c+=1){if(col+c<0||moduleCount<=col+c)continue;if(r==0&&c==0)continue;dark==qrcode.isDark(row+r,col+c)&&(sameCount+=1)}}sameCount>5&&(lostPoint+=3+sameCount-5)}for(var row=0;row<moduleCount-1;row+=1)for(var col=0;col<moduleCount-1;col+=1){var count=0;qrcode.isDark(row,col)&&(count+=1),qrcode.isDark(row+1,col)&&(count+=1),qrcode.isDark(row,col+1)&&(count+=1),qrcode.isDark(row+1,col+1)&&(count+=1);if(count==0||count==4)lostPoint+=3}for(var row=0;row<moduleCount;row+=1)for(var col=0;col<moduleCount-6;col+=1)qrcode.isDark(row,col)&&!qrcode.isDark(row,col+1)&&qrcode.isDark(row,col+2)&&qrcode.isDark(row,col+3)&&qrcode.isDark(row,col+4)&&!qrcode.isDark(row,col+5)&&qrcode.isDark(row,col+6)&&(lostPoint+=40);for(var col=0;col<moduleCount;col+=1)for(var row=0;row<moduleCount-6;row+=1)qrcode.isDark(row,col)&&!qrcode.isDark(row+1,col)&&qrcode.isDark(row+2,col)&&qrcode.isDark(row+3,col)&&qrcode.isDark(row+4,col
)&&!qrcode.isDark(row+5,col)&&qrcode.isDark(row+6,col)&&(lostPoint+=40);var darkCount=0;for(var col=0;col<moduleCount;col+=1)for(var row=0;row<moduleCount;row+=1)qrcode.isDark(row,col)&&(darkCount+=1);var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;return lostPoint+=ratio*10,lostPoint},_this}(),QRMath=function(){var EXP_TABLE=new Array(256),LOG_TABLE=new Array(256);for(var i=0;i<8;i+=1)EXP_TABLE[i]=1<<i;for(var i=8;i<256;i+=1)EXP_TABLE[i]=EXP_TABLE[i-4]^EXP_TABLE[i-5]^EXP_TABLE[i-6]^EXP_TABLE[i-8];for(var i=0;i<255;i+=1)LOG_TABLE[EXP_TABLE[i]]=i;var _this={};return _this.glog=function(n){if(n<1)throw new Error("glog("+n+")");return LOG_TABLE[n]},_this.gexp=function(n){while(n<0)n+=255;while(n>=256)n-=255;return EXP_TABLE[n]},_this}();function qrPolynomial(num,shift){if(typeof num.length=="undefined")throw new Error(num.length+"/"+shift);var _num=function(){var offset=0;while(offset<num.length&&num[offset]==0)offset+=1;var _num=new Array(num.length-offset+shift);for(var i=0
;i<num.length-offset;i+=1)_num[i]=num[i+offset];return _num}(),_this={};return _this.getAt=function(index){return _num[index]},_this.getLength=function(){return _num.length},_this.multiply=function(e){var num=new Array(_this.getLength()+e.getLength()-1);for(var i=0;i<_this.getLength();i+=1)for(var j=0;j<e.getLength();j+=1)num[i+j]^=QRMath.gexp(QRMath.glog(_this.getAt(i))+QRMath.glog(e.getAt(j)));return qrPolynomial(num,0)},_this.mod=function(e){if(_this.getLength()-e.getLength()<0)return _this;var ratio=QRMath.glog(_this.getAt(0))-QRMath.glog(e.getAt(0)),num=new Array(_this.getLength());for(var i=0;i<_this.getLength();i+=1)num[i]=_this.getAt(i);for(var i=0;i<e.getLength();i+=1)num[i]^=QRMath.gexp(QRMath.glog(e.getAt(i))+ratio);return qrPolynomial(num,0).mod(e)},_this}var QRRSBlock=function(){var RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43
],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],qrRSBlock=function(totalCount,dataCount){var _this={};return _this.totalCount=totalCount,_this.dataCount=dataCount,_this},_this={},getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined}};return _this.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=getRsBlockTable(typeNumber,errorCorrectLevel);if(typeof rsBlock=="undefined"
)throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);var length=rsBlock.length/3,list=new Array;for(var i=0;i<length;i+=1){var count=rsBlock[i*3+0],totalCount=rsBlock[i*3+1],dataCount=rsBlock[i*3+2];for(var j=0;j<count;j+=1)list.push(qrRSBlock(totalCount,dataCount))}return list},_this}(),qrBitBuffer=function(){var _buffer=new Array,_length=0,_this={};return _this.getBuffer=function(){return _buffer},_this.getAt=function(index){var bufIndex=Math.floor(index/8);return(_buffer[bufIndex]>>>7-index%8&1)==1},_this.put=function(num,length){for(var i=0;i<length;i+=1)_this.putBit((num>>>length-i-1&1)==1)},_this.getLengthInBits=function(){return _length},_this.putBit=function(bit){var bufIndex=Math.floor(_length/8);_buffer.length<=bufIndex&&_buffer.push(0),bit&&(_buffer[bufIndex]|=128>>>_length%8),_length+=1},_this},qr8BitByte=function(data){var _mode=QRMode.MODE_8BIT_BYTE,_data=data,_bytes=qrcode.stringToBytes(data),_this={};return _this.getMode=function(
){return _mode},_this.getLength=function(buffer){return _bytes.length},_this.write=function(buffer){for(var i=0;i<_bytes.length;i+=1)buffer.put(_bytes[i],8)},_this},byteArrayOutputStream=function(){var _bytes=new Array,_this={};return _this.writeByte=function(b){_bytes.push(b&255)},_this.writeShort=function(i){_this.writeByte(i),_this.writeByte(i>>>8)},_this.writeBytes=function(b,off,len){off=off||0,len=len||b.length;for(var i=0;i<len;i+=1)_this.writeByte(b[i+off])},_this.writeString=function(s){for(var i=0;i<s.length;i+=1)_this.writeByte(s.charCodeAt(i))},_this.toByteArray=function(){return _bytes},_this.toString=function(){var s="";s+="[";for(var i=0;i<_bytes.length;i+=1)i>0&&(s+=","),s+=_bytes[i];return s+="]",s},_this},base64EncodeOutputStream=function(){var _buffer=0,_buflen=0,_length=0,_base64="",_this={},writeEncoded=function(b){_base64+=String.fromCharCode(encode(b&63))},encode=function(n){if(!(n<0)){if(n<26)return 65+n;if(n<52)return 97+(n-26);if(n<62)return 48+(n-52);if(n==62)
return 43;if(n==63)return 47}throw new Error("n:"+n)};return _this.writeByte=function(n){_buffer=_buffer<<8|n&255,_buflen+=8,_length+=1;while(_buflen>=6)writeEncoded(_buffer>>>_buflen-6),_buflen-=6},_this.flush=function(){_buflen>0&&(writeEncoded(_buffer<<6-_buflen),_buffer=0,_buflen=0);if(_length%3!=0){var padlen=3-_length%3;for(var i=0;i<padlen;i+=1)_base64+="="}},_this.toString=function(){return _base64},_this},base64DecodeInputStream=function(str){var _str=str,_pos=0,_buffer=0,_buflen=0,_this={};_this.read=function(){while(_buflen<8){if(_pos>=_str.length){if(_buflen==0)return-1;throw new Error("unexpected end of file./"+_buflen)}var c=_str.charAt(_pos);_pos+=1;if(c=="=")return _buflen=0,-1;if(c.match(/^\s$/))continue;_buffer=_buffer<<6|decode(c.charCodeAt(0)),_buflen+=6}var n=_buffer>>>_buflen-8&255;return _buflen-=8,n};var decode=function(c){if(65<=c&&c<=90)return c-65;if(97<=c&&c<=122)return c-97+26;if(48<=c&&c<=57)return c-48+52;if(c==43)return 62;if(c==47)return 63;throw new Error
("c:"+c)};return _this},gifImage=function(width,height){var _width=width,_height=height,_data=new Array(width*height),_this={};_this.setPixel=function(x,y,pixel){_data[y*_width+x]=pixel},_this.write=function(out){out.writeString("GIF87a"),out.writeShort(_width),out.writeShort(_height),out.writeByte(128),out.writeByte(0),out.writeByte(0),out.writeByte(0),out.writeByte(0),out.writeByte(0),out.writeByte(255),out.writeByte(255),out.writeByte(255),out.writeString(","),out.writeShort(0),out.writeShort(0),out.writeShort(_width),out.writeShort(_height),out.writeByte(0);var lzwMinCodeSize=2,raster=getLZWRaster(lzwMinCodeSize);out.writeByte(lzwMinCodeSize);var offset=0;while(raster.length-offset>255)out.writeByte(255),out.writeBytes(raster,offset,255),offset+=255;out.writeByte(raster.length-offset),out.writeBytes(raster,offset,raster.length-offset),out.writeByte(0),out.writeString(";")};var bitOutputStream=function(out){var _out=out,_bitLength=0,_bitBuffer=0,_this={};return _this.write=function(data
,length){if(data>>>length!=0)throw new Error("length over");while(_bitLength+length>=8)_out.writeByte(255&(data<<_bitLength|_bitBuffer)),length-=8-_bitLength,data>>>=8-_bitLength,_bitBuffer=0,_bitLength=0;_bitBuffer=data<<_bitLength|_bitBuffer,_bitLength+=length},_this.flush=function(){_bitLength>0&&_out.writeByte(_bitBuffer)},_this},getLZWRaster=function(lzwMinCodeSize){var clearCode=1<<lzwMinCodeSize,endCode=(1<<lzwMinCodeSize)+1,bitLength=lzwMinCodeSize+1,table=lzwTable();for(var i=0;i<clearCode;i+=1)table.add(String.fromCharCode(i));table.add(String.fromCharCode(clearCode)),table.add(String.fromCharCode(endCode));var byteOut=byteArrayOutputStream(),bitOut=bitOutputStream(byteOut);bitOut.write(clearCode,bitLength);var dataIndex=0,s=String.fromCharCode(_data[dataIndex]);dataIndex+=1;while(dataIndex<_data.length){var c=String.fromCharCode(_data[dataIndex]);dataIndex+=1,table.contains(s+c)?s+=c:(bitOut.write(table.indexOf(s),bitLength),table.size()<4095&&(table.size()==1<<bitLength&&(bitLength+=1
),table.add(s+c)),s=c)}return bitOut.write(table.indexOf(s),bitLength),bitOut.write(endCode,bitLength),bitOut.flush(),byteOut.toByteArray()},lzwTable=function(){var _map={},_size=0,_this={};return _this.add=function(key){if(_this.contains(key))throw new Error("dup key:"+key);_map[key]=_size,_size+=1},_this.size=function(){return _size},_this.indexOf=function(key){return _map[key]},_this.contains=function(key){return typeof _map[key]!="undefined"},_this};return _this},createImgTag=function(width,height,getPixel,alt){var gif=gifImage(width,height);for(var y=0;y<height;y+=1)for(var x=0;x<width;x+=1)gif.setPixel(x,y,getPixel(x,y));var b=byteArrayOutputStream();gif.write(b);var base64=base64EncodeOutputStream(),bytes=b.toByteArray();for(var i=0;i<bytes.length;i+=1)base64.writeByte(bytes[i]);base64.flush();var img="";return img+="<img",img+=' src="',img+="data:image/gif;base64,",img+=base64,img+='"',img+=' width="',img+=width,img+='"',img+=' height="',img+=height,img+='"',alt&&(img+=' alt="',
img+=alt,img+='"'),img+="/>",img};return qrcode}();define("qrcode",function(){}),!function(qrcode){qrcode.stringToBytes=function(s){function toUTF8Array(str){var utf8=[];for(var i=0;i<str.length;i++){var charcode=str.charCodeAt(i);charcode<128?utf8.push(charcode):charcode<2048?utf8.push(192|charcode>>6,128|charcode&63):charcode<55296||charcode>=57344?utf8.push(224|charcode>>12,128|charcode>>6&63,128|charcode&63):(i++,charcode=65536+((charcode&1023)<<10|str.charCodeAt(i)&1023),utf8.push(240|charcode>>18,128|charcode>>12&63,128|charcode>>6&63,128|charcode&63))}return utf8}return toUTF8Array(s)}}(qrcode),define("qrcode_UTF8",function(){}),angular.module("monospaced.qrcode",[]).directive("qrcode",["$window",function($window){var canvas2D=!!$window.CanvasRenderingContext2D,levels={L:"Low",M:"Medium",Q:"Quartile",H:"High"},draw=function(context,qr,modules,tile){for(var row=0;row<modules;row++)for(var col=0;col<modules;col++){var w=Math.ceil((col+1)*tile)-Math.floor(col*tile),h=Math.ceil((row+1
)*tile)-Math.floor(row*tile);context.fillStyle=qr.isDark(row,col)?"#000":"#fff",context.fillRect(Math.round(col*tile),Math.round(row*tile),w,h)}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(scope,element,attrs){var domElement=element[0],$canvas=element.find("canvas"),canvas=$canvas[0],context=canvas2D?canvas.getContext("2d"):null,download="download"in attrs,href=attrs.href,link=download||href?document.createElement("a"):"",trim=/^\s+|\s+$/g,error,version,errorCorrectionLevel,data,size,modules,tile,qr,$img,setVersion=function(value){version=Math.max(1,Math.min(parseInt(value,10),10))||4},setErrorCorrectionLevel=function(value){errorCorrectionLevel=value in levels?value:"M"},setData=function(value){if(!value)return;data=value.replace(trim,""),qr=qrcode(version,errorCorrectionLevel),qr.addData(data);try{qr.make()}catch(e){error=e.message;return}error=!1,modules=qr.getModuleCount()},setSize=function(value){size=parseInt(value,10)||modules*2,tile=size/modules
,canvas.width=canvas.height=size},render=function(){if(!qr)return;if(error){link&&(link.removeAttribute("download"),link.title="",link.href="#_"),canvas2D||(domElement.innerHTML='<img src width="'+size+'"'+'height="'+size+'"'+'class="qrcode">'),scope.$emit("qrcode:error",error);return}download&&(domElement.download="qrcode.png",domElement.title="Download QR code");if(canvas2D){draw(context,qr,modules,tile);if(download){domElement.href=canvas.toDataURL("image/png");return}}else{domElement.innerHTML=qr.createImgTag(tile,0),$img=element.find("img"),$img.addClass("qrcode");if(download){domElement.href=$img[0].src;return}}href&&(domElement.href=href)};link&&(link.className="qrcode-link",$canvas.wrap(link),domElement=link),setVersion(attrs.version),setErrorCorrectionLevel(attrs.errorCorrectionLevel),setSize(attrs.size),attrs.$observe("version",function(value){if(!value)return;setVersion(value),setData(data),setSize(size),render()}),attrs.$observe("errorCorrectionLevel",function(value){if(!value
)return;setErrorCorrectionLevel(value),setData(data),setSize(size),render()}),attrs.$observe("data",function(value){if(!value)return;setData(value),setSize(size),render()}),attrs.$observe("size",function(value){if(!value)return;setSize(value),render()}),attrs.$observe("href",function(value){if(!value)return;href=value,render()})}}}]),define("angular-qrcode",function(){}),angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function($document){function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}return function(){function cookieFun(key,value,options){var cookies,list,i,cookie,pos,name,hasCookies,all,expiresFor;options=options||{};var dec=options.decode||tryDecodeURIComponent,enc=options.encode||encodeURIComponent;if(value!==undefined)return value=typeof value=="object"?JSON.stringify(value):String(value),typeof options.expires=="number"&&(expiresFor=options.expires,options.expires=new Date,expiresFor===-1?
options.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):options.expirationUnit!==undefined?options.expirationUnit==="hours"?options.expires.setHours(options.expires.getHours()+expiresFor):options.expirationUnit==="minutes"?options.expires.setMinutes(options.expires.getMinutes()+expiresFor):options.expirationUnit==="seconds"?options.expires.setSeconds(options.expires.getSeconds()+expiresFor):options.expirationUnit==="milliseconds"?options.expires.setMilliseconds(options.expires.getMilliseconds()+expiresFor):options.expires.setDate(options.expires.getDate()+expiresFor):options.expires.setDate(options.expires.getDate()+expiresFor)),$document[0].cookie=[enc(key),"=",enc(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("");list=[],all=$document[0].cookie,all&&(list=all.split("; ")),cookies={},hasCookies=!1;for(i=0;i<list.length;++i)if(list[i]){cookie=list
[i],pos=cookie.indexOf("="),name=cookie.substring(0,pos),value=dec(cookie.substring(pos+1));if(angular.isUndefined(value))continue;if(key===undefined||key===name){try{typeof value=="object"&&Object.prototype.toString.call(value).toLowerCase()=="[object object]"&&!value.length?cookies[name]=JSON.parse(value):cookies[name]=value}catch(e){cookies[name]=value}if(key===name)return cookies[name];hasCookies=!0}}if(hasCookies&&key===undefined)return cookies}return cookieFun.remove=function(key,options){var hasCookie=cookieFun(key)!==undefined;return hasCookie&&(options||(options={}),options.expires=-1,cookieFun(key,"",options)),hasCookie},cookieFun}()}]),define("ipCookie",function(){}),!function(e,i,n){i.module("carouselar.constants",[]).constant("CarouselarConstants",{RESIZE_TIMEOUT:300,MAX_DISPLAYING_IMAGE:1,BREAKPOINTS:{LANDSCAPE:960,PORTRAIT:640}})}(window,window.angular),function(e,i,n){i.module("carouselar.controllers",["carouselar.constants"]).controller("CarouselarController",["$scope","$timeout"
,"$window","CarouselarConstants","$http","$cookieStore","config",function(e,i,n,t,o,a,s){e.visibleImages=[],e.maxImageCount=1,e.displayingImageCount=1;var c=!1;e.activeSection=0,e.sectionCount=e.items.length,e.containerPosition="translateX(0)",e.singleImageWidth="100%",e.movingFlag=!1,e.$watch("items.length",function(i){i&&(clearInterval(e.intv),e.sectionCount=e.items.length,e.moveToSection(e.activeSection),e.singleImageWidth="100%")}),e.$watch("interval",function(i){i&&(clearInterval(e.intv),e.intv=setInterval(e.next1,1e3*e.interval))}),e.createArray=function(e){return new Array(e||0)},e.toDetail=function(e){"0"!=e.type&&"2"!=e.type||null!=e.link&&""!=e.link?"0"!=e.type&&"2"!=e.type||null==e.link||""==e.link?null!=e.link&&""!=e.link?n.open(e.link):"1"==e.type?n.open("indexProject.html#/projectDetail/"+e.relCode):"3"==e.type?n.open("activity/ActivityInfo/Detail?code="+e.relCode+"&source=1"):"4"==e.type&&n.open("demand/detail.html?code="+e.relCode+"&enterpriseCode="+e.enterpriseCode):n.open
(e.link):n.open("index.html#!/details/"+e.enterpriseCode+"/"+e.relCode);var i={};i.userCode=portal.user.userCode,i.relatedCode=e.code,i.readTime=e.code,i.relatedType=9,i.optype=3,o({url:s.baseUrl+"/behav/addBehva?__ajax=true",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:i,cache:!1})},e.prev=function(n){0===e.activeSection?(e.movingFlag=!0,e.activeSection=e.items.length,e.moveToSection(e.activeSection,n),i(function(){e.moveToSection(e.activeSection-1,n),e.movingFlag=!1},10)):e.moveToSection(e.activeSection-1,n)},e.next=function(n){null!=e.items&&""!=e.items&&(e.activeSection===e.items.length?(e.movingFlag=!0,e.activeSection=0,e.moveToSection(e.activeSection,n),i(function(){e.moveToSection(e.activeSection+1,n),e.movingFlag=!1},10)):e.moveToSection(e.activeSection+1,n))},e.next1=function(){null!=e.items&&""!=e.items&&1!==e.items.length&&(e.activeSection===e.items.length?(e.movingFlag=!0,e.activeSection=0,e.moveToSection(e.activeSection,0),e.$digest(),i(function(
){e.moveToSection(e.activeSection+1,0),e.movingFlag=!1},200)):(e.moveToSection(e.activeSection+1,0),!e.$$phase&&c&&e.$digest()))},e.moveToSection=function(i,n){e.intv&&(clearInterval(e.intv),c=!0,e.intv=setInterval(e.next1,1e3*e.interval)),i>e.sectionCount?e.activeSection=0:i<0?e.activeSection=e.sectionCount:e.activeSection=i;var t,o,a=100/e.displayingImageCount,s=[];if(e.activeSection>e.sectionCount)for(t=(e.items.length-e.displayingImageCount)*a,o=0;o<e.displayingImageCount+1;o++)s.push(e.items.length-o);else{var r=e.activeSection*e.displayingImageCount;for(s.push(r),o=1;o<e.displayingImageCount;o++)s.push(r+o);t=r*a}e.containerPosition="translateX(-"+t+"%)",e.visibleImages=s,c=!0},e.resizeTimer=null,e.onResize=function(o,a){i.cancel(e.resizeTimer),e.resizeTimer=i(function(){var i=e.maxImageCount,o=a||n.innerWidth;o<t.BREAKPOINTS.LANDSCAPE&&(i=Math.ceil(e.maxImageCount/2),o<t.BREAKPOINTS.PORTRAIT&&(i=1)),e.displayingImageCount=i},t.RESIZE_TIMEOUT)},e.$watch("displayingImageCount",function(
i){i&&(e.sectionCount=Math.ceil(e.items.length/e.displayingImageCount),e.moveToSection(e.activeSection),e.singleImageWidth=100/i+"%")}),e.isImageVisible=function(i){return e.visibleImages.indexOf(i)>-1}}]).controller("CarouselarImageController",["$scope",function(e){e.isLoading=!0,e.onLoad=function(){e.isLoading=!1,e.$apply()};var i=e.$watch("isVisible",function(n){n&&(e.compileImage(),i())})}])}(window,window.angular),function(e,i,n){i.module("carouselar.directives",["carouselar.controllers","carouselar.constants"]).directive("carouselar",["$window","CarouselarConstants",function(e,n){return{replace:!0,restrict:"E",scope:{items:"=",interval:"="},controller:"CarouselarController",template:'<div class="carouselar" ng-show="items.length>0"><div class="carouselar__container"><div ng-class="{\'carouselar__inner-container\':!movingFlag,\'carouselar__inner-container-nomove\':movingFlag}" ng-style="{\'transform\': containerPosition }"><div class="carouselar__image-container" ng-style="{\'width\': singleImageWidth}" ng-repeat="item in items" is-visible="isImageVisible($index)" img-url="{{item.imgUrl}}" text="{{item.imgText}}"ng-click="toDetail(item)"carouselar-image></div><div class="carouselar__image-container" ng-style="{\'width\': singleImageWidth}" is-visible="isImageVisible(0)" img-url="{{items[0].imgUrl}}" text="{{items[0].imgText}}"ng-click="toDetail(items[0])"carouselar-image></div></div><span class="carouselar__navigation__button carouselar__navigation__button--prev" ng-if="items.length>1" ng-click="prev(1)"><img src="images/2_031.png"></span><div class="dianClass" style="background-image: url(images/heipian.png ); width: 100%;height: 40px;"><div style="padding-right: 20px; "><span class="dianClassSpan dianClassSpan--index"ng-repeat="i in createArray(sectionCount) track by $index" ng-class="{\'dianClassSpan--active\':$index == activeSection||($index==0&&activeSection==items.length)}"ng-click="moveToSection($index,1)"><span class="aa"></span></span></div></div><span class="carouselar__navigation__button carouselar__navigation__button--next" ng-if="items.length>1" ng-click="next(1)"><img src="images/2_05.png"></span></div>'
,link:function(t,o,a){t.intv={},t.maxImageCount=Math.min(parseInt(a.displayingImageCount),n.MAX_DISPLAYING_IMAGE)||1;var s=i.element(e);s.bind("resize",t.onResize),t.onResize(),t.$on("$destroy",function(){s.unbind("resize",t.onResize)})}}}]).directive("carouselarImage",["$compile",function(e){return{restrict:"A",controller:"CarouselarImageController",scope:{isVisible:"=",imgUrl:"@",text:"@"},template:'<div class="carouselar__loader" ng-if="isLoading"></div>',link:function(i,n){i.compileImage=function(){n.append('<img class="carouselar__image" carouselar-loader on-load="onLoad()" ng-src="{{imgUrl}}" /><span style="display: inline-block;position: absolute;bottom: 0px;margin-bottom: 20px;margin-left: 20px;font-size: 20px;color: #fff;">{{text | cut:true:20}}</span>'),e(n.contents())(i)}}}}]).directive("carouselarLoader",[function(){return{restrict:"A",scope:{onLoad:"&"},link:function(e,i){i.bind("load",e.onLoad)}}}])}(window,window.angular),function(e,i,n){i.module("carouselar",["carouselar.controllers"
,"carouselar.directives","carouselar.constants"])}(window,window.angular),define("carouselar",function(){}),window.XMLHttpRequest&&(!window.FileAPI||!FileAPI.shouldLoad)&&(window.XMLHttpRequest.prototype.setRequestHeader=function(orig){return function(header,value){if(header==="__setXHR_"){var val=value(this);val instanceof Function&&val(this)}else orig.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="10.0.2",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function($http,$q,$timeout){var upload=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var resumeSupported=this.isResumeSupported();function sendHttp(config){config.method=config.method||"POST",config.headers=config.headers||{};var deferred=config._deferred=config._deferred||$q.defer(),promise=deferred.promise;function notifyProgress(e){deferred.notify&&deferred.notify(e),
promise.progressFunc&&$timeout(function(){promise.progressFunc(e)})}function getNotifyEvent(n){return config._start!=null&&resumeSupported?{loaded:n.loaded+config._start,total:config._file.size,type:n.type,config:config,lengthComputable:!0,target:n.target}:n}config.disableProgress||(config.headers.__setXHR_=function(){return function(xhr){if(!xhr||!(xhr instanceof XMLHttpRequest))return;config.__XHR=xhr,config.xhrFn&&config.xhrFn(xhr),xhr.upload.addEventListener("progress",function(e){e.config=config,notifyProgress(getNotifyEvent(e))},!1),xhr.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=config,notifyProgress(getNotifyEvent(e)))},!1)}});function uploadWithAngular(){$http(config).then(function(r){resumeSupported&&config._chunkSize&&!config._finished?(notifyProgress({loaded:config._end,total:config._file.size,config:config,type:"progress"}),upload.upload(config)):(config._finished&&delete config._finished,deferred.resolve(r))},function(e){deferred.reject(e)},function(
n){deferred.notify(n)})}return resumeSupported?config._chunkSize&&config._end&&!config._finished?(config._start=config._end,config._end+=config._chunkSize,uploadWithAngular()):config.resumeSizeUrl?$http.get(config.resumeSizeUrl).then(function(resp){config.resumeSizeResponseReader?config._start=config.resumeSizeResponseReader(resp.data):config._start=parseInt((resp.data.size==null?resp.data:resp.data.size).toString()),config._chunkSize&&(config._end=config._start+config._chunkSize),uploadWithAngular()},function(e){throw e}):config.resumeSize?config.resumeSize().then(function(size){config._start=size,uploadWithAngular()},function(e){throw e}):uploadWithAngular():uploadWithAngular(),promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.progress=function(fn){return promise
.progressFunc=fn,promise.then(null,null,function(n){fn(n)}),promise},promise.abort=promise.pause=function(){return config.__XHR&&$timeout(function(){config.__XHR.abort()}),promise},promise.xhr=function(fn){return config.xhrFn=function(origXhrFn){return function(){origXhrFn&&origXhrFn.apply(promise,arguments),fn.apply(promise,arguments)}}(config.xhrFn),promise},promise}this.rename=function(file,name){return file.ngfName=name,file},this.jsonBlob=function(val){val!=null&&!angular.isString(val)&&(val=JSON.stringify(val));var blob=new Blob([val],{type:"application/json"});return blob._ngfBlob=!0,blob},this.json=function(val){return angular.toJson(val)},this.upload=function(config){function isFile(file){return file!=null&&(file instanceof Blob||file.flashId&&file.name&&file.size)}function toResumeFile(file,formData){if(file._ngfBlob)return file;config._file=config._file||file;if(config._start!=null&&resumeSupported){config._end&&config._end>=file.size&&(config._finished=!0,config._end=file.size
);var slice=file.slice(config._start,config._end||file.size);return slice.name=file.name,slice.ngfName=file.ngfName,config._chunkSize&&(formData.append("_chunkSize",config._end-config._start),formData.append("_chunkNumber",Math.floor(config._start/config._chunkSize)),formData.append("_totalSize",config._file.size)),slice}return file}function addFieldToFormData(formData,val,key){if(val!==undefined){angular.isDate(val)&&(val=val.toISOString());if(angular.isString(val))formData.append(key,val);else if(isFile(val)){var file=toResumeFile(val,formData),split=key.split(",");split[1]&&(file.ngfName=split[1].replace(/^\s+|\s+$/g,""),key=split[0]),config._fileKey=config._fileKey||key,formData.append(key,file,file.ngfName||file.name)}else if(angular.isObject(val)){if(val.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+key;val.$$ngfCircularDetection=!0;try{for(var k in val)if(val.hasOwnProperty(k
)&&k!=="$$ngfCircularDetection"){var objectKey=config.objectKey==null?"[i]":config.objectKey;val.length&&parseInt(k)>-1&&(objectKey=config.arrayKey==null?objectKey:config.arrayKey),addFieldToFormData(formData,val[k],key+objectKey.replace(/[ik]/g,k))}}finally{delete val.$$ngfCircularDetection}}else formData.append(key,val)}}function digestConfig(){config._chunkSize=upload.translateScalars(config.resumeChunkSize),config._chunkSize=config._chunkSize?parseInt(config._chunkSize.toString()):null,config.headers=config.headers||{},config.headers["Content-Type"]=undefined,config.transformRequest=config.transformRequest?angular.isArray(config.transformRequest)?config.transformRequest:[config.transformRequest]:[],config.transformRequest.push(function(data){var formData=new FormData,key;data=data||config.fields||{},config.file&&(data.file=config.file);for(key in data)if(data.hasOwnProperty(key)){var val=data[key];config.formDataAppender?config.formDataAppender(formData,key,val):addFieldToFormData(formData
,val,key)}return formData})}return config._isDigested||(config._isDigested=!0,digestConfig()),sendHttp(config)},this.http=function(config){return config.transformRequest=config.transformRequest||function(data){return window.ArrayBuffer&&data instanceof window.ArrayBuffer||data instanceof Blob?data:$http.defaults.transformRequest[0].apply(this,arguments)},config._chunkSize=upload.translateScalars(config.resumeChunkSize),config._chunkSize=config._chunkSize?parseInt(config._chunkSize.toString()):null,sendHttp(config)},this.translateScalars=function(str){if(angular.isString(str)){if(str.search(/kb/i)===str.length-2)return parseFloat(str.substring(0,str.length-2)*1e3);if(str.search(/mb/i)===str.length-2)return parseFloat(str.substring(0,str.length-2)*1e6);if(str.search(/gb/i)===str.length-2)return parseFloat(str.substring(0,str.length-2)*1e9);if(str.search(/b/i)===str.length-1)return parseFloat(str.substring(0,str.length-1));if(str.search(/s/i)===str.length-1)return parseFloat(str.substring(0
,str.length-1));if(str.search(/m/i)===str.length-1)return parseFloat(str.substring(0,str.length-1)*60);if(str.search(/h/i)===str.length-1)return parseFloat(str.substring(0,str.length-1)*3600)}return str},this.setDefaults=function(defaults){this.defaults=defaults||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function($parse,$timeout,$compile,$q,UploadExif){var upload=UploadExif;upload.getAttrWithDefaults=function(attr,name){if(attr[name]!=null)return attr[name];var def=upload.defaults[name];return def==null?def:angular.isString(def)?def:JSON.stringify(def)},upload.attrGetter=function(name,attr,scope,params){var attrVal=this.getAttrWithDefaults(attr,name);if(!scope)return attrVal;try{return params?$parse(attrVal)(scope,params):$parse(attrVal)(scope)}catch(e){if(name.search(/min|max|pattern/i))return attrVal;throw e}},upload.shouldUpdateOn=function(type,attr,scope){var modelOptions=upload.attrGetter
("ngModelOptions",attr,scope);return modelOptions&&modelOptions.updateOn?modelOptions.updateOn.split(" ").indexOf(type)>-1:!0},upload.emptyPromise=function(){var d=$q.defer(),args=arguments;return $timeout(function(){d.resolve.apply(d,args)}),d.promise},upload.happyPromise=function(promise,data){var d=$q.defer();return promise.then(function(result){d.resolve(result)},function(error){$timeout(function(){throw error}),d.resolve(data)}),d.promise};function applyExifRotations(files,attr,scope){var promises=[upload.emptyPromise()];return angular.forEach(files,function(f,i){f.type.indexOf("image/jpeg")===0&&upload.attrGetter("ngfFixOrientation",attr,scope,{$file:f})&&promises.push(upload.happyPromise(upload.applyExifRotation(f),f).then(function(fixedFile){files.splice(i,1,fixedFile)}))}),$q.all(promises)}function resize(files,attr,scope){var param=upload.attrGetter("ngfResize",attr,scope);if(!param||!upload.isResizeSupported()||!files.length)return upload.emptyPromise();var promises=[upload.emptyPromise
()];return angular.forEach(files,function(f,i){if(f.type.indexOf("image")===0){var promise=upload.resize(f,param.width,param.height,param.quality,param.type);promises.push(promise),promise.then(function(resizedFile){files.splice(i,1,resizedFile)},function(e){f.$error="resize",f.$errorParam=(e?(e.message?e.message:e)+": ":"")+(f&&f.name)})}}),$q.all(promises)}function handleKeep(files,prevFiles,attr,scope){var dupFiles=[],keep=upload.attrGetter("ngfKeep",attr,scope);if(keep){var hasNew=!1;if(keep==="distinct"||upload.attrGetter("ngfKeepDistinct",attr,scope)===!0){var len=prevFiles.length;if(files)for(var i=0;i<files.length;i++){for(var j=0;j<len;j++)if(files[i].name===prevFiles[j].name){dupFiles.push(files[i]);break}j===len&&(prevFiles.push(files[i]),hasNew=!0)}files=prevFiles}else files=prevFiles.concat(files||[])}return{files:files,dupFiles:dupFiles,keep:keep}}return upload.updateModel=function(ngModel,attr,scope,fileChange,files,evt,noDelay){function update(files,invalidFiles,newFiles
,dupFiles,isSingleModel){var file=files&&files.length?files[0]:null;ngModel&&(upload.applyModelValidation(ngModel,files),ngModel.$ngfModelChange=!0,ngModel.$setViewValue(isSingleModel?file:files)),fileChange&&$parse(fileChange)(scope,{$files:files,$file:file,$newFiles:newFiles,$duplicateFiles:dupFiles,$invalidFiles:invalidFiles,$event:evt});var invalidModel=upload.attrGetter("ngfModelInvalid",attr);invalidModel&&$timeout(function(){$parse(invalidModel).assign(scope,invalidFiles)}),$timeout(function(){})}var newFiles=files,prevFiles=(ngModel&&ngModel.$modelValue||attr.$$ngfPrevFiles||[]).slice(0),keepResult=handleKeep(files,prevFiles,attr,scope);files=keepResult.files;var dupFiles=keepResult.dupFiles,isSingleModel=!upload.attrGetter("ngfMultiple",attr,scope)&&!upload.attrGetter("multiple",attr)&&!keepResult.keep;attr.$$ngfPrevFiles=files;if(keepResult.keep&&(!newFiles||!newFiles.length))return;upload.validate(newFiles,ngModel,attr,scope).then(function(){if(noDelay)update(files,[],newFiles
,dupFiles,isSingleModel);else{var options=upload.attrGetter("ngModelOptions",attr,scope);if(!options||!options.allowInvalid){var valids=[],invalids=[];angular.forEach(files,function(file){file.$error?invalids.push(file):valids.push(file)}),files=valids}var fixOrientation=upload.emptyPromise(files);upload.attrGetter("ngfFixOrientation",attr,scope)&&upload.isExifSupported()&&(fixOrientation=applyExifRotations(files,attr,scope)),fixOrientation.then(function(){resize(files,attr,scope).then(function(){$timeout(function(){update(files,invalids,newFiles,dupFiles,isSingleModel)},options&&options.debounce?options.debounce.change||options.debounce:0)},function(e){throw"Could not resize files "+e})})}});var l=prevFiles.length;while(l--){var prevFile=prevFiles[l];window.URL&&prevFile.blobUrl&&(URL.revokeObjectURL(prevFile.blobUrl),delete prevFile.blobUrl)}},upload}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function($parse,$timeout,$compile,Upload){var generatedElems=
[];function isDelayedClickSupported(ua){var m=ua.match(/Android[^\d]*(\d+)\.(\d+)/);if(m&&m.length>2){var v=Upload.defaults.androidFixMinorVersion||4;return parseInt(m[1])<4||parseInt(m[1])===v&&parseInt(m[2])<v}return ua.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(ua)}function linkFileSelect(scope,elem,attr,ngModel,$parse,$timeout,$compile,upload){var attrGetter=function(name,scope){return upload.attrGetter(name,attr,scope)};function isInputTypeFile(){return elem[0].tagName.toLowerCase()==="input"&&attr.type&&attr.type.toLowerCase()==="file"}function fileChangeAttr(){return attrGetter("ngfChange")||attrGetter("ngfSelect")}function changeFn(evt){if(upload.shouldUpdateOn("change",attr,scope)){var fileList=evt.__files_||evt.target&&evt.target.files,files=[];for(var i=0;i<fileList.length;i++)files.push(fileList[i]);upload.updateModel(ngModel,attr,scope,fileChangeAttr(),files.length?files:null,evt)}}upload.registerModelChangeValidator(ngModel,attr,scope);var unwatches=[];unwatches.push
(scope.$watch(attrGetter("ngfMultiple"),function(){fileElem.attr("multiple",attrGetter("ngfMultiple",scope))})),unwatches.push(scope.$watch(attrGetter("ngfCapture"),function(){fileElem.attr("capture",attrGetter("ngfCapture",scope))})),attr.$observe("accept",function(){fileElem.attr("accept",attrGetter("accept"))}),unwatches.push(function(){attr.$$observers&&delete attr.$$observers.accept});function bindAttrToFileInput(fileElem){if(elem!==fileElem)for(var i=0;i<elem[0].attributes.length;i++){var attribute=elem[0].attributes[i];if(attribute.name!=="type"&&attribute.name!=="class"&&attribute.name!=="id"&&attribute.name!=="style"){if(attribute.value==null||attribute.value==="")attribute.name==="required"&&(attribute.value="required"),attribute.name==="multiple"&&(attribute.value="multiple");fileElem.attr(attribute.name,attribute.value)}}}function createFileInput(){if(isInputTypeFile())return elem;var fileElem=angular.element('<input type="file">');return bindAttrToFileInput(fileElem),fileElem
.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),generatedElems.push({el:elem,ref:fileElem}),document.body.appendChild(fileElem[0]),fileElem}var initialTouchStartY=0;function clickHandler(evt){if(elem.attr("disabled")||attrGetter("ngfSelectDisabled",scope))return!1;var r=handleTouch(evt);if(r!=null)return r;resetModel(evt);try{!isInputTypeFile()&&!document.body.contains(fileElem[0])&&(generatedElems.push({el:elem,ref:fileElem}),document.body.appendChild(fileElem[0]),fileElem.bind("change",changeFn))}catch(e){}return isDelayedClickSupported(navigator.userAgent)?setTimeout(function(){fileElem[0].click()},0):fileElem[0].click(),!1}function handleTouch(evt){var touches=evt.changedTouches||evt.originalEvent&&evt.originalEvent.changedTouches;if(evt.type==="touchstart")return initialTouchStartY=touches?touches[0].clientY:0,!0;evt.stopPropagation
(),evt.preventDefault();if(evt.type==="touchend"){var currentLocation=touches?touches[0].clientY:0;if(Math.abs(currentLocation-initialTouchStartY)>20)return!1}}var fileElem=elem;function resetModel(evt){upload.shouldUpdateOn("click",attr,scope)&&fileElem.val()&&(fileElem.val(null),upload.updateModel(ngModel,attr,scope,fileChangeAttr(),null,evt,!0))}isInputTypeFile()||(fileElem=createFileInput()),fileElem.bind("change",changeFn),isInputTypeFile()?elem.bind("click",resetModel):elem.bind("click touchstart touchend",clickHandler);function ie10SameFileSelectFix(evt){if(fileElem&&!fileElem.attr("__ngf_ie10_Fix_")){if(!fileElem[0].parentNode){fileElem=null;return}evt.preventDefault(),evt.stopPropagation(),fileElem.unbind("click");var clone=fileElem.clone();return fileElem.replaceWith(clone),fileElem=clone,fileElem.attr("__ngf_ie10_Fix_","true"),fileElem.bind("change",changeFn),fileElem.bind("click",ie10SameFileSelectFix),fileElem[0].click(),!1}fileElem.removeAttr("__ngf_ie10_Fix_")}navigator.appVersion
.indexOf("MSIE 10")!==-1&&fileElem.bind("click",ie10SameFileSelectFix),ngModel&&ngModel.$formatters.push(function(val){return(val==null||val.length===0)&&fileElem.val()&&fileElem.val(null),val}),scope.$on("$destroy",function(){isInputTypeFile()||fileElem.remove(),angular.forEach(unwatches,function(unwatch){unwatch()})}),$timeout(function(){for(var i=0;i<generatedElems.length;i++){var g=generatedElems[i];document.body.contains(g.el[0])||(generatedElems.splice(i,1),g.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(elem,fileElem,changeFn)}return{restrict:"AEC",require:"?ngModel",link:function(scope,elem,attr,ngModel){linkFileSelect(scope,elem,attr,ngModel,$parse,$timeout,$compile,Upload)}}}]),function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(UploadBase,$timeout,$q){var upload=UploadBase;return upload.base64DataUrl=function(file){if(angular.isArray(file)){var d=$q.defer(),count=0;return angular.forEach(file,function(f){upload
.dataUrl(f,!0)["finally"](function(){count++;if(count===file.length){var urls=[];angular.forEach(file,function(ff){urls.push(ff.$ngfDataUrl)}),d.resolve(urls,file)}})}),d.promise}return upload.dataUrl(file,!0)},upload.dataUrl=function(file,disallowObjectUrl){if(!file)return upload.emptyPromise(file,file);if(disallowObjectUrl&&file.$ngfDataUrl!=null||!disallowObjectUrl&&file.$ngfBlobUrl!=null)return upload.emptyPromise(disallowObjectUrl?file.$ngfDataUrl:file.$ngfBlobUrl,file);var p=disallowObjectUrl?file.$$ngfDataUrlPromise:file.$$ngfBlobUrlPromise;if(p)return p;var deferred=$q.defer();return $timeout(function(){if(window.FileReader&&file&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||file.size<2e4)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||file.size<4e6)){var URL=window.URL||window.webkitURL;if(URL&&URL.createObjectURL&&!disallowObjectUrl){var url;try{url=URL.createObjectURL(file)}catch(e){$timeout(function(){file.$ngfBlobUrl="",deferred.reject()});return}
$timeout(function(){file.$ngfBlobUrl=url,url&&deferred.resolve(url,file)})}else{var fileReader=new FileReader;fileReader.onload=function(e){$timeout(function(){file.$ngfDataUrl=e.target.result,deferred.resolve(e.target.result,file)})},fileReader.onerror=function(){$timeout(function(){file.$ngfDataUrl="",deferred.reject()})},fileReader.readAsDataURL(file)}}else $timeout(function(){file[disallowObjectUrl?"dataUrl":"blobUrl"]="",deferred.reject()})}),disallowObjectUrl?p=file.$$ngfDataUrlPromise=deferred.promise:p=file.$$ngfBlobUrlPromise=deferred.promise,p["finally"](function(){delete file[disallowObjectUrl?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),p},upload}]);function getTagType(el){return el.tagName.toLowerCase()==="img"?"image":el.tagName.toLowerCase()==="audio"?"audio":el.tagName.toLowerCase()==="video"?"video":/./}function linkFileDirective(Upload,$timeout,scope,elem,attr,directiveName,resizeParams,isBackground){function constructDataUrl(file){var disallowObjectUrl=Upload.attrGetter
("ngfNoObjectUrl",attr,scope);Upload.dataUrl(file,disallowObjectUrl)["finally"](function(){$timeout(function(){var src=(disallowObjectUrl?file.$ngfDataUrl:file.$ngfBlobUrl)||file.$ngfDataUrl;isBackground?elem.css("background-image","url('"+(src||"")+"')"):elem.attr("src",src),src?elem.removeClass("ng-hide"):elem.addClass("ng-hide")})})}$timeout(function(){var unwatch=scope.$watch(attr[directiveName],function(file){var size=resizeParams;if(directiveName==="ngfThumbnail"){size||(size={width:elem[0].clientWidth,height:elem[0].clientHeight});if(size.width===0&&window.getComputedStyle){var style=getComputedStyle(elem[0]);size={width:parseInt(style.width.slice(0,-2)),height:parseInt(style.height.slice(0,-2))}}}if(angular.isString(file))return elem.removeClass("ng-hide"),isBackground?elem.css("background-image","url('"+file+"')"):elem.attr("src",file);file&&file.type&&file.type.search(getTagType(elem[0]))===0&&(!isBackground||file.type.indexOf("image")===0)?size&&Upload.isResizeSupported()?Upload
.resize(file,size.width,size.height,size.quality).then(function(f){constructDataUrl(f)},function(e){throw e}):constructDataUrl(file):elem.addClass("ng-hide")});scope.$on("$destroy",function(){unwatch()})})}ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(Upload,$timeout){return{restrict:"AE",link:function(scope,elem,attr){linkFileDirective(Upload,$timeout,scope,elem,attr,"ngfSrc",Upload.attrGetter("ngfResize",attr,scope),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(Upload,$timeout){return{restrict:"AE",link:function(scope,elem,attr){linkFileDirective(Upload,$timeout,scope,elem,attr,"ngfBackground",Upload.attrGetter("ngfResize",attr,scope),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(Upload,$timeout){return{restrict:"AE",link:function(scope,elem,attr){var size=Upload.attrGetter("ngfSize",attr,scope);linkFileDirective(Upload,$timeout,scope,elem,attr,"ngfThumbnail",size,Upload.attrGetter("ngfAsBackground",attr,scope
))}}}]),ngFileUpload.config(["$compileProvider",function($compileProvider){$compileProvider.imgSrcSanitizationWhitelist&&$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),$compileProvider.aHrefSanitizationWhitelist&&$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(UploadDataUrl,$sce){return function(file,disallowObjectUrl,trustedUrl){if(angular.isString(file))return $sce.trustAsResourceUrl(file);var src=file&&((disallowObjectUrl?file.$ngfDataUrl:file.$ngfBlobUrl)||file.$ngfDataUrl);return file&&!src?(!file.$ngfDataUrlFilterInProgress&&angular.isObject(file)&&(file.$ngfDataUrlFilterInProgress=!0,UploadDataUrl.dataUrl(file,disallowObjectUrl)),""):(file&&delete file.$ngfDataUrlFilterInProgress,(file&&src?trustedUrl?$sce.trustAsResourceUrl(src):src:file)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout"
,function(UploadDataUrl,$q,$timeout){var upload=UploadDataUrl;function globStringToRegex(str){var regexp="",excludes=[];if(str.length>2&&str[0]==="/"&&str[str.length-1]==="/")regexp=str.substring(1,str.length-1);else{var split=str.split(",");if(split.length>1)for(var i=0;i<split.length;i++){var r=globStringToRegex(split[i]);r.regexp?(regexp+="("+r.regexp+")",i<split.length-1&&(regexp+="|")):excludes=excludes.concat(r.excludes)}else str.indexOf("!")===0?excludes.push("^((?!"+globStringToRegex(str.substring(1)).regexp+").)*$"):(str.indexOf(".")===0&&(str="*"+str),regexp="^"+str.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",regexp=regexp.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:regexp,excludes:excludes}}upload.validatePattern=function(file,val){if(!val)return!0;var pattern=globStringToRegex(val),valid=!0;if(pattern.regexp&&pattern.regexp.length){var regexp=new RegExp(pattern.regexp,"i");valid=file.type!=null&&regexp.test(file.type)||file.name!=null&&
regexp.test(file.name)}var len=pattern.excludes.length;while(len--){var exclude=new RegExp(pattern.excludes[len],"i");valid=valid&&(file.type==null||exclude.test(file.type))&&(file.name==null||exclude.test(file.name))}return valid},upload.registerModelChangeValidator=function(ngModel,attr,scope){ngModel&&ngModel.$formatters.push(function(files){ngModel.$ngfModelChange?ngModel.$ngfModelChange=!1:upload.validate(files,ngModel,attr,scope,function(){upload.applyModelValidation(ngModel,files)})})};function markModelAsDirty(ngModel,files){files!=null&&!ngModel.$dirty&&(ngModel.$setDirty?ngModel.$setDirty():ngModel.$dirty=!0)}return upload.applyModelValidation=function(ngModel,files){markModelAsDirty(ngModel,files),angular.forEach(ngModel.$ngfValidations,function(validation){ngModel.$setValidity(validation.name,validation.valid)})},upload.validate=function(files,ngModel,attr,scope){ngModel=ngModel||{},ngModel.$ngfValidations=ngModel.$ngfValidations||[],angular.forEach(ngModel.$ngfValidations,function(
v){v.valid=!0});var attrGetter=function(name,params){return upload.attrGetter(name,attr,scope,params)};if(files==null||files.length===0)return upload.emptyPromise(ngModel);files=files.length===undefined?[files]:files.slice(0);function validateSync(name,validatorVal,fn){if(files){var dName="ngf"+name[0].toUpperCase()+name.substr(1),i=files.length,valid=null;while(i--){var file=files[i];if(file){var val=attrGetter(dName,{$file:file});val==null&&(val=validatorVal(attrGetter("ngfValidate")||{}),valid=valid==null?!0:valid),val!=null&&(fn(file,val)||(file.$error=name,file.$errorParam=val,files.splice(i,1),valid=!1))}}valid!==null&&ngModel.$ngfValidations.push({name:name,valid:valid})}}validateSync("pattern",function(cons){return cons.pattern},upload.validatePattern),validateSync("minSize",function(cons){return cons.size&&cons.size.min},function(file,val){return file.size>=upload.translateScalars(val)}),validateSync("maxSize",function(cons){return cons.size&&cons.size.max},function(file,val){return file
.size<=upload.translateScalars(val)});var totalSize=0;validateSync("maxTotalSize",function(cons){return cons.maxTotalSize&&cons.maxTotalSize},function(file,val){return totalSize+=file.size,totalSize>upload.translateScalars(val)?(files.splice(0,files.length),!1):!0}),validateSync("validateFn",function(){return null},function(file,r){return r===!0||r===null||r===""});if(!files.length)return upload.emptyPromise(ngModel,ngModel.$ngfValidations);function validateAsync(name,validatorVal,type,asyncFn,fn){var promises=[upload.emptyPromise()];if(files){var dName="ngf"+name[0].toUpperCase()+name.substr(1);return files=files.length===undefined?[files]:files,angular.forEach(files,function(file){var defer=$q.defer();promises.push(defer.promise);if(!(!type||file.type!=null&&file.type.search(type)===0)){defer.resolve();return}var val=attrGetter(dName,{$file:file})||validatorVal(attrGetter("ngfValidate",{$file:file})||{});val?asyncFn(file,val).then(function(d){fn(d,val)?defer.resolve():(file.$error=name
,file.$errorParam=val,defer.reject())},function(){attrGetter("ngfValidateForce",{$file:file})?(file.$error=name,file.$errorParam=val,defer.reject()):defer.resolve()}):defer.resolve()}),$q.all(promises).then(function(){ngModel.$ngfValidations.push({name:name,valid:!0})},function(){ngModel.$ngfValidations.push({name:name,valid:!1})})}}var deffer=$q.defer(),promises=[];return promises.push(upload.happyPromise(validateAsync("maxHeight",function(cons){return cons.height&&cons.height.max},/image/,this.imageDimensions,function(d,val){return d.height<=val}))),promises.push(upload.happyPromise(validateAsync("minHeight",function(cons){return cons.height&&cons.height.min},/image/,this.imageDimensions,function(d,val){return d.height>=val}))),promises.push(upload.happyPromise(validateAsync("maxWidth",function(cons){return cons.width&&cons.width.max},/image/,this.imageDimensions,function(d,val){return d.width<=val}))),promises.push(upload.happyPromise(validateAsync("minWidth",function(cons){return cons
.width&&cons.width.min},/image/,this.imageDimensions,function(d,val){return d.width>=val}))),promises.push(upload.happyPromise(validateAsync("ratio",function(cons){return cons.ratio},/image/,this.imageDimensions,function(d,val){var split=val.toString().split(","),valid=!1;for(var i=0;i<split.length;i++){var r=split[i],xIndex=r.search(/x/i);xIndex>-1?r=parseFloat(r.substring(0,xIndex))/parseFloat(r.substring(xIndex+1)):r=parseFloat(r),Math.abs(d.width/d.height-r)<1e-4&&(valid=!0)}return valid}))),promises.push(upload.happyPromise(validateAsync("maxDuration",function(cons){return cons.duration&&cons.duration.max},/audio|video/,this.mediaDuration,function(d,val){return d<=upload.translateScalars(val)}))),promises.push(upload.happyPromise(validateAsync("minDuration",function(cons){return cons.duration&&cons.duration.min},/audio|video/,this.mediaDuration,function(d,val){return d>=upload.translateScalars(val)}))),promises.push(upload.happyPromise(validateAsync("validateAsyncFn",function(){return null
},null,function(file,val){return val},function(r){return r===!0||r===null||r===""}))),$q.all(promises).then(function(){deffer.resolve(ngModel,ngModel.$ngfValidations)})},upload.imageDimensions=function(file){if(file.$ngfWidth&&file.$ngfHeight){var d=$q.defer();return $timeout(function(){d.resolve({width:file.$ngfWidth,height:file.$ngfHeight})}),d.promise}if(file.$ngfDimensionPromise)return file.$ngfDimensionPromise;var deferred=$q.defer();return $timeout(function(){if(file.type.indexOf("image")!==0){deferred.reject("not image");return}upload.dataUrl(file).then(function(dataUrl){var img=angular.element("<img>").attr("src",dataUrl).css("visibility","hidden").css("position","fixed");function success(){var width=img[0].clientWidth,height=img[0].clientHeight;img.remove(),file.$ngfWidth=width,file.$ngfHeight=height,deferred.resolve({width:width,height:height})}function error(){img.remove(),deferred.reject("load error")}img.on("load",success),img.on("error",error);var count=0;function checkLoadError
(){$timeout(function(){img[0].parentNode&&(img[0].clientWidth?success():count>10?error():checkLoadError())},1e3)}checkLoadError(),angular.element(document.getElementsByTagName("body")[0]).append(img)},function(){deferred.reject("load error")})}),file.$ngfDimensionPromise=deferred.promise,file.$ngfDimensionPromise["finally"](function(){delete file.$ngfDimensionPromise}),file.$ngfDimensionPromise},upload.mediaDuration=function(file){if(file.$ngfDuration){var d=$q.defer();return $timeout(function(){d.resolve(file.$ngfDuration)}),d.promise}if(file.$ngfDurationPromise)return file.$ngfDurationPromise;var deferred=$q.defer();return $timeout(function(){if(file.type.indexOf("audio")!==0&&file.type.indexOf("video")!==0){deferred.reject("not media");return}upload.dataUrl(file).then(function(dataUrl){var el=angular.element(file.type.indexOf("audio")===0?"<audio>":"<video>").attr("src",dataUrl).css("visibility","none").css("position","fixed");function success(){var duration=el[0].duration;file.$ngfDuration=
duration,el.remove(),deferred.resolve(duration)}function error(){el.remove(),deferred.reject("load error")}el.on("loadedmetadata",success),el.on("error",error);var count=0;function checkLoadError(){$timeout(function(){el[0].parentNode&&(el[0].duration?success():count>10?error():checkLoadError())},1e3)}checkLoadError(),angular.element(document.body).append(el)},function(){deferred.reject("load error")})}),file.$ngfDurationPromise=deferred.promise,file.$ngfDurationPromise["finally"](function(){delete file.$ngfDurationPromise}),file.$ngfDurationPromise},upload}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(UploadValidate,$q){var upload=UploadValidate,calculateAspectRatioFit=function(srcWidth,srcHeight,maxWidth,maxHeight){var ratio=Math.min(maxWidth/srcWidth,maxHeight/srcHeight);return{width:srcWidth*ratio,height:srcHeight*ratio}},resize=function(imagen,width,height,quality,type){var deferred=$q.defer(),canvasElement=document.createElement("canvas"),imageElement=document
.createElement("img");return imageElement.onload=function(){try{width||(width=imageElement.width),height||(height=imageElement.height);var dimensions=calculateAspectRatioFit(imageElement.width,imageElement.height,width,height);canvasElement.width=dimensions.width,canvasElement.height=dimensions.height;var context=canvasElement.getContext("2d");context.drawImage(imageElement,0,0,dimensions.width,dimensions.height),deferred.resolve(canvasElement.toDataURL(type||"image/WebP",quality||1))}catch(e){deferred.reject(e)}},imageElement.onerror=function(){deferred.reject()},imageElement.src=imagen,deferred.promise};return upload.dataUrltoBlob=function(dataurl,name){var arr=dataurl.split(","),mime=arr[0].match(/:(.*?);/)[1],bstr=atob(arr[1]),n=bstr.length,u8arr=new Uint8Array(n);while(n--)u8arr[n]=bstr.charCodeAt(n);var blob=new Blob([u8arr],{type:mime});return blob.name=name,blob},upload.isResizeSupported=function(){var elem=document.createElement("canvas");return window.atob&&elem.getContext&&elem
.getContext("2d")},upload.isResizeSupported()&&Object.defineProperty(Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(v){this.$ngfName=v},configurable:!0}),upload.resize=function(file,width,height,quality,type){if(file.type.indexOf("image")!==0)return upload.emptyPromise(file);var deferred=$q.defer();return upload.dataUrl(file,!0).then(function(url){resize(url,width,height,quality,type||file.type).then(function(dataUrl){deferred.resolve(upload.dataUrltoBlob(dataUrl,file.name))},function(){deferred.reject()})},function(){deferred.reject()}),deferred.promise},upload}]),function(){ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http",function($parse,$timeout,$location,Upload,$http){return{restrict:"AEC",require:"?ngModel",link:function(scope,elem,attr,ngModel){linkDrop(scope,elem,attr,ngModel,$parse,$timeout,$location,Upload,$http)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(scope,elem){dropAvailable()&&elem.css
("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function($parse,$timeout,Upload){return function(scope,elem,attr){if(dropAvailable()){var model=$parse(Upload.attrGetter("ngfDropAvailable",attr));$timeout(function(){model(scope),model.assign&&model.assign(scope,!0)})}}}]);function linkDrop(scope,elem,attr,ngModel,$parse,$timeout,$location,upload,$http){var available=dropAvailable(),attrGetter=function(name,scope,params){return upload.attrGetter(name,attr,scope,params)};attrGetter("dropAvailable")&&$timeout(function(){scope[attrGetter("dropAvailable")]?scope[attrGetter("dropAvailable")].value=available:scope[attrGetter("dropAvailable")]=available});if(!available){attrGetter("ngfHideOnDropNotAvailable",scope)===!0&&elem.css("display","none");return}function isDisabled(){return elem.attr("disabled")||attrGetter("ngfDropDisabled",scope)}attrGetter("ngfSelect")==null&&upload.registerModelChangeValidator(ngModel,attr,scope);var leaveTimeout=null,stopPropagation=
$parse(attrGetter("ngfStopPropagation")),dragOverDelay=1,actualDragOverClass;elem[0].addEventListener("dragover",function(evt){if(isDisabled())return;evt.preventDefault(),stopPropagation(scope)&&evt.stopPropagation();if(navigator.userAgent.indexOf("Chrome")>-1){var b=evt.dataTransfer.effectAllowed;evt.dataTransfer.dropEffect="move"===b||"linkMove"===b?"move":"copy"}$timeout.cancel(leaveTimeout),actualDragOverClass||(actualDragOverClass="C",calculateDragOverClass(scope,attr,evt,function(clazz){actualDragOverClass=clazz,elem.addClass(actualDragOverClass),attrGetter("ngfDrag",scope,{$isDragging:!0,$class:actualDragOverClass,$event:evt})}))},!1),elem[0].addEventListener("dragenter",function(evt){if(isDisabled())return;evt.preventDefault(),stopPropagation(scope)&&evt.stopPropagation()},!1),elem[0].addEventListener("dragleave",function(evt){if(isDisabled())return;evt.preventDefault(),stopPropagation(scope)&&evt.stopPropagation(),leaveTimeout=$timeout(function(){actualDragOverClass&&elem.removeClass
(actualDragOverClass),actualDragOverClass=null,attrGetter("ngfDrag",scope,{$isDragging:!1,$event:evt})},dragOverDelay||100)},!1),elem[0].addEventListener("drop",function(evt){if(isDisabled()||!upload.shouldUpdateOn("drop",attr,scope))return;evt.preventDefault(),stopPropagation(scope)&&evt.stopPropagation(),actualDragOverClass&&elem.removeClass(actualDragOverClass),actualDragOverClass=null;var html;try{html=evt.dataTransfer&&evt.dataTransfer.getData&&evt.dataTransfer.getData("text/html")}catch(e){}if(html){var url;html.replace(/<img .*src *=\"([^\"]*)\"/,function(m,src){url=src}),url&&$http({url:url,method:"get",responseType:"arraybuffer"}).then(function(resp){var arrayBufferView=new Uint8Array(resp.data),type=resp.headers("content-type")||"image/WebP",blob=new Blob([arrayBufferView],{type:type});upload.updateModel(ngModel,attr,scope,attrGetter("ngfChange")||attrGetter("ngfDrop"),[blob],evt)})}else extractFiles(evt,function(files){upload.updateModel(ngModel,attr,scope,attrGetter("ngfChange"
)||attrGetter("ngfDrop"),files,evt)},attrGetter("ngfAllowDir",scope)!==!1,attrGetter("multiple")||attrGetter("ngfMultiple",scope))},!1),elem[0].addEventListener("paste",function(evt){if(isDisabled()||!upload.shouldUpdateOn("paste",attr,scope))return;var files=[],clipboard=evt.clipboardData||evt.originalEvent.clipboardData;if(clipboard&&clipboard.items){for(var k=0;k<clipboard.items.length;k++)clipboard.items[k].type.indexOf("image")!==-1&&files.push(clipboard.items[k].getAsFile());upload.updateModel(ngModel,attr,scope,attrGetter("ngfChange")||attrGetter("ngfDrop"),files,evt)}},!1);function calculateDragOverClass(scope,attr,evt,callback){var obj=attrGetter("ngfDragOverClass",scope,{$event:evt}),dClass="dragover";if(angular.isString(obj))dClass=obj;else if(obj){obj.delay&&(dragOverDelay=obj.delay);if(obj.accept||obj.reject){var items=evt.dataTransfer.items;if(items==null||!items.length)dClass=obj.accept;else{var pattern=obj.pattern||attrGetter("ngfPattern",scope,{$event:evt}),len=items.length
;while(len--){if(!upload.validatePattern(items[len],pattern)){dClass=obj.reject;break}dClass=obj.accept}}}}callback(dClass)}function extractFiles(evt,callback,allowDir,multiple){var files=[],processing=0;function traverseFileTree(files,entry,path){if(entry!=null)if(entry.isDirectory){var filePath=(path||"")+entry.name;files.push({name:entry.name,type:"directory",path:filePath});var dirReader=entry.createReader(),entries=[];processing++;var readEntries=function(){dirReader.readEntries(function(results){try{if(!results.length){for(var i=0;i<entries.length;i++)traverseFileTree(files,entries[i],(path?path:"")+entry.name+"/");processing--}else entries=entries.concat(Array.prototype.slice.call(results||[],0)),readEntries()}catch(e){processing--,console.error(e)}},function(){processing--})};readEntries()}else processing++,entry.file(function(file){try{processing--,file.path=(path?path:"")+file.name,files.push(file)}catch(e){processing--,console.error(e)}},function(){processing--})}var items=evt
.dataTransfer.items;if(items&&items.length>0&&$location.protocol()!=="file")for(var i=0;i<items.length;i++){if(items[i].webkitGetAsEntry&&items[i].webkitGetAsEntry()&&items[i].webkitGetAsEntry().isDirectory){var entry=items[i].webkitGetAsEntry();if(entry.isDirectory&&!allowDir)continue;entry!=null&&traverseFileTree(files,entry)}else{var f=items[i].getAsFile();f!=null&&files.push(f)}if(!multiple&&files.length>0)break}else{var fileList=evt.dataTransfer.files;if(fileList!=null)for(var j=0;j<fileList.length;j++){files.push(fileList.item(j));if(!multiple&&files.length>0)break}}var delays=0;(function waitForProcess(delay){$timeout(function(){if(!processing){if(!multiple&&files.length>1){i=0;while(files[i].type==="directory")i++;files=[files[i]]}callback(files)}else delays++*10<2e4&&waitForProcess(10)},delay||0)})()}}function dropAvailable(){var div=document.createElement("div");return"draggable"in div&&"ondrop"in div&&!/Edge\/12./i.test(navigator.userAgent)}}(),ngFileUpload.service("UploadExif"
,["UploadResize","$q",function(UploadResize,$q){var upload=UploadResize;function findEXIFinJPEG(file){var dataView=new DataView(file);if(dataView.getUint8(0)!==255||dataView.getUint8(1)!==216)return"Not a valid JPEG";var offset=2,length=file.byteLength,marker;while(offset<length){if(dataView.getUint8(offset)!==255)return"Not a valid marker at offset "+offset+", found: "+dataView.getUint8(offset);marker=dataView.getUint8(offset+1);if(marker===225)return readEXIFData(dataView,offset+4,dataView.getUint16(offset+2)-2);offset+=2+dataView.getUint16(offset+2)}}function readOrientation(file,tiffStart,dirStart,bigEnd){var entries=file.getUint16(dirStart,!bigEnd),entryOffset,i;for(i=0;i<entries;i++){entryOffset=dirStart+i*12+2;var val=file.getUint16(entryOffset,!bigEnd);if(274===val)return readTagValue(file,entryOffset,tiffStart,bigEnd)}return null}function readTagValue(file,entryOffset,tiffStart,bigEnd){var numValues=file.getUint32(entryOffset+4,!bigEnd),valueOffset=file.getUint32(entryOffset+8,!
bigEnd)+tiffStart,offset,vals,n;if(numValues===1)return file.getUint16(entryOffset+8,!bigEnd);offset=numValues>2?valueOffset:entryOffset+8,vals=[];for(n=0;n<numValues;n++)vals[n]=file.getUint16(offset+2*n,!bigEnd);return vals}function getStringFromDB(buffer,start,length){var outstr="";for(var n=start;n<start+length;n++)outstr+=String.fromCharCode(buffer.getUint8(n));return outstr}function readEXIFData(file,start){if(getStringFromDB(file,start,4)!=="Exif")return"Not valid EXIF data! "+getStringFromDB(file,start,4);var bigEnd,tiffOffset=start+6;if(file.getUint16(tiffOffset)===18761)bigEnd=!1;else{if(file.getUint16(tiffOffset)!==19789)return"Not valid TIFF data! (no 0x4949 or 0x4D4D)";bigEnd=!0}if(file.getUint16(tiffOffset+2,!bigEnd)!==42)return"Not valid TIFF data! (no 0x002A)";var firstIFDOffset=file.getUint32(tiffOffset+4,!bigEnd);return firstIFDOffset<8?("Not valid TIFF data! (First offset less than 8)",file.getUint32(tiffOffset+4,!bigEnd)):readOrientation(file,tiffOffset,tiffOffset+firstIFDOffset
,bigEnd)}upload.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&upload.isResizeSupported()},upload.orientation=function(file){if(file.$ngfOrientation!=null)return upload.emptyPromise(file.$ngfOrientation);var defer=$q.defer(),fileReader=new FileReader;return fileReader.onload=function(e){var orientation;try{orientation=findEXIFinJPEG(e.target.result)}catch(e){defer.reject(e);return}angular.isString(orientation)?defer.reject(orientation):(file.$ngfOrientation=orientation,defer.resolve(orientation))},fileReader.onerror=function(e){defer.reject(e)},fileReader.readAsArrayBuffer(file),defer.promise};function applyTransform(ctx,orientation,width,height){switch(orientation){case 2:return ctx.transform(-1,0,0,1,width,0);case 3:return ctx.transform(-1,0,0,-1,width,height);case 4:return ctx.transform(1,0,0,-1,0,height);case 5:return ctx.transform(0,1,1,0,0,0);case 6:return ctx.transform(0,1,-1,0,height,0);case 7:return ctx.transform(0,-1,-1,0,height,width)
;case 8:return ctx.transform(0,-1,1,0,0,width)}}return upload.applyExifRotation=function(file){if(file.type.indexOf("image/jpeg")!==0)return upload.emptyPromise(file);var deferred=$q.defer();return upload.orientation(file).then(function(orientation){(!orientation||orientation<2||orientation>8)&&deferred.resolve(file),upload.dataUrl(file,!0).then(function(url){var canvas=document.createElement("canvas"),img=document.createElement("img");img.onload=function(){try{canvas.width=orientation>4?img.height:img.width,canvas.height=orientation>4?img.width:img.height;var ctx=canvas.getContext("2d");applyTransform(ctx,orientation,img.width,img.height),ctx.drawImage(img,0,0);var dataUrl=canvas.toDataURL(file.type||"image/WebP",1),blob=upload.dataUrltoBlob(dataUrl,file.name);deferred.resolve(blob)}catch(e){deferred.reject(e)}},img.onerror=function(){deferred.reject()},img.src=url},function(e){deferred.reject(e)})},function(e){deferred.reject(e)}),deferred.promise},upload}]),define("angularFileUpload"
,function(){}),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var buildDom=require("./build-dom"),draggable=require("./draggable"),configMap={n:{top:!0,height:-1},w:{left:!0,width:-1},e:{width:1},s:{height:1},nw:{left:!0,top:!0,width:-1,height:-1},ne:{top:!0,width:1,height:-1},sw:{left:!0,width:-1,height:1},se:{width:1,height:1}},getPosition=function(element){var selfRect=element.getBoundingClientRect(),parentRect=element.offsetParent.getBoundingClientRect();return{left:selfRect.left-parentRect.left,top:selfRect.top-parentRect.top}},Resizer=function(options){for(var prop in 
options)options.hasOwnProperty(prop)&&(this[prop]=options[prop])};Resizer.prototype.doOnStateChange=function(state){},Resizer.prototype.makeDraggable=function(dom){var self=this,dragState={},containment;draggable(dom,{start:function(event){var parentNode=dom.parentNode;containment={left:0,top:0,width:parentNode.clientWidth,height:parentNode.clientHeight,right:parentNode.clientWidth,bottom:parentNode.clientHeight},dragState.startLeft=event.clientX,dragState.startTop=event.clientY;var position=getPosition(dom);dragState.resizerStartLeft=position.left,dragState.resizerStartTop=position.top,dragState.resizerStartWidth=dom.offsetWidth,dragState.resizerStartHeight=dom.offsetHeight},drag:function(event){var offsetLeft=event.clientX-dragState.startLeft,offsetTop=event.clientY-dragState.startTop,left=dragState.resizerStartLeft+offsetLeft,top=dragState.resizerStartTop+offsetTop;left<containment.left&&(left=containment.left),top<containment.top&&(top=containment.top),left+dragState.resizerStartWidth>
containment.right&&(left=containment.right-dragState.resizerStartWidth),top+dragState.resizerStartHeight>containment.bottom&&(top=containment.bottom-dragState.resizerStartHeight),dom.style.left=left+"px",dom.style.top=top+"px",self.doOnStateChange()},end:function(){dragState={},self.doOnDragEnd&&self.doOnDragEnd()}})},Resizer.prototype.bindResizeEvent=function(dom){var self=this,resizeState={},aspectRatio=self.aspectRatio;typeof aspectRatio!="number"&&(aspectRatio=undefined);var makeResizable=function(bar){var type=bar.className.split(" ")[0],transformMap=configMap[type.substr(4)],containment;draggable(bar,{start:function(event){var parentNode=dom.parentNode;containment={left:0,top:0,width:parentNode.clientWidth,height:parentNode.clientHeight,right:parentNode.clientWidth,bottom:parentNode.clientHeight},resizeState.startWidth=dom.clientWidth,resizeState.startHeight=dom.clientHeight,resizeState.startLeft=event.clientX,resizeState.startTop=event.clientY;var position=getPosition(dom);resizeState
.resizerStartLeft=position.left,resizeState.resizerStartTop=position.top},drag:function(event){var widthRatio=transformMap.width,heightRatio=transformMap.height,offsetLeft=event.clientX-resizeState.startLeft,offsetTop=event.clientY-resizeState.startTop,width,height,minWidth=50,maxWidth=1e4,minHeight=50,maxHeight=1e4;widthRatio!==undefined&&(width=resizeState.startWidth+widthRatio*offsetLeft,width<minWidth&&(width=minWidth),maxWidth&&width>maxWidth&&(width=maxWidth)),heightRatio!==undefined&&(height=resizeState.startHeight+heightRatio*offsetTop,height<minHeight&&(height=minHeight),maxHeight&&height>maxHeight&&(height=maxHeight)),aspectRatio!==undefined&&(type==="ord-n"||type==="ord-s"?width=height*aspectRatio:type==="ord-w"||type==="ord-e"?height=width/aspectRatio:width/height<aspectRatio?height=width/aspectRatio:width=height*aspectRatio);var position={left:resizeState.resizerStartLeft,top:resizeState.resizerStartTop};transformMap.left!==undefined&&(position.left=resizeState.resizerStartLeft+
(width-resizeState.startWidth)*widthRatio),transformMap.top!==undefined&&(position.top=resizeState.resizerStartTop+(height-resizeState.startHeight)*heightRatio),width+position.left>containment.right&&(width=containment.right-position.left),position.left<containment.left&&(width-=containment.left-position.left,position.left=containment.left),height+position.top>containment.bottom&&(height=containment.bottom-position.top),position.top<containment.top&&(height-=containment.top-position.top,position.top=containment.top),aspectRatio!==undefined&&(width/height<aspectRatio?height=width/aspectRatio:width=height*aspectRatio),transformMap.left!==undefined&&(position.left=resizeState.resizerStartLeft+(width-resizeState.startWidth)*widthRatio),transformMap.top!==undefined&&(position.top=resizeState.resizerStartTop+(height-resizeState.startHeight)*heightRatio),dom.style.width=width+"px",dom.style.height=height+"px",position.left!==undefined&&(dom.style.left=position.left+"px"),position.top!==undefined&&
(dom.style.top=position.top+"px"),self.doOnStateChange()},end:function(){self.doOnDragEnd&&self.doOnDragEnd()}})},bars=dom.querySelectorAll(".resize-bar"),handles=dom.querySelectorAll(".resize-handle"),i,j;for(i=0,j=bars.length;i<j;i++)makeResizable(bars[i]);for(i=0,j=handles.length;i<j;i++)makeResizable(handles[i])},Resizer.prototype.render=function(container){var self=this,dom=buildDom({tag:"div",className:"resizer",content:[{tag:"div",className:"ord-n resize-bar"},{tag:"div",className:"ord-s resize-bar"},{tag:"div",className:"ord-w resize-bar"},{tag:"div",className:"ord-e resize-bar"},{tag:"div",className:"ord-nw resize-handle"},{tag:"div",className:"ord-n resize-handle"},{tag:"div",className:"ord-ne resize-handle"},{tag:"div",className:"ord-w resize-handle"},{tag:"div",className:"ord-e resize-handle"},{tag:"div",className:"ord-sw resize-handle"},{tag:"div",className:"ord-s resize-handle"},{tag:"div",className:"ord-se resize-handle"}]});return self.dom=dom,self.bindResizeEvent(dom),self
.makeDraggable(dom),container&&container.appendChild(dom),dom},module.exports=Resizer},{"./build-dom":3,"./draggable":5}],2:[function(require,module,exports){var Cropper=require("./cropper"),cropperInstances={};Cropper.getInstance=function(id){return cropperInstances[id]},angular.module("cropper",[]).factory("Cropper",function(){return Cropper}).directive("cropper",function(){return{restrict:"A",scope:{cropperContext:"=",cropperAspectRatio:"@"},link:function(scope,element,attrs){var id=attrs.cropper;if(!id)throw new Error("cropper id is required");var cropperAspectRatio=scope.cropperAspectRatio;cropperAspectRatio?/^\d*(\.)?\d+$/g.test(cropperAspectRatio)&&(cropperAspectRatio=parseFloat(cropperAspectRatio)):cropperAspectRatio=1;var cropper=Cropper({element:element[0],aspectRatio:cropperAspectRatio});cropperInstances[id]=cropper;var cropperContext=scope.cropperContext;cropper.onCroppedRectChange=function(rect){cropperContext&&(cropperContext.left=rect.left,cropperContext.top=rect.top,cropperContext
.width=rect.width,cropperContext.height=rect.height);try{scope.$apply()}catch(e){}},scope.$on("$destroy",function(){cropperInstances[id]=null,delete cropperInstances[id]})}}}).directive("cropperPreview",function(){return{restrict:"A",link:function(scope,element,attrs){var id=attrs.cropperPreview;if(!id)throw new Error("cropper id is required");var cropper=cropperInstances[id];cropper&&cropper.addPreview(element[0])}}}).directive("cropperSource",function(){return{restrict:"A",scope:{sizeLimit:"="},link:function($scope,$el,attrs){var id=attrs.cropperSource;if(!id)throw new Error("cropper id is required");var fileValidateRegex=/\.(jpg|png|gif|jpeg)$/i,fileTypes=attrs.cropperFileTypes;if(fileTypes){var types=fileTypes.split(",");types.length>0&&(fileValidateRegex=new RegExp(".("+types.join("|")+")$","i"))}$el.on("change",function(){var input=this,cropper=cropperInstances[id],fileName=input.value;if(input.files[0].size>2097152){alert("\u56fe\u7247\u5927\u5c0f\u4e0d\u5f97\u8d85\u8fc72M\uff01"
);return}if(fileName.indexOf("JPEG",0)<0&&fileName.indexOf("JPG",0)<0&&fileName.indexOf("PNG",0)<0&&fileName.indexOf("jpeg",0)<0&&fileName.indexOf("jpg",0)<0&&fileName.indexOf("png",0)<0){alert("\u8bf7\u9009\u62e9jpg\u6216\u8005png\u7c7b\u578b\u7684\u56fe\u7247\uff01");return}if(!fileValidateRegex.test(fileName)){cropper.setImage();return}if(typeof FileReader!="undefined"){var reader=new FileReader;reader.onload=function(event){cropper.setImage(event.target.result)},input.files&&input.files[0]&&reader.readAsDataURL(input.files[0])}else{input.select(),input.blur();var src=document.selection.createRange().text;cropper.setImage(src)}})}}})},{"./cropper":4}],3:[function(require,module,exports){var buildDOM=function(config,refs){if(!config)return null;var dom,childElement;if(config.tag){dom=document.createElement(config.tag);for(var prop in config)if(config.hasOwnProperty(prop)){if(prop==="content"||prop==="tag")continue;if(prop==="key"&&refs){var key=config[prop];key&&(refs[key]=dom)}dom[prop
]=config[prop]}var content=config.content;if(content instanceof Array)for(var i=0,j=content.length;i<j;i++){var child=content[i];childElement=buildDOM(child,refs),dom.appendChild(childElement)}else typeof content=="string"&&(childElement=document.createTextNode(content),dom.appendChild(childElement))}return dom};module.exports=buildDOM},{}],4:[function(require,module,exports){var Resizer=require("./Resizer"),buildDom=require("./build-dom"),blankImage="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",preLoadElement,ieVersion=Number(document.documentMode),getImageSize=function(src,callback){if(ieVersion<10){preLoadElement||(preLoadElement=document.createElement("div"),preLoadElement.style.position="absolute",preLoadElement.style.width="1px",preLoadElement.style.height="1px",preLoadElement.style.left="-9999px",preLoadElement.style.top="-9999px",preLoadElement.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image)",document.body.insertBefore
(preLoadElement,document.body.firstChild)),preLoadElement.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=src;var size={width:preLoadElement.offsetWidth,height:preLoadElement.offsetHeight};typeof callback=="function"&&callback(size)}else{var image=new Image;image.onload=function(){var size={width:image.width,height:image.height};typeof callback=="function"&&callback(size)},image.src=src}},Cropper=function(options){var cropper=this;this instanceof Cropper||(cropper=new Cropper),cropper.aspectRatio=1;for(var prop in options)options.hasOwnProperty(prop)&&(cropper[prop]=options[prop]);return cropper.element&&cropper.render(cropper.element),cropper};Cropper.prototype.resetResizer=function(){var resizer=this.resizer,cropperRect=this.cropperRect,aspectRatio=this.aspectRatio;typeof aspectRatio!="number"&&(aspectRatio=1);var width=100,height=100/aspectRatio,resizerDom=resizer.dom;resizerDom.style.width=width+"px",resizerDom.style.height=height+"px",cropperRect?(resizerDom.style.left=
(cropperRect.width-width)/2+"px",resizerDom.style.top=(cropperRect.height-height)/2+"px"):resizerDom.style.left=resizerDom.style.top="",resizer.doOnStateChange(),resizer.doOnDragEnd()},Cropper.prototype.setImage=function(src){var element=this.element,sourceImage=element.querySelector("img"),resizeImage=this.refs.image,self=this;if(src===undefined||src===null){resizeImage.src=sourceImage.src=blankImage,resizeImage.style.width=resizeImage.style.height=resizeImage.style.left=resizeImage.style.top="",sourceImage.style.width=sourceImage.style.height=sourceImage.style.left=sourceImage.style.top="",self.updatePreview(blankImage),self.dom.style.display="none",self.resetResizer(),self.dom.style.left=self.dom.style.top="",self.dom.style.width=element.offsetWidth+"px",self.dom.style.height=element.offsetHeight+"px",self.croppedRect={width:0,height:0,left:0,top:0},self.onCroppedRectChange&&self.onCroppedRectChange(self.croppedRect);return}getImageSize(src,function(size){ieVersion<10&&(resizeImage.src=
sourceImage.src=blankImage,resizeImage.style.filter=sourceImage.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",sourceImage.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=src,resizeImage.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=src),self.imageSize=size;var elementWidth=element.offsetWidth,elementHeight=element.offsetHeight,dom=self.dom,cropperRect={};size.width/size.height>elementWidth/elementHeight?(cropperRect.width=elementWidth,cropperRect.height=elementWidth*size.height/size.width,cropperRect.top=(elementHeight-cropperRect.height)/2,cropperRect.left=0):(cropperRect.height=elementHeight,cropperRect.width=elementHeight*size.width/size.height,cropperRect.top=0,cropperRect.left=(elementWidth-cropperRect.width)/2),self.cropperRect=cropperRect;for(var style in cropperRect)cropperRect.hasOwnProperty(style)&&(dom.style[style]=sourceImage.style[style]=resizeImage.style[style]=cropperRect[style]+"px");if(!ieVersion||
ieVersion>9)resizeImage.src=sourceImage.src=src;self.dom.style.display="",self.resetResizer(),self.updatePreview(src)})},Cropper.prototype.addPreview=function(preview){var previews=this.previews;previews||(previews=this.previews=[]),previews.push(preview)},Cropper.prototype.render=function(container){var resizer=new Resizer({aspectRatio:this.aspectRatio}),refs={},dom=buildDom({tag:"div",className:"cropper",content:[{tag:"div",className:"mask"}]},refs),resizerDom=resizer.render(dom),img=buildDom({tag:"div",className:"wrapper",content:[{tag:"img",key:"image",src:blankImage}]},refs),self=this;self.refs=refs,resizer.doOnStateChange=function(){var left=parseInt(resizerDom.style.left,10)||0,top=parseInt(resizerDom.style.top,10)||0,image=refs.image;image.style.left=-left+"px",image.style.top=-top+"px",self.updatePreview()},resizer.doOnDragEnd=function(){var left=parseInt(resizerDom.style.left,10)||0,top=parseInt(resizerDom.style.top,10)||0,resizerWidth=resizerDom.offsetWidth,resizerHeight=resizerDom
.offsetHeight,imageSize=self.imageSize,cropperRect=self.cropperRect;if(cropperRect){var scale=cropperRect.width/imageSize.width;self.croppedRect={width:Math.floor(resizerWidth/scale),height:Math.floor(resizerHeight/scale),left:Math.floor(left/scale),top:Math.floor(top/scale)},self.onCroppedRectChange&&self.onCroppedRectChange(self.croppedRect)}},self.resizer=resizer,self.dom=dom,resizerDom.insertBefore(img,resizerDom.firstChild),container.appendChild(dom),self.dom.style.display="none"},Cropper.prototype.updatePreview=function(src){var imageSize=this.imageSize,cropperRect=this.cropperRect;if(!imageSize||!cropperRect)return;var previews=this.previews||[],resizerDom=this.resizer.dom,resizerLeft=parseInt(resizerDom.style.left,10)||0,resizerTop=parseInt(resizerDom.style.top,10)||0,resizerWidth=resizerDom.offsetWidth,resizerHeight=resizerDom.offsetHeight;for(var i=0,j=previews.length;i<j;i++){var previewElement=previews[i],previewImage=previewElement.querySelector("img"),previewWrapper=previewElement
.querySelector("div");if(!previewImage)continue;if(src===blankImage)previewImage.style.width=previewImage.style.height=previewImage.style.left=previewImage.style.top="",previewImage.src=blankImage;else{ieVersion<10?src&&(previewImage.src=blankImage,previewImage.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",previewImage.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=src,previewImage.style.width=cropperRect.width+"px",previewImage.style.height=cropperRect.height+"px"):src&&(previewImage.src=src);var elementWidth=previewElement.offsetWidth,elementHeight=previewElement.offsetHeight,scale=elementWidth/resizerWidth;if(previewWrapper){var elementRatio=elementWidth/elementHeight,resizerRatio=resizerWidth/resizerHeight;if(elementRatio<resizerRatio)previewWrapper.style.width=elementWidth+"px",previewWrapper.style.height=resizerHeight*elementWidth/resizerWidth+"px",previewWrapper.style.top=(elementHeight-previewWrapper.clientHeight)/2+"px",previewWrapper
.style.left="";else{var visibleWidth=resizerWidth*elementHeight/resizerHeight;scale=visibleWidth/resizerWidth,previewWrapper.style.height=elementHeight+"px",previewWrapper.style.width=visibleWidth+"px",previewWrapper.style.left=(elementWidth-previewWrapper.clientWidth)/2+"px",previewWrapper.style.top=""}}previewImage.style.width=scale*cropperRect.width+"px",previewImage.style.height=scale*cropperRect.height+"px",previewImage.style.left=-resizerLeft*scale+"px",previewImage.style.top=-resizerTop*scale+"px"}}},module.exports=Cropper},{"./Resizer":1,"./build-dom":3}],5:[function(require,module,exports){var bind=function(element,event,fn){element.attachEvent?element.attachEvent("on"+event,fn):element.addEventListener(event,fn,!1)},unbind=function(element,event,fn){element.detachEvent?element.detachEvent("on"+event,fn):element.removeEventListener(event,fn)},isDragging=!1,isIE8=Number(document.documentMode)<9,fixEvent=function(event){var scrollTop=Math.max(window.scrollY||0,document.documentElement
.scrollTop||0),scrollLeft=Math.max(window.scrollX||0,document.documentElement.scrollLeft||0);event.target=event.srcElement,event.pageX=scrollLeft+event.clientX,event.pageY=scrollTop+event.clientY};module.exports=function(element,options){var moveFn=function(event){isIE8&&fixEvent(event),options.drag&&options.drag(event)},upFn=function(event){isIE8&&fixEvent(event),unbind(document,"mousemove",moveFn),unbind(document,"mouseup",upFn),document.onselectstart=null,document.ondragstart=null,isDragging=!1,options.end&&options.end(event)};bind(element,"mousedown",function(event){isIE8&&fixEvent(event);if(isDragging)return;document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},bind(document,"mousemove",moveFn),bind(document,"mouseup",upFn),isDragging=!0,options.start&&options.start(event)})}},{}],6:[function(require,module,exports){window.Cropper=require("./cropper")},{"./cropper":4}],7:[function(require,module,exports){typeof angular!="undefined"?require("./angular"
):require("./export")},{"./angular":2,"./export":6}]},{},[7]),define("cropper",function(){}),function(factory){typeof define=="function"&&define.amd?define("cropperOne",["jquery"],factory):typeof exports=="object"?factory(require("jquery")):factory(jQuery)}(function($){var $window=$(window),$document=$(document),location=window.location,CROPPER_NAMESPACE=".cropper",CROPPER_PREVIEW="preview"+CROPPER_NAMESPACE,REGEXP_DRAG_TYPES=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,CLASS_MODAL="cropper-modal",CLASS_HIDE="cropper-hide",CLASS_HIDDEN="cropper-hidden",CLASS_INVISIBLE="cropper-invisible",CLASS_MOVE="cropper-move",CLASS_CROP="cropper-crop",CLASS_DISABLED="cropper-disabled",CLASS_BG="cropper-bg",EVENT_MOUSE_DOWN="mousedown touchstart pointerdown MSPointerDown",EVENT_MOUSE_MOVE="mousemove touchmove pointermove MSPointerMove",EVENT_MOUSE_UP="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",EVENT_WHEEL="wheel mousewheel DOMMouseScroll",EVENT_DBLCLICK="dblclick"
,EVENT_RESIZE="resize"+CROPPER_NAMESPACE,EVENT_BUILD="build"+CROPPER_NAMESPACE,EVENT_BUILT="built"+CROPPER_NAMESPACE,EVENT_DRAG_START="dragstart"+CROPPER_NAMESPACE,EVENT_DRAG_MOVE="dragmove"+CROPPER_NAMESPACE,EVENT_DRAG_END="dragend"+CROPPER_NAMESPACE,EVENT_ZOOM_IN="zoomin"+CROPPER_NAMESPACE,EVENT_ZOOM_OUT="zoomout"+CROPPER_NAMESPACE,EVENT_CHANGE="change"+CROPPER_NAMESPACE,SUPPORT_CANVAS=$.isFunction($("<canvas>")[0].getContext),sqrt=Math.sqrt,min=Math.min,max=Math.max,abs=Math.abs,sin=Math.sin,cos=Math.cos,num=parseFloat,prototype={};function isNumber(n){return typeof n=="number"&&!isNaN(n)}function isUndefined(n){return typeof n=="undefined"}function toArray(obj,offset){var args=[];return isNumber(offset)&&args.push(offset),args.slice.apply(obj,args)}function proxy(fn,context){var args=toArray(arguments,2);return function(){return fn.apply(context,args.concat(toArray(arguments)))}}function isCrossOriginURL(url){var parts=url.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return parts&&(
parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port)}function addTimestamp(url){var timestamp="timestamp="+(new Date).getTime();return url+(url.indexOf("?")===-1?"?":"&")+timestamp}function getRotateValue(degree){return degree?"rotate("+degree+"deg)":"none"}function getRotatedSizes(data,reverse){var deg=abs(data.degree)%180,arc=(deg>90?180-deg:deg)*Math.PI/180,sinArc=sin(arc),cosArc=cos(arc),width=data.width,height=data.height,aspectRatio=data.aspectRatio,newWidth,newHeight;return reverse?(newWidth=width/(cosArc+sinArc/aspectRatio),newHeight=newWidth/aspectRatio):(newWidth=width*cosArc+height*sinArc,newHeight=width*sinArc+height*cosArc),{width:newWidth,height:newHeight}}function getSourceCanvas(image,data){var canvas=$("<canvas>")[0],context=canvas.getContext("2d"),width=data.naturalWidth,height=data.naturalHeight,rotate=data.rotate,rotated=getRotatedSizes({width:width,height:height,degree:rotate});return rotate?(canvas.width=rotated.width,canvas.height=
rotated.height,context.save(),context.translate(rotated.width/2,rotated.height/2),context.rotate(rotate*Math.PI/180),context.drawImage(image,-width/2,-height/2,width,height),context.restore()):(canvas.width=width,canvas.height=height,context.drawImage(image,0,0,width,height)),canvas}function Cropper(element,options){this.$element=$(element),this.options=$.extend({},Cropper.DEFAULTS,$.isPlainObject(options)&&options),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.replaced=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}prototype.init=function(){var $this=this.$element,url;if($this.is("img")){this.isImg=!0,this.originalUrl=url=$this.attr("src");if(!url)return;url=$this.prop("src")}else $this.is("canvas")&&SUPPORT_CANVAS&&(url=$this[0].toDataURL());this.load(url)},prototype.load=function(url){var options=this.options,$this=this.$element,crossOrigin,bustCacheUrl,buildEvent,$clone;if(!url)return;buildEvent=$.Event(EVENT_BUILD
),$this.one(EVENT_BUILD,options.build).trigger(buildEvent);if(buildEvent.isDefaultPrevented())return;options.checkImageOrigin&&isCrossOriginURL(url)&&(crossOrigin=' crossOrigin="anonymous"',$this.prop("crossOrigin")||(bustCacheUrl=addTimestamp(url))),this.$clone=$clone=$("<img"+(crossOrigin||"")+' src="'+(bustCacheUrl||url)+'">'),$clone.one("load",$.proxy(function(){var image=$clone[0],naturalWidth=image.naturalWidth||image.width,naturalHeight=image.naturalHeight||image.height;this.image={naturalWidth:naturalWidth,naturalHeight:naturalHeight,aspectRatio:naturalWidth/naturalHeight,rotate:0},this.url=url,this.ready=!0,this.build()},this)).one("error",function(){$clone.remove()}),$clone.addClass(CLASS_HIDE).insertAfter($this)},prototype.build=function(){var $this=this.$element,$clone=this.$clone,options=this.options,$cropper,$cropBox,$face;if(!this.ready)return;this.built&&this.unbuild(),this.$cropper=$cropper=$(Cropper.TEMPLATE),$this.addClass(CLASS_HIDDEN),$clone.removeClass(CLASS_HIDE),
this.$container=$this.parent().append($cropper),this.$canvas=$cropper.find(".cropper-canvas").append($clone),this.$dragBox=$cropper.find(".cropper-drag-box"),this.$cropBox=$cropBox=$cropper.find(".cropper-crop-box"),this.$viewBox=$cropper.find(".cropper-view-box"),this.$face=$face=$cropBox.find(".cropper-face"),this.addListeners(),this.initPreview(),options.aspectRatio=num(options.aspectRatio)||NaN,options.autoCrop?(this.cropped=!0,options.modal&&this.$dragBox.addClass(CLASS_MODAL)):$cropBox.addClass(CLASS_HIDDEN),options.guides||$cropBox.find(".cropper-dashed").addClass(CLASS_HIDDEN),options.center||$cropBox.find(".cropper-center").addClass(CLASS_HIDDEN),options.cropBoxMovable&&$face.addClass(CLASS_MOVE).data("drag","all"),options.highlight||$face.addClass(CLASS_INVISIBLE),options.background&&$cropper.addClass(CLASS_BG),options.cropBoxResizable||$cropBox.find(".cropper-line, .cropper-point").addClass(CLASS_HIDDEN),this.setDragMode(options.dragCrop?"crop":options.movable?"move":"none"),
this.built=!0,this.render(),this.setData(options.data),$this.one(EVENT_BUILT,options.built).trigger(EVENT_BUILT)},prototype.unbuild=function(){if(!this.built)return;this.built=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.removeListeners(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null},$.extend(prototype,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var $this=this.$element,$container=this.$container,$cropper=this.$cropper,options=this.options;$cropper.addClass(CLASS_HIDDEN),$this.removeClass(CLASS_HIDDEN),$cropper.css(this.container={width:max($container.width(),num(options.minContainerWidth)||200),height:max($container.height(),num(options.minContainerHeight)||100
)}),$this.addClass(CLASS_HIDDEN),$cropper.removeClass(CLASS_HIDDEN)},initCanvas:function(){var container=this.container,containerWidth=container.width,containerHeight=container.height,image=this.image,aspectRatio=image.aspectRatio,canvas={aspectRatio:aspectRatio,width:containerWidth,height:containerHeight};containerHeight*aspectRatio>containerWidth?canvas.height=containerWidth/aspectRatio:canvas.width=containerHeight*aspectRatio,canvas.oldLeft=canvas.left=(containerWidth-canvas.width)/2,canvas.oldTop=canvas.top=(containerHeight-canvas.height)/2,this.canvas=canvas,this.limitCanvas(!0,!0),this.initialImage=$.extend({},image),this.initialCanvas=$.extend({},canvas)},limitCanvas:function(size,position){var options=this.options,strict=options.strict,container=this.container,containerWidth=container.width,containerHeight=container.height,canvas=this.canvas,aspectRatio=canvas.aspectRatio,cropBox=this.cropBox,cropped=this.cropped&&cropBox,initialCanvas=this.initialCanvas||canvas,initialCanvasWidth=
initialCanvas.width,initialCanvasHeight=initialCanvas.height,minCanvasWidth,minCanvasHeight;size&&(minCanvasWidth=num(options.minCanvasWidth)||0,minCanvasHeight=num(options.minCanvasHeight)||0,minCanvasWidth?(strict&&(minCanvasWidth=max(cropped?cropBox.width:initialCanvasWidth,minCanvasWidth)),minCanvasHeight=minCanvasWidth/aspectRatio):minCanvasHeight?(strict&&(minCanvasHeight=max(cropped?cropBox.height:initialCanvasHeight,minCanvasHeight)),minCanvasWidth=minCanvasHeight*aspectRatio):strict&&(cropped?(minCanvasWidth=cropBox.width,minCanvasHeight=cropBox.height,minCanvasHeight*aspectRatio>minCanvasWidth?minCanvasWidth=minCanvasHeight*aspectRatio:minCanvasHeight=minCanvasWidth/aspectRatio):(minCanvasWidth=initialCanvasWidth,minCanvasHeight=initialCanvasHeight)),$.extend(canvas,{minWidth:minCanvasWidth,minHeight:minCanvasHeight,maxWidth:Infinity,maxHeight:Infinity})),position&&(strict?cropped?(canvas.minLeft=min(cropBox.left,cropBox.left+cropBox.width-canvas.width),canvas.minTop=min(cropBox
.top,cropBox.top+cropBox.height-canvas.height),canvas.maxLeft=cropBox.left,canvas.maxTop=cropBox.top):(canvas.minLeft=min(0,containerWidth-canvas.width),canvas.minTop=min(0,containerHeight-canvas.height),canvas.maxLeft=max(0,containerWidth-canvas.width),canvas.maxTop=max(0,containerHeight-canvas.height)):(canvas.minLeft=-canvas.width,canvas.minTop=-canvas.height,canvas.maxLeft=containerWidth,canvas.maxTop=containerHeight))},renderCanvas:function(changed){var options=this.options,canvas=this.canvas,image=this.image,aspectRatio,rotated;this.rotated&&(this.rotated=!1,rotated=getRotatedSizes({width:image.width,height:image.height,degree:image.rotate}),aspectRatio=rotated.width/rotated.height,aspectRatio!==canvas.aspectRatio&&(canvas.left-=(rotated.width-canvas.width)/2,canvas.top-=(rotated.height-canvas.height)/2,canvas.width=rotated.width,canvas.height=rotated.height,canvas.aspectRatio=aspectRatio,this.limitCanvas(!0,!1)));if(canvas.width>canvas.maxWidth||canvas.width<canvas.minWidth)canvas
.left=canvas.oldLeft;if(canvas.height>canvas.maxHeight||canvas.height<canvas.minHeight)canvas.top=canvas.oldTop;canvas.width=min(max(canvas.width,canvas.minWidth),canvas.maxWidth),canvas.height=min(max(canvas.height,canvas.minHeight),canvas.maxHeight),this.limitCanvas(!1,!0),canvas.oldLeft=canvas.left=min(max(canvas.left,canvas.minLeft),canvas.maxLeft),canvas.oldTop=canvas.top=min(max(canvas.top,canvas.minTop),canvas.maxTop),this.$canvas.css({width:canvas.width,height:canvas.height,left:canvas.left,top:canvas.top}),this.renderImage(),this.cropped&&options.strict&&this.limitCropBox(!0,!0),changed&&this.output()},renderImage:function(){var canvas=this.canvas,image=this.image,reversed;image.rotate&&(reversed=getRotatedSizes({width:canvas.width,height:canvas.height,degree:image.rotate,aspectRatio:image.aspectRatio},!0)),$.extend(image,reversed?{width:reversed.width,height:reversed.height,left:(canvas.width-reversed.width)/2,top:(canvas.height-reversed.height)/2}:{width:canvas.width,height:canvas
.height,left:0,top:0}),this.$clone.css({width:image.width,height:image.height,marginLeft:image.left,marginTop:image.top,transform:getRotateValue(image.rotate)})},initCropBox:function(){var options=this.options,canvas=this.canvas,aspectRatio=options.aspectRatio,autoCropArea=num(options.autoCropArea)||.8,cropBox={width:canvas.width,height:canvas.height};aspectRatio&&(canvas.height*aspectRatio>canvas.width?cropBox.height=cropBox.width/aspectRatio:cropBox.width=cropBox.height*aspectRatio),this.cropBox=cropBox,this.limitCropBox(!0,!0),cropBox.width=min(max(cropBox.width,cropBox.minWidth),cropBox.maxWidth),cropBox.height=min(max(cropBox.height,cropBox.minHeight),cropBox.maxHeight),cropBox.width=max(cropBox.minWidth,cropBox.width*autoCropArea),cropBox.height=max(cropBox.minHeight,cropBox.height*autoCropArea),cropBox.oldLeft=cropBox.left=canvas.left+(canvas.width-cropBox.width)/2,cropBox.oldTop=cropBox.top=canvas.top+(canvas.height-cropBox.height)/2,this.initialCropBox=$.extend({},cropBox)},limitCropBox
:function(size,position){var options=this.options,strict=options.strict,container=this.container,containerWidth=container.width,containerHeight=container.height,canvas=this.canvas,cropBox=this.cropBox,aspectRatio=options.aspectRatio,minCropBoxWidth,minCropBoxHeight;size&&(minCropBoxWidth=num(options.minCropBoxWidth)||0,minCropBoxHeight=num(options.minCropBoxHeight)||0,cropBox.minWidth=min(containerWidth,minCropBoxWidth),cropBox.minHeight=min(containerHeight,minCropBoxHeight),cropBox.maxWidth=min(containerWidth,strict?canvas.width:containerWidth),cropBox.maxHeight=min(containerHeight,strict?canvas.height:containerHeight),aspectRatio&&(cropBox.maxHeight*aspectRatio>cropBox.maxWidth?(cropBox.minHeight=cropBox.minWidth/aspectRatio,cropBox.maxHeight=cropBox.maxWidth/aspectRatio):(cropBox.minWidth=cropBox.minHeight*aspectRatio,cropBox.maxWidth=cropBox.maxHeight*aspectRatio)),cropBox.minWidth=min(cropBox.maxWidth,cropBox.minWidth),cropBox.minHeight=min(cropBox.maxHeight,cropBox.minHeight)),position&&
(strict?(cropBox.minLeft=max(0,canvas.left),cropBox.minTop=max(0,canvas.top),cropBox.maxLeft=min(containerWidth,canvas.left+canvas.width)-cropBox.width,cropBox.maxTop=min(containerHeight,canvas.top+canvas.height)-cropBox.height):(cropBox.minLeft=0,cropBox.minTop=0,cropBox.maxLeft=containerWidth-cropBox.width,cropBox.maxTop=containerHeight-cropBox.height))},renderCropBox:function(){var options=this.options,container=this.container,containerWidth=container.width,containerHeight=container.height,cropBox=this.cropBox;if(cropBox.width>cropBox.maxWidth||cropBox.width<cropBox.minWidth)cropBox.left=cropBox.oldLeft;if(cropBox.height>cropBox.maxHeight||cropBox.height<cropBox.minHeight)cropBox.top=cropBox.oldTop;cropBox.width=min(max(cropBox.width,cropBox.minWidth),cropBox.maxWidth),cropBox.height=min(max(cropBox.height,cropBox.minHeight),cropBox.maxHeight),this.limitCropBox(!1,!0),cropBox.oldLeft=cropBox.left=min(max(cropBox.left,cropBox.minLeft),cropBox.maxLeft),cropBox.oldTop=cropBox.top=min(max
(cropBox.top,cropBox.minTop),cropBox.maxTop),options.movable&&options.cropBoxMovable&&this.$face.data("drag",cropBox.width===containerWidth&&cropBox.height===containerHeight?"move":"all"),this.$cropBox.css({width:cropBox.width,height:cropBox.height,left:cropBox.left,top:cropBox.top}),this.cropped&&options.strict&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){var options=this.options,$this=this.$element;this.preview(),options.crop&&options.crop.call($this,this.getData()),$this.trigger(EVENT_CHANGE)}}),prototype.initPreview=function(){var url=this.url;this.$preview=$(this.options.preview),this.$viewBox.html('<img src="'+url+'">'),this.$preview.each(function(){var $this=$(this);$this.data(CROPPER_PREVIEW,{width:$this.width(),height:$this.height(),original:$this.html()}).html('<img src="'+url+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})},prototype
.resetPreview=function(){this.$preview.each(function(){var $this=$(this);$this.html($this.data(CROPPER_PREVIEW).original).removeData(CROPPER_PREVIEW)})},prototype.preview=function(){var image=this.image,canvas=this.canvas,cropBox=this.cropBox,width=image.width,height=image.height,left=cropBox.left-canvas.left-image.left,top=cropBox.top-canvas.top-image.top,rotate=image.rotate;if(!this.cropped||this.disabled)return;this.$viewBox.find("img").css({width:width,height:height,marginLeft:-left,marginTop:-top,transform:getRotateValue(rotate)}),this.$preview.each(function(){var $this=$(this),data=$this.data(CROPPER_PREVIEW),ratio=data.width/cropBox.width,newWidth=data.width,newHeight=cropBox.height*ratio;newHeight>data.height&&(ratio=data.height/cropBox.height,newWidth=cropBox.width*ratio,newHeight=data.height),$this.width(newWidth).height(newHeight).find("img").css({width:width*ratio,height:height*ratio,marginLeft:-left*ratio,marginTop:-top*ratio,transform:getRotateValue(rotate)})})},prototype.
addListeners=function(){var options=this.options,$this=this.$element,$cropper=this.$cropper;$.isFunction(options.dragstart)&&$this.on(EVENT_DRAG_START,options.dragstart),$.isFunction(options.dragmove)&&$this.on(EVENT_DRAG_MOVE,options.dragmove),$.isFunction(options.dragend)&&$this.on(EVENT_DRAG_END,options.dragend),$.isFunction(options.zoomin)&&$this.on(EVENT_ZOOM_IN,options.zoomin),$.isFunction(options.zoomout)&&$this.on(EVENT_ZOOM_OUT,options.zoomout),$.isFunction(options.change)&&$this.on(EVENT_CHANGE,options.change),$cropper.on(EVENT_MOUSE_DOWN,$.proxy(this.dragstart,this)),options.zoomable&&options.mouseWheelZoom&&$cropper.on(EVENT_WHEEL,$.proxy(this.wheel,this)),options.doubleClickToggle&&$cropper.on(EVENT_DBLCLICK,$.proxy(this.dblclick,this)),$document.on(EVENT_MOUSE_MOVE,this._dragmove=proxy(this.dragmove,this)).on(EVENT_MOUSE_UP,this._dragend=proxy(this.dragend,this)),options.responsive&&$window.on(EVENT_RESIZE,this._resize=proxy(this.resize,this))},prototype.removeListeners=function(
){var options=this.options,$this=this.$element,$cropper=this.$cropper;$.isFunction(options.dragstart)&&$this.off(EVENT_DRAG_START,options.dragstart),$.isFunction(options.dragmove)&&$this.off(EVENT_DRAG_MOVE,options.dragmove),$.isFunction(options.dragend)&&$this.off(EVENT_DRAG_END,options.dragend),$.isFunction(options.zoomin)&&$this.off(EVENT_ZOOM_IN,options.zoomin),$.isFunction(options.zoomout)&&$this.off(EVENT_ZOOM_OUT,options.zoomout),$.isFunction(options.change)&&$this.off(EVENT_CHANGE,options.change),$cropper.off(EVENT_MOUSE_DOWN,this.dragstart),options.zoomable&&options.mouseWheelZoom&&$cropper.off(EVENT_WHEEL,this.wheel),options.doubleClickToggle&&$cropper.off(EVENT_DBLCLICK,this.dblclick),$document.off(EVENT_MOUSE_MOVE,this._dragmove).off(EVENT_MOUSE_UP,this._dragend),options.responsive&&$window.off(EVENT_RESIZE,this._resize)},$.extend(prototype,{resize:function(){var $container=this.$container,container=this.container,canvasData,cropBoxData,ratio;if(this.disabled||!container)return;
ratio=$container.width()/container.width;if(ratio!==1||$container.height()!==container.height)canvasData=this.getCanvasData(),cropBoxData=this.getCropBoxData(),this.render(),this.setCanvasData($.each(canvasData,function(i,n){canvasData[i]=n*ratio})),this.setCropBoxData($.each(cropBoxData,function(i,n){cropBoxData[i]=n*ratio}))},dblclick:function(){if(this.disabled)return;this.$dragBox.hasClass(CLASS_CROP)?this.setDragMode("move"):this.setDragMode("crop")},wheel:function(event){var e=event.originalEvent,delta=1;if(this.disabled)return;event.preventDefault(),e.deltaY?delta=e.deltaY>0?1:-1:e.wheelDelta?delta=-e.wheelDelta/120:e.detail&&(delta=e.detail>0?1:-1),this.zoom(-delta*.1)},dragstart:function(event){var options=this.options,originalEvent=event.originalEvent,touches=originalEvent&&originalEvent.touches,e=event,dragType,dragStartEvent,touchesLength;if(this.disabled)return;if(touches){touchesLength=touches.length;if(touchesLength>1){if(!options.zoomable||!options.touchDragZoom||touchesLength!==2
)return;e=touches[1],this.startX2=e.pageX,this.startY2=e.pageY,dragType="zoom"}e=touches[0]}dragType=dragType||$(e.target).data("drag");if(REGEXP_DRAG_TYPES.test(dragType)){event.preventDefault(),dragStartEvent=$.Event(EVENT_DRAG_START,{originalEvent:originalEvent,dragType:dragType}),this.$element.trigger(dragStartEvent);if(dragStartEvent.isDefaultPrevented())return;this.dragType=dragType,this.cropping=!1,this.startX=e.pageX,this.startY=e.pageY,dragType==="crop"&&(this.cropping=!0,this.$dragBox.addClass(CLASS_MODAL))}},dragmove:function(event){var options=this.options,originalEvent=event.originalEvent,touches=originalEvent&&originalEvent.touches,e=event,dragType=this.dragType,dragMoveEvent,touchesLength;if(this.disabled)return;if(touches){touchesLength=touches.length;if(touchesLength>1){if(!options.zoomable||!options.touchDragZoom||touchesLength!==2)return;e=touches[1],this.endX2=e.pageX,this.endY2=e.pageY}e=touches[0]}if(dragType){event.preventDefault(),dragMoveEvent=$.Event(EVENT_DRAG_MOVE
,{originalEvent:originalEvent,dragType:dragType}),this.$element.trigger(dragMoveEvent);if(dragMoveEvent.isDefaultPrevented())return;this.endX=e.pageX,this.endY=e.pageY,this.change(e.shiftKey)}},dragend:function(event){var dragType=this.dragType,dragEndEvent;if(this.disabled)return;if(dragType){event.preventDefault(),dragEndEvent=$.Event(EVENT_DRAG_END,{originalEvent:event.originalEvent,dragType:dragType}),this.$element.trigger(dragEndEvent);if(dragEndEvent.isDefaultPrevented())return;this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(CLASS_MODAL,this.cropped&&this.options.modal)),this.dragType=""}}}),$.extend(prototype,{crop:function(){if(!this.built||this.disabled)return;this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(CLASS_MODAL),this.$cropBox.removeClass(CLASS_HIDDEN)),this.setCropBoxData(this.initialCropBox)},reset:function(){if(!this.built||this.disabled)return;this.image=$.extend({},this.initialImage),this.canvas=$.extend(
{},this.initialCanvas),this.cropBox=$.extend({},this.initialCropBox),this.renderCanvas(),this.cropped&&this.renderCropBox()},clear:function(){if(!this.cropped||this.disabled)return;$.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(CLASS_MODAL),this.$cropBox.addClass(CLASS_HIDDEN)},destroy:function(){var $this=this.$element;this.ready?(this.isImg&&$this.attr("src",this.originalUrl),this.unbuild(),$this.removeClass(CLASS_HIDDEN)):this.$clone&&this.$clone.remove(),$this.removeData("cropper")},replace:function(url){!this.disabled&&url&&(this.isImg&&this.$element.attr("src",url),this.options.data=null,this.load(url))},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(CLASS_DISABLED))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(CLASS_DISABLED))},move:function(offsetX,offsetY){var canvas=this.canvas;this.built&&!this.disabled&&this.options
.movable&&isNumber(offsetX)&&isNumber(offsetY)&&(canvas.left+=offsetX,canvas.top+=offsetY,this.renderCanvas(!0))},zoom:function(delta){var canvas=this.canvas,zoomEvent,width,height;delta=num(delta);if(delta&&this.built&&!this.disabled&&this.options.zoomable){zoomEvent=delta>0?$.Event(EVENT_ZOOM_IN):$.Event(EVENT_ZOOM_OUT),this.$element.trigger(zoomEvent);if(zoomEvent.isDefaultPrevented())return;delta=delta<=-1?1/(1-delta):delta<=1?1+delta:delta,width=canvas.width*delta,height=canvas.height*delta,canvas.left-=(width-canvas.width)/2,canvas.top-=(height-canvas.height)/2,canvas.width=width,canvas.height=height,this.renderCanvas(!0),this.setDragMode("move")}},rotate:function(degree){var image=this.image;degree=num(degree),degree&&this.built&&!this.disabled&&this.options.rotatable&&(image.rotate=(image.rotate+degree)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(rounded){var cropBox=this.cropBox,canvas=this.canvas,image=this.image,ratio,data;return this.built&&this.cropped?(data=
{x:cropBox.left-canvas.left,y:cropBox.top-canvas.top,width:cropBox.width,height:cropBox.height},ratio=image.width/image.naturalWidth,$.each(data,function(i,n){n/=ratio,data[i]=rounded?Math.round(n):n})):data={x:0,y:0,width:0,height:0},data.rotate=this.ready?image.rotate:0,data},setData:function(data){var image=this.image,canvas=this.canvas,cropBoxData={},ratio;this.built&&!this.disabled&&$.isPlainObject(data)&&(isNumber(data.rotate)&&data.rotate!==image.rotate&&this.options.rotatable&&(image.rotate=data.rotate,this.rotated=!0,this.renderCanvas(!0)),ratio=image.width/image.naturalWidth,isNumber(data.x)&&(cropBoxData.left=data.x*ratio+canvas.left),isNumber(data.y)&&(cropBoxData.top=data.y*ratio+canvas.top),isNumber(data.width)&&(cropBoxData.width=data.width*ratio),isNumber(data.height)&&(cropBoxData.height=data.height*ratio),this.setCropBoxData(cropBoxData))},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData
:function(){var canvas=this.canvas,data;return this.built&&(data={left:canvas.left,top:canvas.top,width:canvas.width,height:canvas.height}),data||{}},setCanvasData:function(data){var canvas=this.canvas,aspectRatio=canvas.aspectRatio;this.built&&!this.disabled&&$.isPlainObject(data)&&(isNumber(data.left)&&(canvas.left=data.left),isNumber(data.top)&&(canvas.top=data.top),isNumber(data.width)?(canvas.width=data.width,canvas.height=data.width/aspectRatio):isNumber(data.height)&&(canvas.height=data.height,canvas.width=data.height*aspectRatio),this.renderCanvas(!0))},getCropBoxData:function(){var cropBox=this.cropBox,data;return this.built&&this.cropped&&(data={left:cropBox.left,top:cropBox.top,width:cropBox.width,height:cropBox.height}),data||{}},setCropBoxData:function(data){var cropBox=this.cropBox,aspectRatio=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&$.isPlainObject(data)&&(isNumber(data.left)&&(cropBox.left=data.left),isNumber(data.top)&&(cropBox.top=data.top),isNumber
(data.width)&&(cropBox.width=data.width),isNumber(data.height)&&(cropBox.height=data.height),aspectRatio&&(isNumber(data.width)?cropBox.height=cropBox.width/aspectRatio:isNumber(data.height)&&(cropBox.width=cropBox.height*aspectRatio)),this.renderCropBox())},getCroppedCanvas:function(options){var originalWidth,originalHeight,canvasWidth,canvasHeight,scaledWidth,scaledHeight,scaledRatio,aspectRatio,canvas,context,data;if(!this.built||!this.cropped||!SUPPORT_CANVAS)return;return $.isPlainObject(options)||(options={}),data=this.getData(),originalWidth=data.width,originalHeight=data.height,aspectRatio=originalWidth/originalHeight,$.isPlainObject(options)&&(scaledWidth=options.width,scaledHeight=options.height,scaledWidth?(scaledHeight=scaledWidth/aspectRatio,scaledRatio=scaledWidth/originalWidth):scaledHeight&&(scaledWidth=scaledHeight*aspectRatio,scaledRatio=scaledHeight/originalHeight)),canvasWidth=scaledWidth||originalWidth,canvasHeight=scaledHeight||originalHeight,canvas=$("<canvas>")[0
],canvas.width=canvasWidth,canvas.height=canvasHeight,context=canvas.getContext("2d"),options.fillColor&&(context.fillStyle=options.fillColor,context.fillRect(0,0,canvasWidth,canvasHeight)),context.drawImage.apply(context,function(){var source=getSourceCanvas(this.$clone[0],this.image),sourceWidth=source.width,sourceHeight=source.height,args=[source],srcX=data.x,srcY=data.y,srcWidth,srcHeight,dstX,dstY,dstWidth,dstHeight;return srcX<=-originalWidth||srcX>sourceWidth?srcX=srcWidth=dstX=dstWidth=0:srcX<=0?(dstX=-srcX,srcX=0,srcWidth=dstWidth=min(sourceWidth,originalWidth+srcX)):srcX<=sourceWidth&&(dstX=0,srcWidth=dstWidth=min(originalWidth,sourceWidth-srcX)),srcWidth<=0||srcY<=-originalHeight||srcY>sourceHeight?srcY=srcHeight=dstY=dstHeight=0:srcY<=0?(dstY=-srcY,srcY=0,srcHeight=dstHeight=min(sourceHeight,originalHeight+srcY)):srcY<=sourceHeight&&(dstY=0,srcHeight=dstHeight=min(originalHeight,sourceHeight-srcY)),args.push(srcX,srcY,srcWidth,srcHeight),scaledRatio&&(dstX*=scaledRatio,dstY*=
scaledRatio,dstWidth*=scaledRatio,dstHeight*=scaledRatio),dstWidth>0&&dstHeight>0&&args.push(dstX,dstY,dstWidth,dstHeight),args}.call(this)),canvas},setAspectRatio:function(aspectRatio){var options=this.options;!this.disabled&&!isUndefined(aspectRatio)&&(options.aspectRatio=num(aspectRatio)||NaN,this.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(mode){var options=this.options,croppable,movable;this.ready&&!this.disabled&&(croppable=options.dragCrop&&mode==="crop",movable=options.movable&&mode==="move",mode=croppable||movable?mode:"none",this.$dragBox.data("drag",mode).toggleClass(CLASS_CROP,croppable).toggleClass(CLASS_MOVE,movable),options.cropBoxMovable||this.$face.data("drag",mode).toggleClass(CLASS_CROP,croppable).toggleClass(CLASS_MOVE,movable))}}),prototype.change=function(shiftKey){var dragType=this.dragType,options=this.options,canvas=this.canvas,container=this.container,cropBox=this.cropBox,width=cropBox.width,height=cropBox.height,left=cropBox
.left,top=cropBox.top,right=left+width,bottom=top+height,minLeft=0,minTop=0,maxWidth=container.width,maxHeight=container.height,renderable=!0,aspectRatio=options.aspectRatio,range={x:this.endX-this.startX,y:this.endY-this.startY},offset;!aspectRatio&&shiftKey&&(aspectRatio=width&&height?width/height:1),options.strict&&(minLeft=cropBox.minLeft,minTop=cropBox.minTop,maxWidth=minLeft+min(container.width,canvas.width),maxHeight=minTop+min(container.height,canvas.height)),aspectRatio&&(range.X=range.y*aspectRatio,range.Y=range.x/aspectRatio);switch(dragType){case"all":left+=range.x,top+=range.y;break;case"e":if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}width+=range.x,aspectRatio&&(height=width/aspectRatio,top-=range.Y/2),width<0&&(dragType="w",width=0);break;case"n":if(range.y<=0&&(top<=minTop||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}height-=range.y,top+=range.y,aspectRatio&&(width=height*aspectRatio,left+=range
.X/2),height<0&&(dragType="s",height=0);break;case"w":if(range.x<=0&&(left<=minLeft||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}width-=range.x,left+=range.x,aspectRatio&&(height=width/aspectRatio,top+=range.Y/2),width<0&&(dragType="e",width=0);break;case"s":if(range.y>=0&&(bottom>=maxHeight||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}height+=range.y,aspectRatio&&(width=height*aspectRatio,left-=range.X/2),height<0&&(dragType="n",height=0);break;case"ne":if(aspectRatio){if(range.y<=0&&(top<=minTop||right>=maxWidth)){renderable=!1;break}height-=range.y,top+=range.y,width=height*aspectRatio}else range.x>=0?right<maxWidth?width+=range.x:range.y<=0&&top<=minTop&&(renderable=!1):width+=range.x,range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(dragType="sw",height=0,width=0):width<0?(dragType="nw",width=0):height<0&&(dragType="se",height=0);break;case"nw":if(aspectRatio){if(range.y<=0&&(top<=
minTop||left<=minLeft)){renderable=!1;break}height-=range.y,top+=range.y,width=height*aspectRatio,left+=range.X}else range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y<=0&&top<=minTop&&(renderable=!1):(width-=range.x,left+=range.x),range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(dragType="se",height=0,width=0):width<0?(dragType="ne",width=0):height<0&&(dragType="sw",height=0);break;case"sw":if(aspectRatio){if(range.x<=0&&(left<=minLeft||bottom>=maxHeight)){renderable=!1;break}width-=range.x,left+=range.x,height=width/aspectRatio}else range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y>=0&&bottom>=maxHeight&&(renderable=!1):(width-=range.x,left+=range.x),range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(dragType="ne",height=0,width=0):width<0?(dragType="se",width=0):height<0&&(dragType="nw",height=0);break;case"se":if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight
)){renderable=!1;break}width+=range.x,height=width/aspectRatio}else range.x>=0?right<maxWidth?width+=range.x:range.y>=0&&bottom>=maxHeight&&(renderable=!1):width+=range.x,range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(dragType="nw",height=0,width=0):width<0?(dragType="sw",width=0):height<0&&(dragType="ne",height=0);break;case"move":canvas.left+=range.x,canvas.top+=range.y,this.renderCanvas(!0),renderable=!1;break;case"zoom":this.zoom(function(x1,y1,x2,y2){var z1=sqrt(x1*x1+y1*y1),z2=sqrt(x2*x2+y2*y2);return(z2-z1)/z1}(abs(this.startX-this.startX2),abs(this.startY-this.startY2),abs(this.endX-this.endX2),abs(this.endY-this.endY2))),this.startX2=this.endX2,this.startY2=this.endY2,renderable=!1;break;case"crop":range.x&&range.y&&(offset=this.$cropper.offset(),left=this.startX-offset.left,top=this.startY-offset.top,width=cropBox.minWidth,height=cropBox.minHeight,range.x>0?range.y>0?dragType="se":(dragType="ne",top-=height):range.y>0?(dragType="sw",left-=width
):(dragType="nw",left-=width,top-=height),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(CLASS_HIDDEN)))}renderable&&(cropBox.width=width,cropBox.height=height,cropBox.left=left,cropBox.top=top,this.dragType=dragType,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},$.extend(Cropper.prototype,prototype),Cropper.DEFAULTS={aspectRatio:NaN,autoCropArea:.8,crop:null,data:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,cropBoxMovable:!0,cropBoxResizable:!0,doubleClickToggle:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null,change:null},Cropper.setDefaults=function(options){$.extend(Cropper.DEFAULTS,options)},Cropper.TEMPLATE=function(source,words){return words=
words.split(","),source.replace(/\d+/g,function(i){return words[i]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-2-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,drag,data,point,cropper,class,line,dashed,box"),Cropper.other=$.fn.cropper,$.fn.cropper=function(options){var args=toArray(arguments,1),result;return this.each(function(){var $this=$(this),data=$this.data("cropper"),fn;if(!data){if(/destroy/.test(options))return;$this.data("cropper",data=new Cropper(this,options))}typeof options=="string"&&$.isFunction(fn=data[options])&&(result=fn.apply(data,args))}),isUndefined
(result)?this:result},$.fn.cropper.Constructor=Cropper,$.fn.cropper.setDefaults=Cropper.setDefaults,$.fn.cropper.noConflict=function(){return $.fn.cropper=Cropper.other,this}}),function(factory){typeof define=="function"&&define.amd?define("ngCropper",["jquery"],factory):typeof exports=="object"?factory(require("jquery")):factory(jQuery)}(function($){var $window=$(window),$document=$(document),location=window.location,CROPPER_NAMESPACE=".cropper",CROPPER_PREVIEW="preview"+CROPPER_NAMESPACE,REGEXP_DRAG_TYPES=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,CLASS_MODAL="cropper-modal",CLASS_HIDE="cropper-hide",CLASS_HIDDEN="cropper-hidden",CLASS_INVISIBLE="cropper-invisible",CLASS_MOVE="cropper-move",CLASS_CROP="cropper-crop",CLASS_DISABLED="cropper-disabled",CLASS_BG="cropper-bg",EVENT_MOUSE_DOWN="mousedown touchstart",EVENT_MOUSE_MOVE="mousemove touchmove",EVENT_MOUSE_UP="mouseup mouseleave touchend touchleave touchcancel",EVENT_WHEEL="wheel mousewheel DOMMouseScroll",EVENT_DBLCLICK="dblclick"
,EVENT_RESIZE="resize"+CROPPER_NAMESPACE,EVENT_BUILD="build"+CROPPER_NAMESPACE,EVENT_BUILT="built"+CROPPER_NAMESPACE,EVENT_DRAG_START="dragstart"+CROPPER_NAMESPACE,EVENT_DRAG_MOVE="dragmove"+CROPPER_NAMESPACE,EVENT_DRAG_END="dragend"+CROPPER_NAMESPACE,EVENT_ZOOM_IN="zoomin"+CROPPER_NAMESPACE,EVENT_ZOOM_OUT="zoomout"+CROPPER_NAMESPACE,EVENT_CHANGE="change"+CROPPER_NAMESPACE,SUPPORT_CANVAS=$.isFunction($("<canvas>")[0].getContext),sqrt=Math.sqrt,min=Math.min,max=Math.max,abs=Math.abs,sin=Math.sin,cos=Math.cos,num=parseFloat,prototype={};function isNumber(n){return typeof n=="number"&&!isNaN(n)}function isUndefined(n){return typeof n=="undefined"}function toArray(obj,offset){var args=[];return isNumber(offset)&&args.push(offset),args.slice.apply(obj,args)}function proxy(fn,context){var args=toArray(arguments,2);return function(){return fn.apply(context,args.concat(toArray(arguments)))}}function isCrossOriginURL(url){var parts=url.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return parts&&(
parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port)}function addTimestamp(url){var timestamp="timestamp="+(new Date).getTime();return url+(url.indexOf("?")===-1?"?":"&")+timestamp}function getRotateValue(degree){return degree?"rotate("+degree+"deg)":"none"}function getRotatedSizes(data,reverse){var deg=abs(data.degree)%180,arc=(deg>90?180-deg:deg)*Math.PI/180,sinArc=sin(arc),cosArc=cos(arc),width=data.width,height=data.height,aspectRatio=data.aspectRatio,newWidth,newHeight;return reverse?(newWidth=width/(cosArc+sinArc/aspectRatio),newHeight=newWidth/aspectRatio):(newWidth=width*cosArc+height*sinArc,newHeight=width*sinArc+height*cosArc),{width:newWidth,height:newHeight}}function getSourceCanvas(image,data){var canvas=$("<canvas>")[0],context=canvas.getContext("2d"),width=data.naturalWidth,height=data.naturalHeight,rotate=data.rotate,rotated=getRotatedSizes({width:width,height:height,degree:rotate});return rotate?(canvas.width=rotated.width,canvas.height=
rotated.height,context.save(),context.translate(rotated.width/2,rotated.height/2),context.rotate(rotate*Math.PI/180),context.drawImage(image,-width/2,-height/2,width,height),context.restore()):(canvas.width=width,canvas.height=height,context.drawImage(image,0,0,width,height)),canvas}function Cropper(element,options){this.$element=$(element),this.options=$.extend({},Cropper.DEFAULTS,$.isPlainObject(options)&&options),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.canvas=null,this.cropBox=null,this.load()}prototype.load=function(url){var options=this.options,$this=this.$element,crossOrigin,bustCacheUrl,buildEvent,$clone;if(!url)if($this.is("img")){if(!$this.attr("src"))return;url=$this.prop("src")}else $this.is("canvas")&&SUPPORT_CANVAS&&(url=$this[0].toDataURL());if(!url)return;buildEvent=$.Event(EVENT_BUILD),$this.one(EVENT_BUILD,options.build).trigger(buildEvent);if(buildEvent.isDefaultPrevented())return;options.checkImageOrigin&&isCrossOriginURL(url)&&
(crossOrigin=' crossOrigin="anonymous"',$this.prop("crossOrigin")||(bustCacheUrl=addTimestamp(url))),this.$clone=$clone=$("<img"+(crossOrigin||"")+' src="'+(bustCacheUrl||url)+'">'),$clone.one("load",$.proxy(function(){var image=$clone[0],naturalWidth=image.naturalWidth||image.width,naturalHeight=image.naturalHeight||image.height;this.image={naturalWidth:naturalWidth,naturalHeight:naturalHeight,aspectRatio:naturalWidth/naturalHeight,rotate:0},this.url=url,this.ready=!0,this.build()},this)).one("error",function(){$clone.remove()}),$clone.addClass(CLASS_HIDE).insertAfter($this)},prototype.build=function(){var $this=this.$element,$clone=this.$clone,options=this.options,$cropper,$cropBox,$face;if(!this.ready)return;this.built&&this.unbuild(),this.$cropper=$cropper=$(Cropper.TEMPLATE),$this.addClass(CLASS_HIDDEN),$clone.removeClass(CLASS_HIDE),this.$container=$this.parent().append($cropper),this.$canvas=$cropper.find(".cropper-canvas").append($clone),this.$dragBox=$cropper.find(".cropper-drag-box"
),this.$cropBox=$cropBox=$cropper.find(".cropper-crop-box"),this.$viewBox=$cropper.find(".cropper-view-box"),this.$face=$face=$cropBox.find(".cropper-face"),this.addListeners(),this.initPreview(),options.aspectRatio=num(options.aspectRatio)||NaN,options.autoCrop?(this.cropped=!0,options.modal&&this.$dragBox.addClass(CLASS_MODAL)):$cropBox.addClass(CLASS_HIDDEN),options.background&&$cropper.addClass(CLASS_BG),options.highlight||$face.addClass(CLASS_INVISIBLE),options.guides||$cropBox.find(".cropper-dashed").addClass(CLASS_HIDDEN),options.cropBoxMovable&&$face.addClass(CLASS_MOVE).data("drag","all"),options.cropBoxResizable||$cropBox.find(".cropper-line, .cropper-point").addClass(CLASS_HIDDEN),this.setDragMode(options.dragCrop?"crop":options.movable?"move":"none"),this.built=!0,this.render(),this.setData(options.data),$this.one(EVENT_BUILT,options.built).trigger(EVENT_BUILT)},prototype.unbuild=function(){if(!this.built)return;this.built=!1,this.initialImage=null,this.initialCanvas=null,this
.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.removeListeners(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null},$.extend(prototype,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var $this=this.$element,$container=this.$container,$cropper=this.$cropper,options=this.options;$cropper.addClass(CLASS_HIDDEN),$this.removeClass(CLASS_HIDDEN),$cropper.css(this.container={width:max($container.width(),num(options.minContainerWidth)||200),height:max($container.height(),num(options.minContainerHeight)||100)}),$this.addClass(CLASS_HIDDEN),$cropper.removeClass(CLASS_HIDDEN)},initCanvas:function(){var container=this.container,containerWidth=container.width,containerHeight=container.height,image=this.image,aspectRatio=image.aspectRatio
,canvas={aspectRatio:aspectRatio,width:containerWidth,height:containerHeight};containerHeight*aspectRatio>containerWidth?canvas.height=containerWidth/aspectRatio:canvas.width=containerHeight*aspectRatio,canvas.oldLeft=canvas.left=(containerWidth-canvas.width)/2,canvas.oldTop=canvas.top=(containerHeight-canvas.height)/2,this.canvas=canvas,this.limitCanvas(!0,!0),this.initialImage=$.extend({},image),this.initialCanvas=$.extend({},canvas)},limitCanvas:function(size,position){var options=this.options,strict=options.strict,container=this.container,containerWidth=container.width,containerHeight=container.height,canvas=this.canvas,aspectRatio=canvas.aspectRatio,cropBox=this.cropBox,cropped=this.cropped&&cropBox,initialCanvas=this.initialCanvas||canvas,initialCanvasWidth=initialCanvas.width,initialCanvasHeight=initialCanvas.height,minCanvasWidth,minCanvasHeight;size&&(minCanvasWidth=num(options.minCanvasWidth)||0,minCanvasHeight=num(options.minCanvasHeight)||0,minCanvasWidth?(strict&&(minCanvasWidth=
max(cropped?cropBox.width:initialCanvasWidth,minCanvasWidth)),minCanvasHeight=minCanvasWidth/aspectRatio):minCanvasHeight?(strict&&(minCanvasHeight=max(cropped?cropBox.height:initialCanvasHeight,minCanvasHeight)),minCanvasWidth=minCanvasHeight*aspectRatio):strict&&(cropped?(minCanvasWidth=cropBox.width,minCanvasHeight=cropBox.height,minCanvasHeight*aspectRatio>minCanvasWidth?minCanvasWidth=minCanvasHeight*aspectRatio:minCanvasHeight=minCanvasWidth/aspectRatio):(minCanvasWidth=initialCanvasWidth,minCanvasHeight=initialCanvasHeight)),$.extend(canvas,{minWidth:minCanvasWidth,minHeight:minCanvasHeight,maxWidth:Infinity,maxHeight:Infinity})),position&&(strict?cropped?(canvas.minLeft=min(cropBox.left,cropBox.left+cropBox.width-canvas.width),canvas.minTop=min(cropBox.top,cropBox.top+cropBox.height-canvas.height),canvas.maxLeft=cropBox.left,canvas.maxTop=cropBox.top):(canvas.minLeft=min(0,containerWidth-canvas.width),canvas.minTop=min(0,containerHeight-canvas.height),canvas.maxLeft=max(0,containerWidth-
canvas.width),canvas.maxTop=max(0,containerHeight-canvas.height)):(canvas.minLeft=-canvas.width,canvas.minTop=-canvas.height,canvas.maxLeft=containerWidth,canvas.maxTop=containerHeight))},renderCanvas:function(changed){var options=this.options,canvas=this.canvas,image=this.image,aspectRatio,rotated;this.rotated&&(this.rotated=!1,rotated=getRotatedSizes({width:image.width,height:image.height,degree:image.rotate}),aspectRatio=rotated.width/rotated.height,aspectRatio!==canvas.aspectRatio&&(canvas.left-=(rotated.width-canvas.width)/2,canvas.top-=(rotated.height-canvas.height)/2,canvas.width=rotated.width,canvas.height=rotated.height,canvas.aspectRatio=aspectRatio,this.limitCanvas(!0,!1)));if(canvas.width>canvas.maxWidth||canvas.width<canvas.minWidth)canvas.left=canvas.oldLeft;if(canvas.height>canvas.maxHeight||canvas.height<canvas.minHeight)canvas.top=canvas.oldTop;canvas.width=min(max(canvas.width,canvas.minWidth),canvas.maxWidth),canvas.height=min(max(canvas.height,canvas.minHeight),canvas
.maxHeight),this.limitCanvas(!1,!0),canvas.oldLeft=canvas.left=min(max(canvas.left,canvas.minLeft),canvas.maxLeft),canvas.oldTop=canvas.top=min(max(canvas.top,canvas.minTop),canvas.maxTop),this.$canvas.css({width:canvas.width,height:canvas.height,left:canvas.left,top:canvas.top}),this.renderImage(),this.cropped&&options.strict&&this.limitCropBox(!0,!0),changed&&this.output()},renderImage:function(){var canvas=this.canvas,image=this.image,reversed;image.rotate&&(reversed=getRotatedSizes({width:canvas.width,height:canvas.height,degree:image.rotate,aspectRatio:image.aspectRatio},!0)),$.extend(image,reversed?{width:reversed.width,height:reversed.height,left:(canvas.width-reversed.width)/2,top:(canvas.height-reversed.height)/2}:{width:canvas.width,height:canvas.height,left:0,top:0}),this.$clone.css({width:image.width,height:image.height,marginLeft:image.left,marginTop:image.top,transform:getRotateValue(image.rotate)})},initCropBox:function(){var options=this.options,canvas=this.canvas,aspectRatio=
options.aspectRatio,autoCropArea=num(options.autoCropArea)||.8,cropBox={width:canvas.width,height:canvas.height};aspectRatio&&(canvas.height*aspectRatio>canvas.width?cropBox.height=cropBox.width/aspectRatio:cropBox.width=cropBox.height*aspectRatio),this.cropBox=cropBox,this.limitCropBox(!0,!0),cropBox.width=min(max(cropBox.width,cropBox.minWidth),cropBox.maxWidth),cropBox.height=min(max(cropBox.height,cropBox.minHeight),cropBox.maxHeight),cropBox.width=max(cropBox.minWidth,cropBox.width*autoCropArea),cropBox.height=max(cropBox.minHeight,cropBox.height*autoCropArea),cropBox.oldLeft=cropBox.left=canvas.left+(canvas.width-cropBox.width)/2,cropBox.oldTop=cropBox.top=canvas.top+(canvas.height-cropBox.height)/2,this.initialCropBox=$.extend({},cropBox)},limitCropBox:function(size,position){var options=this.options,strict=options.strict,container=this.container,containerWidth=container.width,containerHeight=container.height,canvas=this.canvas,cropBox=this.cropBox,aspectRatio=options.aspectRatio
,minCropBoxWidth,minCropBoxHeight;size&&(minCropBoxWidth=num(options.minCropBoxWidth)||0,minCropBoxHeight=num(options.minCropBoxHeight)||0,cropBox.minWidth=min(containerWidth,minCropBoxWidth),cropBox.minHeight=min(containerHeight,minCropBoxHeight),cropBox.maxWidth=min(containerWidth,strict?canvas.width:containerWidth),cropBox.maxHeight=min(containerHeight,strict?canvas.height:containerHeight),aspectRatio&&(cropBox.maxHeight*aspectRatio>cropBox.maxWidth?(cropBox.minHeight=cropBox.minWidth/aspectRatio,cropBox.maxHeight=cropBox.maxWidth/aspectRatio):(cropBox.minWidth=cropBox.minHeight*aspectRatio,cropBox.maxWidth=cropBox.maxHeight*aspectRatio)),cropBox.minWidth=min(cropBox.maxWidth,cropBox.minWidth),cropBox.minHeight=min(cropBox.maxHeight,cropBox.minHeight)),position&&(strict?(cropBox.minLeft=max(0,canvas.left),cropBox.minTop=max(0,canvas.top),cropBox.maxLeft=min(containerWidth,canvas.left+canvas.width)-cropBox.width,cropBox.maxTop=min(containerHeight,canvas.top+canvas.height)-cropBox.height
):(cropBox.minLeft=0,cropBox.minTop=0,cropBox.maxLeft=containerWidth-cropBox.width,cropBox.maxTop=containerHeight-cropBox.height))},renderCropBox:function(){var options=this.options,container=this.container,containerWidth=container.width,containerHeight=container.height,cropBox=this.cropBox;if(cropBox.width>cropBox.maxWidth||cropBox.width<cropBox.minWidth)cropBox.left=cropBox.oldLeft;if(cropBox.height>cropBox.maxHeight||cropBox.height<cropBox.minHeight)cropBox.top=cropBox.oldTop;cropBox.width=min(max(cropBox.width,cropBox.minWidth),cropBox.maxWidth),cropBox.height=min(max(cropBox.height,cropBox.minHeight),cropBox.maxHeight),this.limitCropBox(!1,!0),cropBox.oldLeft=cropBox.left=min(max(cropBox.left,cropBox.minLeft),cropBox.maxLeft),cropBox.oldTop=cropBox.top=min(max(cropBox.top,cropBox.minTop),cropBox.maxTop),options.movable&&options.cropBoxMovable&&this.$face.data("drag",cropBox.width===containerWidth&&cropBox.height===containerHeight?"move":"all"),this.$cropBox.css({width:cropBox.width
,height:cropBox.height,left:cropBox.left,top:cropBox.top}),this.cropped&&options.strict&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){var options=this.options,$this=this.$element;this.preview(),options.crop&&options.crop.call($this,this.getData()),$this.trigger(EVENT_CHANGE)}}),prototype.initPreview=function(){var url=this.url;this.$preview=$(this.options.preview),this.$viewBox.html('<img src="'+url+'">'),this.$preview.each(function(){var $this=$(this);$this.data(CROPPER_PREVIEW,{width:$this.width(),height:$this.height(),original:$this.html()}).html('<img src="'+url+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})},prototype.resetPreview=function(){this.$preview.each(function(){var $this=$(this);$this.html($this.data(CROPPER_PREVIEW).original).removeData(CROPPER_PREVIEW)})},prototype.preview=function(){var image=this.image,canvas=this.canvas
,cropBox=this.cropBox,width=image.width,height=image.height,left=cropBox.left-canvas.left-image.left,top=cropBox.top-canvas.top-image.top,rotate=image.rotate;if(!this.cropped||this.disabled)return;this.$viewBox.find("img").css({width:width,height:height,marginLeft:-left,marginTop:-top,transform:getRotateValue(rotate)}),this.$preview.each(function(){var $this=$(this),data=$this.data(CROPPER_PREVIEW),ratio=data.width/cropBox.width,newWidth=data.width,newHeight=cropBox.height*ratio;newHeight>data.height&&(ratio=data.height/cropBox.height,newWidth=cropBox.width*ratio,newHeight=data.height),$this.width(newWidth).height(newHeight).find("img").css({width:width*ratio,height:height*ratio,marginLeft:-left*ratio,marginTop:-top*ratio,transform:getRotateValue(rotate)})})},prototype.addListeners=function(){var options=this.options,$this=this.$element,$cropper=this.$cropper;$.isFunction(options.dragstart)&&$this.on(EVENT_DRAG_START,options.dragstart),$.isFunction(options.dragmove)&&$this.on(EVENT_DRAG_MOVE
,options.dragmove),$.isFunction(options.dragend)&&$this.on(EVENT_DRAG_END,options.dragend),$.isFunction(options.zoomin)&&$this.on(EVENT_ZOOM_IN,options.zoomin),$.isFunction(options.zoomout)&&$this.on(EVENT_ZOOM_OUT,options.zoomout),$.isFunction(options.change)&&$this.on(EVENT_CHANGE,options.change),$cropper.on(EVENT_MOUSE_DOWN,$.proxy(this.dragstart,this)),options.zoomable&&options.mouseWheelZoom&&$cropper.on(EVENT_WHEEL,$.proxy(this.wheel,this)),options.doubleClickToggle&&$cropper.on(EVENT_DBLCLICK,$.proxy(this.dblclick,this)),$document.on(EVENT_MOUSE_MOVE,this._dragmove=proxy(this.dragmove,this)).on(EVENT_MOUSE_UP,this._dragend=proxy(this.dragend,this)),options.responsive&&$window.on(EVENT_RESIZE,this._resize=proxy(this.resize,this))},prototype.removeListeners=function(){var options=this.options,$this=this.$element,$cropper=this.$cropper;$.isFunction(options.dragstart)&&$this.off(EVENT_DRAG_START,options.dragstart),$.isFunction(options.dragmove)&&$this.off(EVENT_DRAG_MOVE,options.dragmove
),$.isFunction(options.dragend)&&$this.off(EVENT_DRAG_END,options.dragend),$.isFunction(options.zoomin)&&$this.off(EVENT_ZOOM_IN,options.zoomin),$.isFunction(options.zoomout)&&$this.off(EVENT_ZOOM_OUT,options.zoomout),$.isFunction(options.change)&&$this.off(EVENT_CHANGE,options.change),$cropper.off(EVENT_MOUSE_DOWN,this.dragstart),options.zoomable&&options.mouseWheelZoom&&$cropper.off(EVENT_WHEEL,this.wheel),options.doubleClickToggle&&$cropper.off(EVENT_DBLCLICK,this.dblclick),$document.off(EVENT_MOUSE_MOVE,this._dragmove).off(EVENT_MOUSE_UP,this._dragend),options.responsive&&$window.off(EVENT_RESIZE,this._resize)},$.extend(prototype,{resize:function(){var $container=this.$container,container=this.container,canvasData,cropBoxData,ratio;if(this.disabled||!container)return;ratio=$container.width()/container.width;if(ratio!==1||$container.height()!==container.height)canvasData=this.getCanvasData(),cropBoxData=this.getCropBoxData(),this.render(),this.setCanvasData($.each(canvasData,function(
i,n){canvasData[i]=n*ratio})),this.setCropBoxData($.each(cropBoxData,function(i,n){cropBoxData[i]=n*ratio}))},dblclick:function(){if(this.disabled)return;this.$dragBox.hasClass(CLASS_CROP)?this.setDragMode("move"):this.setDragMode("crop")},wheel:function(event){var e=event.originalEvent,delta=1;if(this.disabled)return;event.preventDefault(),e.deltaY?delta=e.deltaY>0?1:-1:e.wheelDelta?delta=-e.wheelDelta/120:e.detail&&(delta=e.detail>0?1:-1),this.zoom(-delta*.1)},dragstart:function(event){var options=this.options,originalEvent=event.originalEvent,touches=originalEvent&&originalEvent.touches,e=event,dragType,dragStartEvent,touchesLength;if(this.disabled)return;if(touches){touchesLength=touches.length;if(touchesLength>1){if(!options.zoomable||!options.touchDragZoom||touchesLength!==2)return;e=touches[1],this.startX2=e.pageX,this.startY2=e.pageY,dragType="zoom"}e=touches[0]}dragType=dragType||$(e.target).data("drag");if(REGEXP_DRAG_TYPES.test(dragType)){event.preventDefault(),dragStartEvent=
$.Event(EVENT_DRAG_START,{originalEvent:originalEvent,dragType:dragType}),this.$element.trigger(dragStartEvent);if(dragStartEvent.isDefaultPrevented())return;this.dragType=dragType,this.cropping=!1,this.startX=e.pageX,this.startY=e.pageY,dragType==="crop"&&(this.cropping=!0,this.$dragBox.addClass(CLASS_MODAL))}},dragmove:function(event){var options=this.options,originalEvent=event.originalEvent,touches=originalEvent&&originalEvent.touches,e=event,dragType=this.dragType,dragMoveEvent,touchesLength;if(this.disabled)return;if(touches){touchesLength=touches.length;if(touchesLength>1){if(!options.zoomable||!options.touchDragZoom||touchesLength!==2)return;e=touches[1],this.endX2=e.pageX,this.endY2=e.pageY}e=touches[0]}if(dragType){event.preventDefault(),dragMoveEvent=$.Event(EVENT_DRAG_MOVE,{originalEvent:originalEvent,dragType:dragType}),this.$element.trigger(dragMoveEvent);if(dragMoveEvent.isDefaultPrevented())return;this.endX=e.pageX,this.endY=e.pageY,this.change(e.shiftKey)}},dragend:function(
event){var dragType=this.dragType,dragEndEvent;if(this.disabled)return;if(dragType){event.preventDefault(),dragEndEvent=$.Event(EVENT_DRAG_END,{originalEvent:event.originalEvent,dragType:dragType}),this.$element.trigger(dragEndEvent);if(dragEndEvent.isDefaultPrevented())return;this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(CLASS_MODAL,this.cropped&&this.options.modal)),this.dragType=""}}}),$.extend(prototype,{crop:function(){if(!this.built||this.disabled)return;this.cropped||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(CLASS_MODAL),this.$cropBox.removeClass(CLASS_HIDDEN)),this.setCropBoxData(this.initialCropBox)},reset:function(){if(!this.built||this.disabled)return;this.image=$.extend({},this.initialImage),this.canvas=$.extend({},this.initialCanvas),this.cropBox=$.extend({},this.initialCropBox),this.renderCanvas(),this.cropped&&this.renderCropBox()},clear:function(){if(!this.cropped||this.disabled)return;$.extend(this.cropBox,{left:0,
top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(CLASS_MODAL),this.$cropBox.addClass(CLASS_HIDDEN)},destroy:function(){var $this=this.$element;this.ready?(this.unbuild(),$this.removeClass(CLASS_HIDDEN)):this.$clone&&this.$clone.remove(),$this.removeData("cropper")},replace:function(url){!this.disabled&&url&&(this.options.data=null,this.load(url))},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(CLASS_DISABLED))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(CLASS_DISABLED))},move:function(offsetX,offsetY){var canvas=this.canvas;this.built&&!this.disabled&&this.options.movable&&isNumber(offsetX)&&isNumber(offsetY)&&(canvas.left+=offsetX,canvas.top+=offsetY,this.renderCanvas(!0))},zoom:function(delta){var canvas=this.canvas,zoomEvent,width,height;delta=num(delta);if(delta&&this.built&&!this.disabled&&this.options.zoomable){zoomEvent=delta>0?$.Event(EVENT_ZOOM_IN
):$.Event(EVENT_ZOOM_OUT),this.$element.trigger(zoomEvent);if(zoomEvent.isDefaultPrevented())return;delta=delta<=-1?1/(1-delta):delta<=1?1+delta:delta,width=canvas.width*delta,height=canvas.height*delta,canvas.left-=(width-canvas.width)/2,canvas.top-=(height-canvas.height)/2,canvas.width=width,canvas.height=height,this.renderCanvas(!0),this.setDragMode("move")}},rotate:function(degree){var image=this.image;degree=num(degree),degree&&this.built&&!this.disabled&&this.options.rotatable&&(image.rotate=(image.rotate+degree)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(rounded){var cropBox=this.cropBox,canvas=this.canvas,image=this.image,ratio,data;return this.built&&this.cropped?(data={x:cropBox.left-canvas.left,y:cropBox.top-canvas.top,width:cropBox.width,height:cropBox.height},ratio=image.width/image.naturalWidth,$.each(data,function(i,n){n/=ratio,data[i]=rounded?Math.round(n):n})):data={x:0,y:0,width:0,height:0},data.rotate=this.ready?image.rotate:0,data},setData:function(
data){var image=this.image,canvas=this.canvas,cropBoxData={},ratio;this.built&&!this.disabled&&$.isPlainObject(data)&&(isNumber(data.rotate)&&data.rotate!==image.rotate&&this.options.rotatable&&(image.rotate=data.rotate,this.rotated=!0,this.renderCanvas(!0)),ratio=image.width/image.naturalWidth,isNumber(data.x)&&(cropBoxData.left=data.x*ratio+canvas.left),isNumber(data.y)&&(cropBoxData.top=data.y*ratio+canvas.top),isNumber(data.width)&&(cropBoxData.width=data.width*ratio),isNumber(data.height)&&(cropBoxData.height=data.height*ratio),this.setCropBoxData(cropBoxData))},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var canvas=this.canvas,data;return this.built&&(data={left:canvas.left,top:canvas.top,width:canvas.width,height:canvas.height}),data||{}},setCanvasData:function(data){var canvas=this.canvas,aspectRatio=canvas.aspectRatio;this.built&&!this.disabled&&$.isPlainObject(data)&&(isNumber
(data.left)&&(canvas.left=data.left),isNumber(data.top)&&(canvas.top=data.top),isNumber(data.width)?(canvas.width=data.width,canvas.height=data.width/aspectRatio):isNumber(data.height)&&(canvas.height=data.height,canvas.width=data.height*aspectRatio),this.renderCanvas(!0))},getCropBoxData:function(){var cropBox=this.cropBox,data;return this.built&&this.cropped&&(data={left:cropBox.left,top:cropBox.top,width:cropBox.width,height:cropBox.height}),data||{}},setCropBoxData:function(data){var cropBox=this.cropBox,aspectRatio=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&$.isPlainObject(data)&&(isNumber(data.left)&&(cropBox.left=data.left),isNumber(data.top)&&(cropBox.top=data.top),isNumber(data.width)&&(cropBox.width=data.width),isNumber(data.height)&&(cropBox.height=data.height),aspectRatio&&(isNumber(data.width)?cropBox.height=cropBox.width/aspectRatio:isNumber(data.height)&&(cropBox.width=cropBox.height*aspectRatio)),this.renderCropBox())},getCroppedCanvas:function(options
){var originalWidth,originalHeight,canvasWidth,canvasHeight,scaledWidth,scaledHeight,scaledRatio,aspectRatio,canvas,context,data;if(!this.built||!this.cropped||!SUPPORT_CANVAS)return;return $.isPlainObject(options)||(options={}),data=this.getData(),originalWidth=data.width,originalHeight=data.height,aspectRatio=originalWidth/originalHeight,$.isPlainObject(options)&&(scaledWidth=options.width,scaledHeight=options.height,scaledWidth?(scaledHeight=scaledWidth/aspectRatio,scaledRatio=scaledWidth/originalWidth):scaledHeight&&(scaledWidth=scaledHeight*aspectRatio,scaledRatio=scaledHeight/originalHeight)),canvasWidth=scaledWidth||originalWidth,canvasHeight=scaledHeight||originalHeight,canvas=$("<canvas>")[0],canvas.width=canvasWidth,canvas.height=canvasHeight,context=canvas.getContext("2d"),options.fillColor&&(context.fillStyle=options.fillColor,context.fillRect(0,0,canvasWidth,canvasHeight)),context.drawImage.apply(context,function(){var source=getSourceCanvas(this.$clone[0],this.image),sourceWidth=
source.width,sourceHeight=source.height,args=[source],srcX=data.x,srcY=data.y,srcWidth,srcHeight,dstX,dstY,dstWidth,dstHeight;return srcX<=-originalWidth||srcX>sourceWidth?srcX=srcWidth=dstX=dstWidth=0:srcX<=0?(dstX=-srcX,srcX=0,srcWidth=dstWidth=min(sourceWidth,originalWidth+srcX)):srcX<=sourceWidth&&(dstX=0,srcWidth=dstWidth=min(originalWidth,sourceWidth-srcX)),srcWidth<=0||srcY<=-originalHeight||srcY>sourceHeight?srcY=srcHeight=dstY=dstHeight=0:srcY<=0?(dstY=-srcY,srcY=0,srcHeight=dstHeight=min(sourceHeight,originalHeight+srcY)):srcY<=sourceHeight&&(dstY=0,srcHeight=dstHeight=min(originalHeight,sourceHeight-srcY)),args.push(srcX,srcY,srcWidth,srcHeight),scaledRatio&&(dstX*=scaledRatio,dstY*=scaledRatio,dstWidth*=scaledRatio,dstHeight*=scaledRatio),dstWidth>0&&dstHeight>0&&args.push(dstX,dstY,dstWidth,dstHeight),args}.call(this)),canvas},setAspectRatio:function(aspectRatio){var options=this.options;!this.disabled&&!isUndefined(aspectRatio)&&(options.aspectRatio=num(aspectRatio)||NaN,this
.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(mode){var options=this.options,croppable,movable;this.ready&&!this.disabled&&(croppable=options.dragCrop&&mode==="crop",movable=options.movable&&mode==="move",mode=croppable||movable?mode:"none",this.$dragBox.data("drag",mode).toggleClass(CLASS_CROP,croppable).toggleClass(CLASS_MOVE,movable),options.cropBoxMovable||this.$face.data("drag",mode).toggleClass(CLASS_CROP,croppable).toggleClass(CLASS_MOVE,movable))}}),prototype.change=function(shiftKey){var dragType=this.dragType,options=this.options,canvas=this.canvas,container=this.container,cropBox=this.cropBox,width=cropBox.width,height=cropBox.height,left=cropBox.left,top=cropBox.top,right=left+width,bottom=top+height,minLeft=0,minTop=0,maxWidth=container.width,maxHeight=container.height,renderable=!0,aspectRatio=options.aspectRatio,range={x:this.endX-this.startX,y:this.endY-this.startY},offset;!aspectRatio&&shiftKey&&(aspectRatio=width&&height?width/height
:1),options.strict&&(minLeft=cropBox.minLeft,minTop=cropBox.minTop,maxWidth=minLeft+min(container.width,canvas.width),maxHeight=minTop+min(container.height,canvas.height)),aspectRatio&&(range.X=range.y*aspectRatio,range.Y=range.x/aspectRatio);switch(dragType){case"all":left+=range.x,top+=range.y;break;case"e":if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}width+=range.x,aspectRatio&&(height=width/aspectRatio,top-=range.Y/2),width<0&&(dragType="w",width=0);break;case"n":if(range.y<=0&&(top<=minTop||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}height-=range.y,top+=range.y,aspectRatio&&(width=height*aspectRatio,left+=range.X/2),height<0&&(dragType="s",height=0);break;case"w":if(range.x<=0&&(left<=minLeft||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}width-=range.x,left+=range.x,aspectRatio&&(height=width/aspectRatio,top+=range.Y/2),width<0&&(dragType="e",width=0);break;case"s":if(range.y>=0&&
(bottom>=maxHeight||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}height+=range.y,aspectRatio&&(width=height*aspectRatio,left-=range.X/2),height<0&&(dragType="n",height=0);break;case"ne":if(aspectRatio){if(range.y<=0&&(top<=minTop||right>=maxWidth)){renderable=!1;break}height-=range.y,top+=range.y,width=height*aspectRatio}else range.x>=0?right<maxWidth?width+=range.x:range.y<=0&&top<=minTop&&(renderable=!1):width+=range.x,range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(dragType="sw",height=0,width=0):width<0?(dragType="nw",width=0):height<0&&(dragType="se",height=0);break;case"nw":if(aspectRatio){if(range.y<=0&&(top<=minTop||left<=minLeft)){renderable=!1;break}height-=range.y,top+=range.y,width=height*aspectRatio,left+=range.X}else range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y<=0&&top<=minTop&&(renderable=!1):(width-=range.x,left+=range.x),range.y<=0?top>minTop&&(height-=range.y,top+=range.y):
(height-=range.y,top+=range.y);width<0&&height<0?(dragType="se",height=0,width=0):width<0?(dragType="ne",width=0):height<0&&(dragType="sw",height=0);break;case"sw":if(aspectRatio){if(range.x<=0&&(left<=minLeft||bottom>=maxHeight)){renderable=!1;break}width-=range.x,left+=range.x,height=width/aspectRatio}else range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y>=0&&bottom>=maxHeight&&(renderable=!1):(width-=range.x,left+=range.x),range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(dragType="ne",height=0,width=0):width<0?(dragType="se",width=0):height<0&&(dragType="nw",height=0);break;case"se":if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight)){renderable=!1;break}width+=range.x,height=width/aspectRatio}else range.x>=0?right<maxWidth?width+=range.x:range.y>=0&&bottom>=maxHeight&&(renderable=!1):width+=range.x,range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(dragType="nw",height=0,width=0):width<0?(dragType="sw"
,width=0):height<0&&(dragType="ne",height=0);break;case"move":canvas.left+=range.x,canvas.top+=range.y,this.renderCanvas(!0),renderable=!1;break;case"zoom":this.zoom(function(x1,y1,x2,y2){var z1=sqrt(x1*x1+y1*y1),z2=sqrt(x2*x2+y2*y2);return(z2-z1)/z1}(abs(this.startX-this.startX2),abs(this.startY-this.startY2),abs(this.endX-this.endX2),abs(this.endY-this.endY2))),this.startX2=this.endX2,this.startY2=this.endY2,renderable=!1;break;case"crop":range.x&&range.y&&(offset=this.$cropper.offset(),left=this.startX-offset.left,top=this.startY-offset.top,width=cropBox.minWidth,height=cropBox.minHeight,range.x>0?range.y>0?dragType="se":(dragType="ne",top-=height):range.y>0?(dragType="sw",left-=width):(dragType="nw",left-=width,top-=height),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(CLASS_HIDDEN)))}renderable&&(cropBox.width=width,cropBox.height=height,cropBox.left=left,cropBox.top=top,this.dragType=dragType,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},$.extend(Cropper
.prototype,prototype),Cropper.DEFAULTS={aspectRatio:NaN,autoCropArea:.8,crop:null,data:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,cropBoxMovable:!0,cropBoxResizable:!0,doubleClickToggle:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null,change:null},Cropper.setDefaults=function(options){$.extend(Cropper.DEFAULTS,options)},Cropper.TEMPLATE=function(source,words){return words=words.split(","),source.replace(/\d+/g,function(i){return words[i]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-2-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>'
,"div,span,drag,data,point,cropper,class,line,dashed,box"),Cropper.other=$.fn.cropper,$.fn.cropper=function(options){var args=toArray(arguments,1),result;return this.each(function(){var $this=$(this),data=$this.data("cropper"),fn;data||$this.data("cropper",data=new Cropper(this,options)),typeof options=="string"&&$.isFunction(fn=data[options])&&(result=fn.apply(data,args))}),isUndefined(result)?this:result},$.fn.cropper.Constructor=Cropper,$.fn.cropper.setDefaults=Cropper.setDefaults,$.fn.cropper.noConflict=function(){return $.fn.cropper=Cropper.other,this}}),function(){angular.module("ngCropper",["ng"]).directive("ngCropper",["$q","$parse",function($q,$parse){return{restrict:"A",scope:{options:"=ngCropperOptions",proxy:"=ngCropperProxy",showEvent:"=ngCropperShow",hideEvent:"=ngCropperHide"},link:function(scope,element,atts){var shown=!1;scope.$on(scope.showEvent,function(){if(shown)return;shown=!0,preprocess(scope.options,element[0]).then(function(options){setProxy(element),element.cropper
(options)})});function setProxy(element){if(!scope.proxy)return;var setter=$parse(scope.proxy).assign;setter(scope.$parent,element.cropper.bind(element))}scope.$on(scope.hideEvent,function(){if(!shown)return;shown=!1,element.cropper("destroy")}),scope.$watch("options.disabled",function(disabled){if(!shown)return;disabled&&element.cropper("disable"),disabled||element.cropper("enable")})}};function preprocess(options,img){options=options||{};var result=$q.when(options);return options.maximize&&(result=maximizeSelection(options,img)),result}function maximizeSelection(options,img){return getRealSize(img).then(function(size){return options.data=size,options})}function getRealSize(img){var defer=$q.defer(),size={height:null,width:null},image=new Image;return image.onload=function(){defer.resolve({width:image.width,height:image.height})},image.src=img.src,defer.promise}}]).service("Cropper1",["$q",function($q){this.encode=function(blob){var defer=$q.defer(),reader=new FileReader;return reader.
onload=function(e){defer.resolve(e.target.result)},reader.readAsDataURL(blob),defer.promise},this.decode=function(dataUrl){var meta=dataUrl.split(";")[0],type=meta.split(":")[1],binary=atob(dataUrl.split(",")[1]),array=new Uint8Array(binary.length);for(var i=0;i<binary.length;i++)array[i]=binary.charCodeAt(i);return new Blob([array],{type:type})},this.crop=function(file,data){var _decodeBlob=this.decode;return this.encode(file).then(_createImage).then(function(image){var canvas=createCanvas(data),context=canvas.getContext("2d");context.drawImage(image,data.x,data.y,data.width,data.height,0,0,data.width,data.height);var encoded=canvas.toDataURL(file.type);return removeElement(canvas),_decodeBlob(encoded)})},this.scale=function(file,data){var _decodeBlob=this.decode;return this.encode(file).then(_createImage).then(function(image){var heightOrig=image.height,widthOrig=image.width,ratio,height,width;angular.isNumber(data)&&(ratio=data,height=heightOrig*ratio,width=widthOrig*ratio),angular.isObject
(data)&&(ratio=widthOrig/heightOrig,height=data.height,width=data.width,height&&!width?width=height*ratio:width&&!height&&(height=width/ratio));var canvas=createCanvas(data),context=canvas.getContext("2d");canvas.height=height,canvas.width=width,context.drawImage(image,0,0,widthOrig,heightOrig,0,0,width,height);var encoded=canvas.toDataURL(file.type);return removeElement(canvas),_decodeBlob(encoded)})};function _createImage(source){var defer=$q.defer(),image=new Image;return image.onload=function(e){defer.resolve(e.target)},image.src=source,defer.promise}function createCanvas(data){var canvas=document.createElement("canvas");return canvas.width=data.width,canvas.height=data.height,canvas.style.display="none",document.body.appendChild(canvas),canvas}function removeElement(el){el.parentElement.removeChild(el)}}])}(),function($){UMEDITOR_CONFIG=window.UMEDITOR_CONFIG||{},window.UM={plugins:{},commands:{},I18N:{},version:"1.2.2"};var dom=UM.dom={},browser=UM.browser=function(){var agent=navigator
.userAgent.toLowerCase(),opera=window.opera,browser={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(agent),opera:!!opera&&opera.version,webkit:agent.indexOf(" applewebkit/")>-1,mac:agent.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};browser.gecko=navigator.product=="Gecko"&&!browser.webkit&&!browser.opera&&!browser.ie;var version=0;if(browser.ie){var v1=agent.match(/(?:msie\s([\w.]+))/),v2=agent.match(/(?:trident.*rv:([\w.]+))/);v1&&v2&&v1[1]&&v2[1]?version=Math.max(v1[1]*1,v2[1]*1):v1&&v1[1]?version=v1[1]*1:v2&&v2[1]?version=v2[1]*1:version=0,browser.ie11Compat=document.documentMode==11,browser.ie9Compat=document.documentMode==9,browser.ie8=!!document.documentMode,browser.ie8Compat=document.documentMode==8,browser.ie7Compat=version==7&&!document.documentMode||document.documentMode==7,browser.ie6Compat=version<7||browser.quirks,browser.ie9above=version>8,browser.ie9below=version<9}if(browser.gecko){var geckoRelease=agent.match(/rv:([\d\.]+)/);geckoRelease&&(geckoRelease=geckoRelease
[1].split("."),version=geckoRelease[0]*1e4+(geckoRelease[1]||0)*100+(geckoRelease[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(agent)&&(browser.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(agent)&&!/chrome/i.test(agent)&&(browser.safari=+(RegExp.$1||RegExp.$2)),browser.opera&&(version=parseFloat(opera.version())),browser.webkit&&(version=parseFloat(agent.match(/ applewebkit\/(\d+)/)[1])),browser.version=version,browser.isCompatible=!browser.mobile&&(browser.ie&&version>=6||browser.gecko&&version>=10801||browser.opera&&version>=9.5||browser.air&&version>=1||browser.webkit&&version>=522||!1),browser}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UM.utils={each:function(obj,iterator,context){if(obj==null)return;if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++)if(iterator.call(context,obj[i],i,obj)===!1)return!1}else for(var key in obj)if(obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj)===!1)return!1},makeInstance
:function(obj){var noop=new Function;return noop.prototype=obj,obj=new noop,noop.prototype=null,obj},extend:function(t,s,b){if(s)for(var k in s)if(!b||!t.hasOwnProperty(k))t[k]=s[k];return t},extend2:function(t){var a=arguments;for(var i=1;i<a.length;i++){var x=a[i];for(var k in x)t.hasOwnProperty(k)||(t[k]=x[k])}return t},inherits:function(subClass,superClass){var oldP=subClass.prototype,newP=utils.makeInstance(superClass.prototype);return utils.extend(newP,oldP,!0),subClass.prototype=newP,newP.constructor=subClass},bind:function(fn,context){return function(){return fn.apply(context,arguments)}},defer:function(fn,delay,exclusion){var timerID;return function(){exclusion&&clearTimeout(timerID),timerID=setTimeout(fn,delay)}},indexOf:function(array,item,start){var index=-1;return start=this.isNumber(start)?start:0,this.each(array,function(v,i){if(i>=start&&v===item)return index=i,!1}),index},removeItem:function(array,item){for(var i=0,l=array.length;i<l;i++)array[i]===item&&(array.splice(i
,1),i--)},trim:function(str){return str.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(list){if(!list)return{};list=utils.isArray(list)?list:list.split(",");for(var i=0,ci,obj={};ci=list[i++];)obj[ci.toUpperCase()]=obj[ci]=1;return obj},unhtml:function(str,reg){return str?str.replace(reg||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(str){return str?str.replace(/&((g|l|quo)t|amp|#39);/g,function(m){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'"}[m]}):""},cssStyleToDomStyle:function(){var test=document.createElement("div").style,cache={"float":test.cssFloat!=undefined?"cssFloat":test.styleFloat!=undefined?"styleFloat":"float"};return function(cssName){return cache[cssName]||(cache[cssName]=cssName.toLowerCase().replace(/-./g,function(match){return match.charAt(1).toUpperCase()}))}}(),loadFile:function(){var tmpList=[];function getItem(doc,obj){try{for(
var i=0,ci;ci=tmpList[i++];)if(ci.doc===doc&&ci.url==(obj.src||obj.href))return ci}catch(e){return null}}return function(doc,obj,fn){var item=getItem(doc,obj);if(item){item.ready?fn&&fn():item.funs.push(fn);return}tmpList.push({doc:doc,url:obj.src||obj.href,funs:[fn]});if(!doc.body){var html=[];for(var p in obj){if(p=="tag")continue;html.push(p+'="'+obj[p]+'"')}doc.write("<"+obj.tag+" "+html.join(" ")+" ></"+obj.tag+">");return}if(obj.id&&doc.getElementById(obj.id))return;var element=doc.createElement(obj.tag);delete obj.tag;for(var p in obj)element.setAttribute(p,obj[p]);element.onload=element.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){item=getItem(doc,obj);if(item.funs.length>0){item.ready=1;for(var fi;fi=item.funs.pop();)fi()}element.onload=element.onreadystatechange=null}},element.onerror=function(){throw Error("The load "+(obj.href||obj.src)+" fails,check the url settings of file umeditor.config.js ")},doc.getElementsByTagName("head"
)[0].appendChild(element)}}(),isEmptyObject:function(obj){if(obj==null)return!0;if(this.isArray(obj)||this.isString(obj))return obj.length===0;for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0},fixColor:function(name,value){if(/color/i.test(name)&&/rgba?/.test(value)){var array=value.split(",");if(array.length>3)return"";value="#";for(var i=0,color;color=array[i++];)color=parseInt(color.replace(/[^\d]/gi,""),10).toString(16),value+=color.length==1?"0"+color:color;value=value.toUpperCase()}return value},clone:function(source,target){var tmp;target=target||{};for(var i in source)source.hasOwnProperty(i)&&(tmp=source[i],typeof tmp=="object"?(target[i]=utils.isArray(tmp)?[]:{},utils.clone(source[i],target[i])):target[i]=tmp);return target},transUnitToPx:function(val){if(!/(pt|cm)/.test(val))return val;var unit;val.replace(/([\d.]+)(\w+)/,function(str,v,u){val=v,unit=u});switch(unit){case"cm":val=parseFloat(val)*25;break;case"pt":val=Math.round(parseFloat(val)*96/72)}return val+
(val?"px":"")},cssRule:browser.ie&&browser.version!=11?function(key,style,doc){var indexList,index;doc=doc||document,doc.indexList?indexList=doc.indexList:indexList=doc.indexList={};var sheetStyle;if(!indexList[key]){if(style===undefined)return"";sheetStyle=doc.createStyleSheet("",index=doc.styleSheets.length),indexList[key]=index}else sheetStyle=doc.styleSheets[indexList[key]];if(style===undefined)return sheetStyle.cssText;sheetStyle.cssText=style||""}:function(key,style,doc){doc=doc||document;var head=doc.getElementsByTagName("head")[0],node;if(!(node=doc.getElementById(key))){if(style===undefined)return"";node=doc.createElement("style"),node.id=key,head.appendChild(node)}if(style===undefined)return node.innerHTML;style!==""?node.innerHTML=style:head.removeChild(node)}};utils.each(["String","Function","Array","Number","RegExp","Object"],function(v){UM.utils["is"+v]=function(obj){return Object.prototype.toString.apply(obj)=="[object "+v+"]"}});var EventBase=UM.EventBase=function(){};EventBase
.prototype={addListener:function(types,listener){types=utils.trim(types).split(" ");for(var i=0,ti;ti=types[i++];)getListener(this,ti,!0).push(listener)},removeListener:function(types,listener){types=utils.trim(types).split(" ");for(var i=0,ti;ti=types[i++];)utils.removeItem(getListener(this,ti)||[],listener)},fireEvent:function(){var types=arguments[0];types=utils.trim(types).split(" ");for(var i=0,ti;ti=types[i++];){var listeners=getListener(this,ti),r,t,k;if(listeners){k=listeners.length;while(k--){if(!listeners[k])continue;t=listeners[k].apply(this,arguments);if(t===!0)return t;t!==undefined&&(r=t)}}if(t=this["on"+ti.toLowerCase()])r=t.apply(this,arguments)}return r}};function getListener(obj,type,force){var allListeners;return type=type.toLowerCase(),(allListeners=obj.__allListeners||force&&(obj.__allListeners={}))&&(allListeners[type]||force&&(allListeners[type]=[]))}var dtd=dom.dtd=function(){function _(s){for(var k in s)s[k.toUpperCase()]=s[k];return s}var X=utils.extend2,A=_({isindex
:1,fieldset:1}),B=_({input:1,button:1,select:1,textarea:1,label:1}),C=X(_({a:1}),B),D=X({iframe:1},C),E=_({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),F=_({ins:1,del:1,script:1,style:1}),G=X(_({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),F),H=X(_({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),G),I=X(_({p:1}),H),J=X(_({iframe:1}),H,B),K=_({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,
pre:1,p:1,em:1,dfn:1}),L=X(_({a:0}),J),M=_({tr:1}),N=_({"#":1}),O=X(_({param:1}),K),P=X(_({form:1}),A,D,E,I),Q=_({li:1,ol:1,ul:1}),R=_({style:1,script:1}),S=_({base:1,link:1,meta:1,title:1}),T=X(S,R),U=_({head:1,body:1}),V=_({html:1}),block=_({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),empty=_({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return _({$nonBodyContent:X(V,U,S),$block:block,$inline:L,$inlineWithA:X(_({a:1}),L),$body:X(_({script:1,style:1}),block),$cdata:_({script:1,style:1}),$empty:empty,$nonChild:_({iframe:1,textarea:1}),$listItem:_({dd:1,dt:1,li:1}),$list:_({ul:1,ol:1,dl:1}),$isNotEmpty:_({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:_({a:1,abbr:1,acronym:1,
address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:_({p:1,div:1}),$tableContent:_({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:_({pre:1,script:1,style:1,textarea:1}),html:U,head:T,style:N,script:N,body:P,base:{},link:{},meta:{},title:N,col:{},tr:_({td:1,th:1}),img:{},embed:{},colgroup:_({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:P,td:P,br:{},th:P,center:P,kbd:L,button:X(I,E),basefont:{},h5:L,h4:L,samp:L,h6:L,ol:Q,h1:L,h3:L,option:N,h2:L,form:X(A,D,E,I),select:_({optgroup:1,option:1}),font:L,ins:L,menu:Q,abbr:L,label:L,table:_({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:L,tfoot:M,cite:L,li:P,input:{},iframe:P,strong:L,textarea:N,noframes:P,big:L,small:L,span:_({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:L,dt:L,sub:L,optgroup:_({option:1}),param:{},bdo:L,"var"
:L,div:P,object:O,sup:L,dd:P,strike:L,area:{},dir:Q,map:X(_({area:1,form:1,p:1}),A,F,E),applet:O,dl:_({dt:1,dd:1}),del:L,isindex:{},fieldset:X(_({legend:1}),K),thead:M,ul:Q,acronym:L,b:L,a:X(_({a:1}),J),blockquote:X(_({td:1,tr:1,tbody:1,li:1}),P),caption:L,i:L,u:L,tbody:M,s:L,address:X(D,I),tt:L,legend:L,q:L,pre:X(G,C),p:X(_({a:1}),L),em:L,dfn:L})}();function getDomNode(node,start,ltr,startFromChild,fn,guard){var tmpNode=startFromChild&&node[start],parent;!tmpNode&&(tmpNode=node[ltr]);while(!tmpNode&&(parent=(parent||node).parentNode)){if(parent.tagName=="BODY"||guard&&!guard(parent))return null;tmpNode=parent[ltr]}return tmpNode&&fn&&!fn(tmpNode)?getDomNode(tmpNode,start,ltr,!1,fn):tmpNode}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"
},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},breakParent:function(node,parent){var tmpNode,parentClone=node,clone=node,leftNodes,rightNodes;do{parentClone=parentClone.parentNode,leftNodes?(tmpNode=parentClone.cloneNode(!1),tmpNode.appendChild(leftNodes),leftNodes=tmpNode,tmpNode=parentClone.cloneNode(!1),tmpNode.appendChild(rightNodes),rightNodes=tmpNode):(leftNodes=parentClone.cloneNode(!1),rightNodes=leftNodes.cloneNode(!1));while(tmpNode=clone.previousSibling)leftNodes.
insertBefore(tmpNode,leftNodes.firstChild);while(tmpNode=clone.nextSibling)rightNodes.appendChild(tmpNode);clone=parentClone}while(parent!==parentClone);return tmpNode=parent.parentNode,tmpNode.insertBefore(leftNodes,parent),tmpNode.insertBefore(rightNodes,parent),tmpNode.insertBefore(node,rightNodes),domUtils.remove(parent),node},trimWhiteTextNode:function(node){function remove(dir){var child;while((child=node[dir])&&child.nodeType==3&&domUtils.isWhitespace(child))node.removeChild(child)}remove("firstChild"),remove("lastChild")},getPosition:function(nodeA,nodeB){if(nodeA===nodeB)return 0;var node,parentsA=[nodeA],parentsB=[nodeB];node=nodeA;while(node=node.parentNode){if(node===nodeB)return 10;parentsA.push(node)}node=nodeB;while(node=node.parentNode){if(node===nodeA)return 20;parentsB.push(node)}parentsA.reverse(),parentsB.reverse();if(parentsA[0]!==parentsB[0])return 1;var i=-1;while(i++,parentsA[i]===parentsB[i]);nodeA=parentsA[i],nodeB=parentsB[i];while(nodeA=nodeA.nextSibling)if(nodeA===
nodeB)return 4;return 2},getNodeIndex:function(node,ignoreTextNode){var preNode=node,i=0;while(preNode=preNode.previousSibling){if(ignoreTextNode&&preNode.nodeType==3){preNode.nodeType!=preNode.nextSibling.nodeType&&i++;continue}i++}return i},inDoc:function(node,doc){return domUtils.getPosition(node,doc)==10},findParent:function(node,filterFn,includeSelf){if(node&&!domUtils.isBody(node)){node=includeSelf?node:node.parentNode;while(node){if(!filterFn||filterFn(node)||domUtils.isBody(node))return filterFn&&!filterFn(node)&&domUtils.isBody(node)?null:node;node=node.parentNode}}return null},findParentByTagName:function(node,tagNames,includeSelf,excludeFn){return tagNames=utils.listToMap(utils.isArray(tagNames)?tagNames:[tagNames]),domUtils.findParent(node,function(node){return tagNames[node.tagName]&&(!excludeFn||!excludeFn(node))},includeSelf)},findParents:function(node,includeSelf,filterFn,closerFirst){var parents=includeSelf&&(filterFn&&filterFn(node)||!filterFn)?[node]:[];while(node=domUtils
.findParent(node,filterFn))parents.push(node);return closerFirst?parents:parents.reverse()},insertAfter:function(node,newNode){return node.parentNode.insertBefore(newNode,node.nextSibling)},remove:function(node,keepChildren){var parent=node.parentNode,child;if(parent){if(keepChildren&&node.hasChildNodes())while(child=node.firstChild)parent.insertBefore(child,node);parent.removeChild(node)}return node},getNextDomNode:function(node,startFromChild,filterFn,guard){return getDomNode(node,"firstChild","nextSibling",startFromChild,filterFn,guard)},getPreDomNode:function(node,startFromChild,filterFn,guard){return getDomNode(node,"lastChild","previousSibling",startFromChild,filterFn,guard)},isBookmarkNode:function(node){return node.nodeType==1&&node.id&&/^_baidu_bookmark_/i.test(node.id)},getWindow:function(node){var doc=node.ownerDocument||node;return doc.defaultView||doc.parentWindow},getCommonAncestor:function(nodeA,nodeB){if(nodeA===nodeB)return nodeA;var parentsA=[nodeA],parentsB=[nodeB],parent=
nodeA,i=-1;while(parent=parent.parentNode){if(parent===nodeB)return parent;parentsA.push(parent)}parent=nodeB;while(parent=parent.parentNode){if(parent===nodeA)return parent;parentsB.push(parent)}parentsA.reverse(),parentsB.reverse();while(i++,parentsA[i]===parentsB[i]);return i==0?null:parentsA[i-1]},clearEmptySibling:function(node,ignoreNext,ignorePre){function clear(next,dir){var tmpNode;while(next&&!domUtils.isBookmarkNode(next)&&(domUtils.isEmptyInlineElement(next)||!(new RegExp("[^	\n\r"+domUtils.fillChar+"]")).test(next.nodeValue)))tmpNode=next[dir],domUtils.remove(next),next=tmpNode}!ignoreNext&&clear(node.nextSibling,"nextSibling"),!ignorePre&&clear(node.previousSibling,"previousSibling")},split:function(node,offset){var doc=node.ownerDocument;if(browser.ie&&offset==node.nodeValue.length){var next=doc.createTextNode("");return domUtils.insertAfter(node,next)}var retval=node.splitText(offset);if(browser.ie8){var tmpNode=doc.createTextNode("");domUtils.insertAfter(retval,tmpNode)
,domUtils.remove(tmpNode)}return retval},isWhitespace:function(node){return!(new RegExp("[^ 	\n\r"+domUtils.fillChar+"]")).test(node.nodeValue)},getXY:function(element){var x=0,y=0;while(element.offsetParent)y+=element.offsetTop,x+=element.offsetLeft,element=element.offsetParent;return{x:x,y:y}},isEmptyInlineElement:function(node){if(node.nodeType!=1||!dtd.$removeEmpty[node.tagName])return 0;node=node.firstChild;while(node){if(domUtils.isBookmarkNode(node))return 0;if(node.nodeType==1&&!domUtils.isEmptyInlineElement(node)||node.nodeType==3&&!domUtils.isWhitespace(node))return 0;node=node.nextSibling}return 1},isBlockElm:function(node){return node.nodeType==1&&(dtd.$block[node.tagName]||styleBlock[domUtils.getComputedStyle(node,"display")])&&!dtd.$nonChild[node.tagName]},getElementsByTagName:function(node,name,filter){if(filter&&utils.isString(filter)){var className=filter;filter=function(node){var result=!1;return $.each(utils.trim(className).replace(/[ ]{2,}/g," ").split(" "),function(
i,v){if($(node).hasClass(v))return result=!0,!1}),result}}name=utils.trim(name).replace(/[ ]{2,}/g," ").split(" ");var arr=[];for(var n=0,ni;ni=name[n++];){var list=node.getElementsByTagName(ni);for(var i=0,ci;ci=list[i++];)(!filter||filter(ci))&&arr.push(ci)}return arr},unSelectable:ie&&browser.ie9below||browser.opera?function(node){node.onselectstart=function(){return!1},node.onclick=node.onkeyup=node.onkeydown=function(){return!1},node.unselectable="on",node.setAttribute("unselectable","on");for(var i=0,ci;ci=node.all[i++];)switch(ci.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:ci.unselectable="on",node.setAttribute("unselectable","on")}}:function(node){node.style.MozUserSelect=node.style.webkitUserSelect=node.style.msUserSelect=node.style.KhtmlUserSelect="none"},removeAttributes:function(node,attrNames){attrNames=utils.isArray(attrNames)?attrNames:utils.trim(attrNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci;ci=attrNames[i++];){
ci=attrFix[ci]||ci;switch(ci){case"className":node[ci]="";break;case"style":node.style.cssText="",!browser.ie&&node.removeAttributeNode(node.getAttributeNode("style"))}node.removeAttribute(ci)}},createElement:function(doc,tag,attrs){return domUtils.setAttributes(doc.createElement(tag),attrs)},setAttributes:function(node,attrs){for(var attr in attrs)if(attrs.hasOwnProperty(attr)){var value=attrs[attr];switch(attr){case"class":node.className=value;break;case"style":node.style.cssText=node.style.cssText+";"+value;break;case"innerHTML":node[attr]=value;break;case"value":node.value=value;break;default:node.setAttribute(attrFix[attr]||attr,value)}}return node},getComputedStyle:function(element,styleName){return utils.transUnitToPx(utils.fixColor(styleName,$(element).css(styleName)))},preventDefault:function(evt){evt.preventDefault?evt.preventDefault():evt.returnValue=!1},removeStyle:function(element,name){browser.ie?(name=="color"&&(name="(^|;)"+name),element.style.cssText=element.style.cssText
.replace(new RegExp(name+"[^:]*:[^;]+;?","ig"),"")):element.style.removeProperty?element.style.removeProperty(name):element.style.removeAttribute(utils.cssStyleToDomStyle(name)),element.style.cssText||domUtils.removeAttributes(element,["style"])},getStyle:function(element,name){var value=element.style[utils.cssStyleToDomStyle(name)];return utils.fixColor(name,value)},setStyle:function(element,name,value){element.style[utils.cssStyleToDomStyle(name)]=value,utils.trim(element.style.cssText)||this.removeAttributes(element,"style")},removeDirtyAttr:function(node){for(var i=0,ci,nodes=node.getElementsByTagName("*");ci=nodes[i++];)ci.removeAttribute("_moz_dirty");node.removeAttribute("_moz_dirty")},getChildCount:function(node,fn){var count=0,first=node.firstChild;fn=fn||function(){return 1};while(first)fn(first)&&count++,first=first.nextSibling;return count},isEmptyNode:function(node){return!node.firstChild||domUtils.getChildCount(node,function(node){return!domUtils.isBr(node)&&!domUtils.isBookmarkNode
(node)&&!domUtils.isWhitespace(node)})==0},isBr:function(node){return node.nodeType==1&&node.tagName=="BR"},isFillChar:function(node,isInStart){return node.nodeType==3&&!node.nodeValue.replace(new RegExp((isInStart?"^":"")+domUtils.fillChar),"").length},isEmptyBlock:function(node,reg){if(node.nodeType!=1)return 0;reg=reg||new RegExp("[ 	\r\n"+domUtils.fillChar+"]","g");if(node[browser.ie?"innerText":"textContent"].replace(reg,"").length>0)return 0;for(var n in dtd.$isNotEmpty)if(node.getElementsByTagName(n).length)return 0;return 1},isCustomeNode:function(node){return node.nodeType==1&&node.getAttribute("_ue_custom_node_")},fillNode:function(doc,node){var tmpNode=browser.ie?doc.createTextNode(domUtils.fillChar):doc.createElement("br");node.innerHTML="",node.appendChild(tmpNode)},isBoundaryNode:function(node,dir){var tmp;while(!domUtils.isBody(node)){tmp=node,node=node.parentNode;if(tmp!==node[dir])return!1}return!0},isFillChar:function(node,isInStart){return node.nodeType==3&&!node.nodeValue
.replace(new RegExp((isInStart?"^":"")+domUtils.fillChar),"").length},isBody:function(node){return $(node).hasClass("edui-body-container")}},fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var guid=0,fillChar=domUtils.fillChar,fillData;function updateCollapse(range){range.collapsed=range.startContainer&&range.endContainer&&range.startContainer===range.endContainer&&range.startOffset==range.endOffset}function selectOneNode(rng){return!rng.collapsed&&rng.startContainer.nodeType==1&&rng.startContainer===rng.endContainer&&rng.endOffset-rng.startOffset==1}function setEndPoint(toStart,node,offset,range){return node.nodeType==1&&(dtd.$empty[node.tagName]||dtd.$nonChild[node.tagName])&&(offset=domUtils.getNodeIndex(node)+(toStart?0:1),node=node.parentNode),toStart?(range.startContainer=node,range.startOffset=offset,range.endContainer||range.collapse(!0)):(range.endContainer=node,range.endOffset=offset,range.startContainer||range.collapse(!1)),updateCollapse(range),range}var Range=dom.
Range=function(document,body){var me=this;me.startContainer=me.startOffset=me.endContainer=me.endOffset=null,me.document=document,me.collapsed=!0,me.body=body};function removeFillData(doc,excludeNode){try{if(fillData&&domUtils.inDoc(fillData,doc))if(!fillData.nodeValue.replace(fillCharReg,"").length){var tmpNode=fillData.parentNode;domUtils.remove(fillData);while(tmpNode&&domUtils.isEmptyInlineElement(tmpNode)&&(browser.safari?!(domUtils.getPosition(tmpNode,excludeNode)&domUtils.POSITION_CONTAINS):!tmpNode.contains(excludeNode)))fillData=tmpNode.parentNode,domUtils.remove(tmpNode),tmpNode=fillData}else fillData.nodeValue=fillData.nodeValue.replace(fillCharReg,"")}catch(e){}}function mergeSibling(node,dir){var tmpNode;node=node[dir];while(node&&domUtils.isFillChar(node))tmpNode=node[dir],domUtils.remove(node),node=tmpNode}function execContentsAction(range,action){var start=range.startContainer,end=range.endContainer,startOffset=range.startOffset,endOffset=range.endOffset,doc=range.document
,frag=doc.createDocumentFragment(),tmpStart,tmpEnd;start.nodeType==1&&(start=start.childNodes[startOffset]||(tmpStart=start.appendChild(doc.createTextNode("")))),end.nodeType==1&&(end=end.childNodes[endOffset]||(tmpEnd=end.appendChild(doc.createTextNode(""))));if(start===end&&start.nodeType==3)return frag.appendChild(doc.createTextNode(start.substringData(startOffset,endOffset-startOffset))),action&&(start.deleteData(startOffset,endOffset-startOffset),range.collapse(!0)),frag;var current,currentLevel,clone=frag,startParents=domUtils.findParents(start,!0),endParents=domUtils.findParents(end,!0);for(var i=0;startParents[i]==endParents[i];)i++;for(var j=i,si;si=startParents[j];j++){current=si.nextSibling,si==start?tmpStart||(range.startContainer.nodeType==3?(clone.appendChild(doc.createTextNode(start.nodeValue.slice(startOffset))),action&&start.deleteData(startOffset,start.nodeValue.length-startOffset)):clone.appendChild(action?start:start.cloneNode(!0))):(currentLevel=si.cloneNode(!1),clone
.appendChild(currentLevel));while(current){if(current===end||current===endParents[j])break;si=current.nextSibling,clone.appendChild(action?current:current.cloneNode(!0)),current=si}clone=currentLevel}clone=frag,startParents[i]||(clone.appendChild(startParents[i-1].cloneNode(!1)),clone=clone.firstChild);for(var j=i,ei;ei=endParents[j];j++){current=ei.previousSibling,ei==end?!tmpEnd&&range.endContainer.nodeType==3&&(clone.appendChild(doc.createTextNode(end.substringData(0,endOffset))),action&&end.deleteData(0,endOffset)):(currentLevel=ei.cloneNode(!1),clone.appendChild(currentLevel));if(j!=i||!startParents[i])while(current){if(current===start)break;ei=current.previousSibling,clone.insertBefore(action?current:current.cloneNode(!0),clone.firstChild),current=ei}clone=currentLevel}return action&&range.setStartBefore(endParents[i]?startParents[i]?endParents[i]:startParents[i-1]:endParents[i-1]).collapse(!0),tmpStart&&domUtils.remove(tmpStart),tmpEnd&&domUtils.remove(tmpEnd),frag}Range.prototype=
{deleteContents:function(){var txt;return this.collapsed||execContentsAction(this,1),browser.webkit&&(txt=this.startContainer,txt.nodeType==3&&!txt.nodeValue.length&&(this.setStartBefore(txt).collapse(!0),domUtils.remove(txt))),this},inFillChar:function(){var start=this.startContainer;return this.collapsed&&start.nodeType==3&&start.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==start.nodeValue.length?!0:!1},setStart:function(node,offset){return setEndPoint(!0,node,offset,this)},setEnd:function(node,offset){return setEndPoint(!1,node,offset,this)},setStartAfter:function(node){return this.setStart(node.parentNode,domUtils.getNodeIndex(node)+1)},setStartBefore:function(node){return this.setStart(node.parentNode,domUtils.getNodeIndex(node))},setEndAfter:function(node){return this.setEnd(node.parentNode,domUtils.getNodeIndex(node)+1)},setEndBefore:function(node){return this.setEnd(node.parentNode,domUtils.getNodeIndex(node))},setStartAtFirst:function(node){return this.setStart
(node,0)},setStartAtLast:function(node){return this.setStart(node,node.nodeType==3?node.nodeValue.length:node.childNodes.length)},setEndAtFirst:function(node){return this.setEnd(node,0)},setEndAtLast:function(node){return this.setEnd(node,node.nodeType==3?node.nodeValue.length:node.childNodes.length)},selectNode:function(node){return this.setStartBefore(node).setEndAfter(node)},selectNodeContents:function(node){return this.setStart(node,0).setEndAtLast(node)},cloneRange:function(){var me=this;return(new Range(me.document)).setStart(me.startContainer,me.startOffset).setEnd(me.endContainer,me.endOffset)},collapse:function(toStart){var me=this;return toStart?(me.endContainer=me.startContainer,me.endOffset=me.startOffset):(me.startContainer=me.endContainer,me.startOffset=me.endOffset),me.collapsed=!0,me},shrinkBoundary:function(ignoreEnd){var me=this,child,collapsed=me.collapsed;function check(node){return node.nodeType==1&&!domUtils.isBookmarkNode(node)&&!dtd.$empty[node.tagName]&&!dtd.$nonChild
[node.tagName]}while(me.startContainer.nodeType==1&&(child=me.startContainer.childNodes[me.startOffset])&&check(child))me.setStart(child,0);if(collapsed)return me.collapse(!0);if(!ignoreEnd)while(me.endContainer.nodeType==1&&me.endOffset>0&&(child=me.endContainer.childNodes[me.endOffset-1])&&check(child))me.setEnd(child,child.childNodes.length);return me},trimBoundary:function(ignoreEnd){this.txtToElmBoundary();var start=this.startContainer,offset=this.startOffset,collapsed=this.collapsed,end=this.endContainer;if(start.nodeType==3){if(offset==0)this.setStartBefore(start);else if(offset>=start.nodeValue.length)this.setStartAfter(start);else{var textNode=domUtils.split(start,offset);start===end?this.setEnd(textNode,this.endOffset-offset):start.parentNode===end&&(this.endOffset+=1),this.setStartBefore(textNode)}if(collapsed)return this.collapse(!0)}return ignoreEnd||(offset=this.endOffset,end=this.endContainer,end.nodeType==3&&(offset==0?this.setEndBefore(end):(offset<end.nodeValue.length&&
domUtils.split(end,offset),this.setEndAfter(end)))),this},txtToElmBoundary:function(ignoreCollapsed){function adjust(r,c){var container=r[c+"Container"],offset=r[c+"Offset"];container.nodeType==3&&(offset?offset>=container.nodeValue.length&&r["set"+c.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](container):r["set"+c.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](container))}if(ignoreCollapsed||!this.collapsed)adjust(this,"start"),adjust(this,"end");return this},insertNode:function(node){var first=node,length=1;node.nodeType==11&&(first=node.firstChild,length=node.childNodes.length),this.trimBoundary(!0);var start=this.startContainer,offset=this.startOffset,nextNode=start.childNodes[offset];return nextNode?start.insertBefore(node,nextNode):start.appendChild(node),first.parentNode===this.endContainer&&(this.endOffset=this.endOffset+length),this.setStartBefore(first)},setCursor:function(toEnd,noFillData){return this.collapse(!toEnd).select(noFillData)},createBookmark
:function(serialize,same){var endNode,startNode=this.document.createElement("span");return startNode.style.cssText="display:none;line-height:0px;",startNode.appendChild(this.document.createTextNode("\u200d")),startNode.id="_baidu_bookmark_start_"+(same?"":guid++),this.collapsed||(endNode=startNode.cloneNode(!0),endNode.id="_baidu_bookmark_end_"+(same?"":guid++)),this.insertNode(startNode),endNode&&this.collapse().insertNode(endNode).setEndBefore(endNode),this.setStartAfter(startNode),{start:serialize?startNode.id:startNode,end:endNode?serialize?endNode.id:endNode:null,id:serialize}},moveToBookmark:function(bookmark){var start=bookmark.id?this.document.getElementById(bookmark.start):bookmark.start,end=bookmark.end&&bookmark.id?this.document.getElementById(bookmark.end):bookmark.end;return this.setStartBefore(start),domUtils.remove(start),end?(this.setEndBefore(end),domUtils.remove(end)):this.collapse(!0),this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.
startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setEndBefore(this.endContainer)}return this},getClosedNode:function(){var node;if(!this.collapsed){var range=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(selectOneNode(range)){var child=range.startContainer.childNodes[range.startOffset];child&&child.nodeType==1&&(dtd.$empty[child.tagName]||dtd.$nonChild[child.tagName])&&(node=child)}}return node},select:browser.ie?function(noFillData,textRange){var nativeRange;this.collapsed||this.shrinkBoundary();var node=this.getClosedNode();if(node&&!textRange){try{nativeRange=this.document.body.createControlRange(),nativeRange.addElement(node),nativeRange
.select()}catch(e){}return this}var bookmark=this.createBookmark(),start=bookmark.start,end;nativeRange=this.document.body.createTextRange(),nativeRange.moveToElementText(start),nativeRange.moveStart("character",1);if(!this.collapsed){var nativeRangeEnd=this.document.body.createTextRange();end=bookmark.end,nativeRangeEnd.moveToElementText(end),nativeRange.setEndPoint("EndToEnd",nativeRangeEnd)}else if(!noFillData&&this.startContainer.nodeType!=3){var tmpText=this.document.createTextNode(fillChar),tmp=this.document.createElement("span");tmp.appendChild(this.document.createTextNode(fillChar)),start.parentNode.insertBefore(tmp,start),start.parentNode.insertBefore(tmpText,start),removeFillData(this.document,tmpText),fillData=tmpText,mergeSibling(tmp,"previousSibling"),mergeSibling(start,"nextSibling"),nativeRange.moveStart("character",-1),nativeRange.collapse(!0)}this.moveToBookmark(bookmark),tmp&&domUtils.remove(tmp);try{nativeRange.select()}catch(e){}return this}:function(notInsertFillData
){function checkOffset(rng){function check(node,offset,dir){node.nodeType==3&&node.nodeValue.length<offset&&(rng[dir+"Offset"]=node.nodeValue.length)}check(rng.startContainer,rng.startOffset,"start"),check(rng.endContainer,rng.endOffset,"end")}var win=domUtils.getWindow(this.document),sel=win.getSelection(),txtNode;browser.gecko?this.body.focus():win.focus();if(sel){sel.removeAllRanges();if(this.collapsed&&!notInsertFillData){var start=this.startContainer,child=start;start.nodeType==1&&(child=start.childNodes[this.startOffset]),(start.nodeType!=3||!this.startOffset)&&(child?!child.previousSibling||child.previousSibling.nodeType!=3:!start.lastChild||start.lastChild.nodeType!=3)&&(txtNode=this.document.createTextNode(fillChar),this.insertNode(txtNode),removeFillData(this.document,txtNode),mergeSibling(txtNode,"previousSibling"),mergeSibling(txtNode,"nextSibling"),fillData=txtNode,this.setStart(txtNode,browser.webkit?1:0).collapse(!0))}var nativeRange=this.document.createRange();if(this.collapsed&&
browser.opera&&this.startContainer.nodeType==1){var child=this.startContainer.childNodes[this.startOffset];if(!child)child=this.startContainer.lastChild,child&&domUtils.isBr(child)&&this.setStartBefore(child).collapse(!0);else{while(child&&domUtils.isBlockElm(child)){if(child.nodeType!=1||!child.childNodes[0])break;child=child.childNodes[0]}child&&this.setStartBefore(child).collapse(!0)}}checkOffset(this),nativeRange.setStart(this.startContainer,this.startOffset),nativeRange.setEnd(this.endContainer,this.endOffset),sel.addRange(nativeRange)}return this},createAddress:function(ignoreEnd,ignoreTxt){var addr={},me=this;function getAddress(isStart){var node=isStart?me.startContainer:me.endContainer,parents=domUtils.findParents(node,!0,function(node){return!domUtils.isBody(node)}),addrs=[];for(var i=0,ci;ci=parents[i++];)addrs.push(domUtils.getNodeIndex(ci,ignoreTxt));var firstIndex=0;if(ignoreTxt)if(node.nodeType==3){var tmpNode=node.previousSibling;while(tmpNode&&tmpNode.nodeType==3)firstIndex+=
tmpNode.nodeValue.replace(fillCharReg,"").length,tmpNode=tmpNode.previousSibling;firstIndex+=isStart?me.startOffset:me.endOffset}else{node=node.childNodes[isStart?me.startOffset:me.endOffset];if(node)firstIndex=domUtils.getNodeIndex(node,ignoreTxt);else{node=isStart?me.startContainer:me.endContainer;var first=node.firstChild;while(first){if(domUtils.isFillChar(first)){first=first.nextSibling;continue}firstIndex++;if(first.nodeType==3)while(first&&first.nodeType==3)first=first.nextSibling;else first=first.nextSibling}}}else firstIndex=isStart?domUtils.isFillChar(node)?0:me.startOffset:me.endOffset;return firstIndex<0&&(firstIndex=0),addrs.push(firstIndex),addrs}return addr.startAddress=getAddress(!0),ignoreEnd||(addr.endAddress=me.collapsed?[].concat(addr.startAddress):getAddress()),addr},moveToAddress:function(addr,ignoreEnd){var me=this;function getNode(address,isStart){var tmpNode=me.body,parentNode,offset;for(var i=0,ci,l=address.length;i<l;i++){ci=address[i],parentNode=tmpNode,tmpNode=
tmpNode.childNodes[ci];if(!tmpNode){offset=ci;break}}isStart?tmpNode?me.setStartBefore(tmpNode):me.setStart(parentNode,offset):tmpNode?me.setEndBefore(tmpNode):me.setEnd(parentNode,offset)}return getNode(addr.startAddress,!0),!ignoreEnd&&addr.endAddress&&getNode(addr.endAddress),me},equals:function(rng){for(var p in this)if(this.hasOwnProperty(p)&&this[p]!==rng[p])return!1;return!0},scrollIntoView:function(){var $span=$('<span style="padding:0;margin:0;display:block;border:0">&nbsp;</span>');this.cloneRange().insertNode($span.get(0));var winScrollTop=$(window).scrollTop(),winHeight=$(window).height(),spanTop=$span.offset().top;if(spanTop<winScrollTop-winHeight||spanTop>winScrollTop+winHeight)spanTop>winScrollTop+winHeight?window.scrollTo(0,spanTop-winHeight+$span.height()):window.scrollTo(0,winScrollTop-spanTop);$span.remove()},getOffset:function(){var bk=this.createBookmark(),offset=$(bk.start).css("display","inline-block").offset();return this.moveToBookmark(bk),offset}}})(),function(
){function getBoundaryInformation(range,start){var getIndex=domUtils.getNodeIndex;range=range.duplicate(),range.collapse(start);var parent=range.parentElement();if(!parent.hasChildNodes())return{container:parent,offset:0};var siblings=parent.children,child,testRange=range.duplicate(),startIndex=0,endIndex=siblings.length-1,index=-1,distance;while(startIndex<=endIndex){index=Math.floor((startIndex+endIndex)/2),child=siblings[index],testRange.moveToElementText(child);var position=testRange.compareEndPoints("StartToStart",range);if(position>0)endIndex=index-1;else{if(!(position<0))return{container:parent,offset:getIndex(child)};startIndex=index+1}}if(index==-1){testRange.moveToElementText(parent),testRange.setEndPoint("StartToStart",range),distance=testRange.text.replace(/(\r\n|\r)/g,"\n").length,siblings=parent.childNodes;if(!distance)return child=siblings[siblings.length-1],{container:child,offset:child.nodeValue.length};var i=siblings.length;while(distance>0)distance-=siblings[--i].nodeValue
.length;return{container:siblings[i],offset:-distance}}testRange.collapse(position>0),testRange.setEndPoint(position>0?"StartToStart":"EndToStart",range),distance=testRange.text.replace(/(\r\n|\r)/g,"\n").length;if(!distance)return dtd.$empty[child.tagName]||dtd.$nonChild[child.tagName]?{container:parent,offset:getIndex(child)+(position>0?0:1)}:{container:child,offset:position>0?0:child.childNodes.length};while(distance>0)try{var pre=child;child=child[position>0?"previousSibling":"nextSibling"],distance-=child.nodeValue.length}catch(e){return{container:parent,offset:getIndex(pre)}}return{container:child,offset:position>0?-distance:child.nodeValue.length+distance}}function transformIERangeToRange(ieRange,range){if(ieRange.item)range.selectNode(ieRange.item(0));else{var bi=getBoundaryInformation(ieRange,!0);range.setStart(bi.container,bi.offset),ieRange.compareEndPoints("StartToEnd",ieRange)!=0&&(bi=getBoundaryInformation(ieRange,!1),range.setEnd(bi.container,bi.offset))}return range}function _getIERange
(sel,txtRange){var ieRange;try{ieRange=sel.getNative(txtRange).createRange()}catch(e){return null}var el=ieRange.item?ieRange.item(0):ieRange.parentElement();return(el.ownerDocument||el)===sel.document?ieRange:null}var Selection=dom.Selection=function(doc,body){var me=this;me.document=doc,me.body=body,browser.ie9below&&$(body).on("beforedeactivate",function(){me._bakIERange=me.getIERange()}).on("activate",function(){try{var ieNativRng=_getIERange(me);(!ieNativRng||!me.rangeInBody(ieNativRng))&&me._bakIERange&&me._bakIERange.select()}catch(ex){}me._bakIERange=null})};Selection.prototype={hasNativeRange:function(){var rng;if(!browser.ie||browser.ie9above){var nativeSel=this.getNative();if(!nativeSel.rangeCount)return!1;rng=nativeSel.getRangeAt(0)}else rng=_getIERange(this);return this.rangeInBody(rng)},getNative:function(txtRange){var doc=this.document;try{return doc?browser.ie9below||txtRange?doc.selection:domUtils.getWindow(doc).getSelection():null}catch(e){return null}},getIERange:function(
txtRange){var ieRange=_getIERange(this,txtRange);if(!ieRange||!this.rangeInBody(ieRange,txtRange))if(this._bakIERange)return this._bakIERange;return ieRange},rangeInBody:function(rng,txtRange){var node=browser.ie9below||txtRange?rng.item?rng.item():rng.parentElement():rng.startContainer;return node===this.body||domUtils.inDoc(node,this.body)},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var start=this.getStart();return start?domUtils.findParents(start,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){return this.hasNativeRange()},getRange:function(){var me=this;function optimze(range){var child=me.body.firstChild,collapsed=range.collapsed;while(child&&child.firstChild)range.setStart(child,0),child=
child.firstChild;range.startContainer||range.setStart(me.body,0),collapsed&&range.collapse(!0)}if(me._cachedRange!=null)return this._cachedRange;var range=new dom.Range(me.document,me.body);if(browser.ie9below){var nativeRange=me.getIERange();if(nativeRange&&this.rangeInBody(nativeRange))try{transformIERangeToRange(nativeRange,range)}catch(e){optimze(range)}else optimze(range)}else{var sel=me.getNative();if(sel&&sel.rangeCount&&me.rangeInBody(sel.getRangeAt(0))){var firstRange=sel.getRangeAt(0),lastRange=sel.getRangeAt(sel.rangeCount-1);range.setStart(firstRange.startContainer,firstRange.startOffset).setEnd(lastRange.endContainer,lastRange.endOffset),range.collapsed&&domUtils.isBody(range.startContainer)&&!range.startOffset&&optimze(range)}else{if(this._bakRange&&(this._bakRange.startContainer===this.body||domUtils.inDoc(this._bakRange.startContainer,this.body)))return this._bakRange;optimze(range)}}return this._bakRange=range},getStart:function(){if(this._cachedStartElement)return this
._cachedStartElement;var range=browser.ie9below?this.getIERange():this.getRange(),tmpRange,start,tmp,parent;if(browser.ie9below){if(!range)return this.document.body.firstChild;if(range.item)return range.item(0);tmpRange=range.duplicate(),tmpRange.text.length>0&&tmpRange.moveStart("character",1),tmpRange.collapse(1),start=tmpRange.parentElement(),parent=tmp=range.parentElement();while(tmp=tmp.parentNode)if(tmp==start){start=parent;break}}else{start=range.startContainer,start.nodeType==1&&start.hasChildNodes()&&(start=start.childNodes[Math.min(start.childNodes.length-1,range.startOffset)]);if(start.nodeType==3)return start.parentNode}return start},getText:function(){var nativeSel,nativeRange;return this.isFocus()&&(nativeSel=this.getNative())?(nativeRange=browser.ie9below?nativeSel.createRange():nativeSel.getRangeAt(0),browser.ie9below?nativeRange.text:nativeRange.toString()):""}}}(),function(){var uid=0,_selectionChangeTimer;function setValue(form,editor){var textarea;if(editor.textarea)
if(utils.isString(editor.textarea)){for(var i=0,ti,tis=domUtils.getElementsByTagName(form,"textarea");ti=tis[i++];)if(ti.id=="umeditor_textarea_"+editor.options.textarea){textarea=ti;break}}else textarea=editor.textarea;textarea||(form.appendChild(textarea=domUtils.createElement(document,"textarea",{name:editor.options.textarea,id:"umeditor_textarea_"+editor.options.textarea,style:"display:none"})),editor.textarea=textarea),textarea.value=editor.hasContents()?editor.options.allHtmlEnabled?editor.getAllHtml():editor.getContent(null,null,!0):""}function loadPlugins(me){for(var pi in UM.plugins)me.options.excludePlugins.indexOf(pi)==-1&&(UM.plugins[pi].call(me),me.plugins[pi]=1);me.langIsReady=!0,me.fireEvent("langReady")}function checkCurLang(I18N){for(var lang in I18N)return lang}var Editor=UM.Editor=function(options){var me=this;me.uid=uid++,EventBase.call(me),me.commands={},me.options=utils.extend(utils.clone(options||{}),UMEDITOR_CONFIG,!0),me.shortcutkeys={},me.inputRules=[],me.outputRules=
[],me.setOpt({isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,enterTag:"p",lang:"zh-cn",langPath:me.options.UMEDITOR_HOME_URL+"lang/",theme:"default",themePath:me.options.UMEDITOR_HOME_URL+"themes/",allHtmlEnabled:!1,autoSyncData:!0,autoHeightEnabled:!0,excludePlugins:""}),me.plugins={},utils.isEmptyObject(UM.I18N)?utils.loadFile(document,{src:me.options.langPath+me.options.lang+"/"+me.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){loadPlugins(me)}):(me.options.lang=checkCurLang(UM.I18N),loadPlugins(me))};Editor.prototype={ready:function(fn){var me=this;fn&&(me.isReady?fn.apply(me):me.addListener("ready",fn))},setOpt:function(key,val){var obj={};utils.isString(key)?obj[key]=val:obj=key,utils.extend(this.options,obj,!0)},getOpt:function(key){return this.options[key]||""},destroy:function(){var me=this;me.fireEvent("destroy");var container=
me.container.parentNode;container===document.body&&(container=me.container);var textarea=me.textarea;textarea?textarea.style.display="":(textarea=document.createElement("textarea"),container.parentNode.insertBefore(textarea,container)),textarea.style.width=me.body.offsetWidth+"px",textarea.style.height=me.body.offsetHeight+"px",textarea.value=me.getContent(),textarea.id=me.key,container.contains(textarea)&&$(textarea).insertBefore(container),container.innerHTML="",domUtils.remove(container),UM.clearCache(me.id);for(var p in me)me.hasOwnProperty(p)&&delete this[p]},initialCont:function(holder){if(holder){holder.getAttribute("name")&&(this.options.textarea=holder.getAttribute("name"));if(holder&&/script|textarea/ig.test(holder.tagName)){var newDiv=document.createElement("div");holder.parentNode.insertBefore(newDiv,holder),this.options.initialContent=UM.htmlparser(holder.value||holder.innerHTML||this.options.initialContent).toHtml(),holder.className&&(newDiv.className=holder.className),holder
.style.cssText&&(newDiv.style.cssText=holder.style.cssText),/textarea/i.test(holder.tagName)?(this.textarea=holder,this.textarea.style.display="none"):(holder.parentNode.removeChild(holder),holder.id&&(newDiv.id=holder.id)),holder=newDiv,holder.innerHTML=""}return holder}return null},render:function(container){var me=this,options=me.options,getStyleValue=function(attr){return parseInt($(container).css(attr))};utils.isString(container)&&(container=document.getElementById(container));if(container){this.id=container.getAttribute("id"),UM.setEditor(this),utils.cssRule("edui-style-body",me.options.initialStyle,document),container=this.initialCont(container),container.className+=" edui-body-container",options.initialFrameWidth?options.minFrameWidth=options.initialFrameWidth:options.minFrameWidth=options.initialFrameWidth=$(container).width()||UM.defaultWidth,options.initialFrameHeight?options.minFrameHeight=options.initialFrameHeight:options.initialFrameHeight=options.minFrameHeight=$(container
).height()||UM.defaultHeight,container.style.width=/%$/.test(options.initialFrameWidth)?"100%":options.initialFrameWidth-getStyleValue("padding-left")-getStyleValue("padding-right")+"px";var height=/%$/.test(options.initialFrameHeight)?"100%":options.initialFrameHeight-getStyleValue("padding-top")-getStyleValue("padding-bottom");this.options.autoHeightEnabled?(container.style.minHeight=height+"px",container.style.height="",browser.ie&&browser.version<=6&&(container.style.height=height,container.style.setExpression("height","this.scrollHeight <= "+height+' ? "'+height+'px" : "auto"'))):$(container).height(height),container.style.zIndex=options.zIndex,this._setup(container)}},_setup:function(cont){var me=this,options=me.options;cont.contentEditable=!0,document.body.spellcheck=!1,me.document=document,me.window=document.defaultView||document.parentWindow,me.body=cont,me.$body=$(cont),me.selection=new dom.Selection(document,me.body),me._isEnabled=!1;var geckoSel;browser.gecko&&(geckoSel=this
.selection.getNative())&&geckoSel.removeAllRanges(),this._initEvents();for(var form=cont.parentNode;form&&!domUtils.isBody(form);form=form.parentNode)if(form.tagName=="FORM"){me.form=form,me.options.autoSyncData?$(cont).on("blur",function(){setValue(form,me)}):$(form).on("submit",function(){setValue(this,me)});break}if(options.initialContent)if(options.autoClearinitialContent){var oldExecCommand=me.execCommand;me.execCommand=function(){return me.fireEvent("firstBeforeExecCommand"),oldExecCommand.apply(me,arguments)},this._setDefaultContent(options.initialContent)}else this.setContent(options.initialContent,!1,!0);domUtils.isEmptyNode(me.body)&&(me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),options.focus&&setTimeout(function(){me.focus(me.options.focusInEnd),!me.options.autoClearinitialContent&&me._selectionChange()},0),me.container||(me.container=cont.parentNode),me._bindshortcutKeys(),me.isReady=1,me.fireEvent("ready"),options.onready&&options.onready.call(me),(!browser.ie||browser
.ie9above)&&$(me.body).on("blur focus",function(e){var nSel=me.selection.getNative();if(e.type=="blur")nSel.rangeCount>0&&(me._bakRange=nSel.getRangeAt(0));else{try{me._bakRange&&nSel.addRange(me._bakRange)}catch(e){}me._bakRange=null}}),!options.isShow&&me.setHide(),options.readonly&&me.setDisabled()},sync:function(formId){var me=this,form=formId?document.getElementById(formId):domUtils.findParent(me.body.parentNode,function(node){return node.tagName=="FORM"},!0);form&&setValue(form,me)},setHeight:function(height,notSetHeight){!notSetHeight&&(this.options.initialFrameHeight=height),this.options.autoHeightEnabled?($(this.body).css({"min-height":height+"px"}),browser.ie&&browser.version<=6&&this.container&&(this.container.style.height=height,this.container.style.setExpression("height","this.scrollHeight <= "+height+' ? "'+height+'px" : "auto"'))):$(this.body).height(height),this.fireEvent("resize")},setWidth:function(width){this.$container&&this.$container.width(width),$(this.body).width
(width-$(this.body).css("padding-left").replace("px","")*1-$(this.body).css("padding-right").replace("px","")*1),this.fireEvent("resize")},addshortcutkey:function(cmd,keys){var obj={};keys?obj[cmd]=keys:obj=cmd,utils.extend(this.shortcutkeys,obj)},_bindshortcutKeys:function(){var me=this,shortcutkeys=this.shortcutkeys;me.addListener("keydown",function(type,e){var keyCode=e.keyCode||e.which;for(var i in shortcutkeys){var tmp=shortcutkeys[i].split(",");for(var t=0,ti;ti=tmp[t++];){ti=ti.split(":");var key=ti[0],param=ti[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(key.toLowerCase())||/^(\d+)$/.test(key))if((RegExp.$1=="ctrl"?e.ctrlKey||e.metaKey:0)&&(RegExp.$2!=""?e[RegExp.$2.slice(1)+"Key"]:1)&&keyCode==RegExp.$3||keyCode==RegExp.$1)me.queryCommandState(i,param)!=-1&&me.execCommand(i,param),domUtils.preventDefault(e)}}})},getContent:function(cmd,fn,notSetCursor,ignoreBlank,formatter){var me=this;cmd&&utils.isFunction(cmd)&&(fn=cmd,cmd="");if(fn?!fn():!this.hasContents())return"";me.fireEvent("beforegetcontent"
);var root=UM.htmlparser(me.body.innerHTML,ignoreBlank);return me.filterOutputRule(root),me.fireEvent("aftergetcontent",root),root.toHtml(formatter)},getAllHtml:function(){var me=this,headHtml=[],html="";me.fireEvent("getAllHtml",headHtml);if(browser.ie&&browser.version>8){var headHtmlForIE9="";utils.each(me.document.styleSheets,function(si){headHtmlForIE9+=si.href?'<link rel="stylesheet" type="text/css" href="'+si.href+'" />':"<style>"+si.cssText+"</style>"}),utils.each(me.document.getElementsByTagName("script"),function(si){headHtmlForIE9+=si.outerHTML})}return"<html><head>"+(me.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+me.options.charset+'"/>':"")+(headHtmlForIE9||me.document.getElementsByTagName("head")[0].innerHTML)+headHtml.join("\n")+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+me.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var reg=new RegExp(domUtils.fillChar,"g"),html=this.body.innerHTML.replace(/[\n\r]/g
,"");return html=html.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""}),html.replace(reg,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var reg=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(reg,"").replace(/\u00a0/g," ")},setContent:function(html,isAppendTo,notFireSelectionchange){var me=this;me.fireEvent("beforesetcontent",html);var root=UM.htmlparser(html);me.filterInputRule(root),html=root.toHtml(),me.body.innerHTML=(isAppendTo?me.body.innerHTML:"")+html;function isCdataDiv(node){return node.tagName=="DIV"&&node.getAttribute("cdata_tag")}if(me.options.enterTag=="p"){var child=this.body.firstChild,tmpNode;if(!child||child.nodeType==1&&(dtd.$cdata[child.tagName]||isCdataDiv(child)||domUtils.isCustomeNode(child))&&child===this.body.lastChild)this.body.innerHTML="<p>"+(browser.
ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var p=me.document.createElement("p");while(child){while(child&&(child.nodeType==3||child.nodeType==1&&dtd.p[child.tagName]&&!dtd.$cdata[child.tagName]))tmpNode=child.nextSibling,p.appendChild(child),child=tmpNode;if(p.firstChild){if(!child){me.body.appendChild(p);break}child.parentNode.insertBefore(p,child),p=me.document.createElement("p")}child=child.nextSibling}}}me.fireEvent("aftersetcontent"),me.fireEvent("contentchange"),!notFireSelectionchange&&me._selectionChange(),me._bakRange=me._bakIERange=me._bakNativeRange=null;var geckoSel;browser.gecko&&(geckoSel=this.selection.getNative())&&geckoSel.removeAllRanges(),me.options.autoSyncData&&me.form&&setValue(me.form,me)},focus:function(toEnd){try{var me=this,rng=me.selection.getRange();toEnd?rng.setStartAtLast(me.body.lastChild).setCursor(!1,!0):rng.select(!0),this.fireEvent("focus")}catch(e){}},blur:function(){var sel=this.selection.getNative();sel.empty?sel.empty():sel.removeAllRanges
(),this.fireEvent("blur")},isFocus:function(){return this.fireEvent("isfocus")===!0?!0:this.selection.isFocus()},_initEvents:function(){var me=this,cont=me.body,_proxyDomEvent=function(){me._proxyDomEvent.apply(me,arguments)};$(cont).on("click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart",_proxyDomEvent).on("focus blur",_proxyDomEvent).on("mouseup keydown",function(evt){if(evt.type=="keydown"&&(evt.ctrlKey||evt.metaKey||evt.shiftKey||evt.altKey))return;if(evt.button==2)return;me._selectionChange(250,evt)})},_proxyDomEvent:function(evt){return this.fireEvent(evt.type.replace(/^on/,""),evt)},_selectionChange:function(delay,evt){var me=this,hackForMouseUp=!1,mouseX,mouseY;if(browser.ie&&browser.version<9&&evt&&evt.type=="mouseup"){var range=this.selection.getRange();range.collapsed||(hackForMouseUp=!0,mouseX=evt.clientX,mouseY=evt.clientY)}clearTimeout(_selectionChangeTimer),_selectionChangeTimer=setTimeout(function(){if(!me.selection.getNative())return;
var ieRange;if(hackForMouseUp&&me.selection.getNative().type=="None"){ieRange=me.document.body.createTextRange();try{ieRange.moveToPoint(mouseX,mouseY)}catch(ex){ieRange=null}}var bakGetIERange;ieRange&&(bakGetIERange=me.selection.getIERange,me.selection.getIERange=function(){return ieRange}),me.selection.cache(),bakGetIERange&&(me.selection.getIERange=bakGetIERange),me.selection._cachedRange&&me.selection._cachedStartElement&&(me.fireEvent("beforeselectionchange"),me.fireEvent("selectionchange",!!evt),me.fireEvent("afterselectionchange"),me.selection.clear())},delay||50)},_callCmdFn:function(fnName,args){args=Array.prototype.slice.call(args,0);var cmdName=args.shift().toLowerCase(),cmd,cmdFn;cmd=this.commands[cmdName]||UM.commands[cmdName],cmdFn=cmd&&cmd[fnName];if((!cmd||!cmdFn)&&fnName=="queryCommandState")return 0;if(cmdFn)return cmdFn.apply(this,[cmdName].concat(args))},execCommand:function(cmdName){if(!this.isFocus()){var bakRange=this.selection._bakRange;bakRange?bakRange.select(
):this.focus(!0)}cmdName=cmdName.toLowerCase();var me=this,result,cmd=me.commands[cmdName]||UM.commands[cmdName];return!cmd||!cmd.execCommand?null:(!cmd.notNeedUndo&&!me.__hasEnterExecCommand?(me.__hasEnterExecCommand=!0,me.queryCommandState.apply(me,arguments)!=-1&&(me.fireEvent("saveScene"),me.fireEvent("beforeexeccommand",cmdName),result=this._callCmdFn("execCommand",arguments),!cmd.ignoreContentChange&&!me._ignoreContentChange&&me.fireEvent("contentchange"),me.fireEvent("afterexeccommand",cmdName),me.fireEvent("saveScene")),me.__hasEnterExecCommand=!1):(result=this._callCmdFn("execCommand",arguments),!me.__hasEnterExecCommand&&!cmd.ignoreContentChange&&!me._ignoreContentChange&&me.fireEvent("contentchange")),!me.__hasEnterExecCommand&&!cmd.ignoreContentChange&&!me._ignoreContentChange&&me._selectionChange(),result)},queryCommandState:function(cmdName){try{return this._callCmdFn("queryCommandState",arguments)}catch(e){return 0}},queryCommandValue:function(cmdName){try{return this._callCmdFn
("queryCommandValue",arguments)}catch(e){return null}},hasContents:function(tags){if(tags)for(var i=0,ci;ci=tags[i++];)if(this.body.getElementsByTagName(ci).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;tags=["div"];for(i=0;ci=tags[i++];){var nodes=domUtils.getElementsByTagName(this.body,ci);for(var n=0,cn;cn=nodes[n++];)if(domUtils.isCustomeNode(cn))return!0}return!1},reset:function(){this.fireEvent("reset")},isEnabled:function(){return this._isEnabled!=1},setEnabled:function(){var me=this,range;me.body.contentEditable=!0;if(me.lastBk){range=me.selection.getRange();try{range.moveToBookmark(me.lastBk),delete me.lastBk}catch(e){range.setStartAtFirst(me.body).collapse(!0)}range.select(!0)}me.bkqueryCommandState&&(me.queryCommandState=me.bkqueryCommandState,delete me.bkqueryCommandState),me._bkproxyDomEvent&&(me._proxyDomEvent=me._bkproxyDomEvent,delete me._bkproxyDomEvent),me.fireEvent("setEnabled")},enable:function(){return this.setEnabled()},setDisabled:function(except
,keepDomEvent){var me=this;me.body.contentEditable=!1,me._except=except?utils.isArray(except)?except:[except]:[],me.lastBk||(me.lastBk=me.selection.getRange().createBookmark(!0)),me.bkqueryCommandState||(me.bkqueryCommandState=me.queryCommandState,me.queryCommandState=function(type){return utils.indexOf(me._except,type)!=-1?me.bkqueryCommandState.apply(me,arguments):-1}),!keepDomEvent&&!me._bkproxyDomEvent&&(me._bkproxyDomEvent=me._proxyDomEvent,me._proxyDomEvent=function(){return!1}),me.fireEvent("selectionchange"),me.fireEvent("setDisabled",me._except)},disable:function(except){return this.setDisabled(except)},_setDefaultContent:function(){function clear(){var me=this;me.document.getElementById("initContent")&&(me.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",me.removeListener("firstBeforeExecCommand focus",clear),setTimeout(function(){me.focus(),me._selectionChange()},0))}return function(cont){var me=this;me.body.innerHTML='<p id="initContent">'+cont+"</p>",me.addListener("firstBeforeExecCommand focus"
,clear)}}(),setShow:function(){var me=this,range=me.selection.getRange();if(me.container.style.display=="none"){try{range.moveToBookmark(me.lastBk),delete me.lastBk}catch(e){range.setStartAtFirst(me.body).collapse(!0)}setTimeout(function(){range.select(!0)},100),me.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var me=this;me.lastBk||(me.lastBk=me.selection.getRange().createBookmark(!0)),me.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(path){var lang=UM.I18N[this.options.lang];if(!lang)throw Error("not import language file");path=(path||"").split(".");for(var i=0,ci;ci=path[i++];){lang=lang[ci];if(!lang)break}return lang},getContentLength:function(ingoneHtml,tagNames){var count=this.getContent(!1,!1,!0).length;if(ingoneHtml){tagNames=(tagNames||[]).concat(["hr","img","iframe"]),count=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var i=0,ci;ci=tagNames[i++];)count+=this.body.getElementsByTagName(
ci).length}return count},addInputRule:function(rule,ignoreUndo){rule.ignoreUndo=ignoreUndo,this.inputRules.push(rule)},filterInputRule:function(root,isUndoLoad){for(var i=0,ci;ci=this.inputRules[i++];){if(isUndoLoad&&ci.ignoreUndo)continue;ci.call(this,root)}},addOutputRule:function(rule,ignoreUndo){rule.ignoreUndo=ignoreUndo,this.outputRules.push(rule)},filterOutputRule:function(root,isUndoLoad){for(var i=0,ci;ci=this.outputRules[i++];){if(isUndoLoad&&ci.ignoreUndo)continue;ci.call(this,root)}}},utils.inherits(Editor,EventBase)}();var filterWord=UM.filterWord=function(){function isWordDocument(str){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(str)}function transUnit(v){return v=v.replace(/[\d.]+\w+/g,function(m){return utils.transUnitToPx(m)}),v}function filterPasteWord(str){return str.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(str){if(browser.opera)return"";try{if(/Bitmap/i.test(str
))return"";var width=str.match(/width:([ \d.]*p[tx])/i)[1],height=str.match(/height:([ \d.]*p[tx])/i)[1],src=str.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+transUnit(width)+'" height="'+transUnit(height)+'" src="'+src+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(str,name,marks,val){return name=="class"&&val=="MsoListParagraph"?str:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,b,c){return c.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(str,tag,tmp,style){var n=[],s=style.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").split(/;\s*/g);for(var i=0,v;v=s[i];i++){var name,value,parts=v.split(":"
);if(parts.length==2){name=parts[0].toLowerCase(),value=parts[1].toLowerCase();if(/^(background)\w*/.test(name)&&value.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(name)&&/^0\w+$/.test(value))continue;switch(name){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(tag)||(n[i]=name.replace(/^mso-|-alt$/g,"")+":"+transUnit(value));continue;case"horiz-align":n[i]="text-align:"+value;continue;case"vert-align":n[i]="vertical-align:"+value;continue;case"font-color":case"mso-foreground":n[i]="color:"+value;continue;case"mso-background":case"mso-highlight":n[i]="background:"+value;continue;case"mso-default-height":n[i]="min-height:"+transUnit(value);continue;case"mso-default-width":n[i]="min-width:"+transUnit
(value);continue;case"mso-padding-between-alt":n[i]="border-collapse:separate;border-spacing:"+transUnit(value);continue;case"text-line-through":if(value=="single"||value=="double")n[i]="text-decoration:line-through";continue;case"mso-zero-height":value=="yes"&&(n[i]="display:none");continue;case"margin":if(!/[1-9]/.test(value))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(name)||/text\-indent|padding|margin/.test(name)&&/\-[\d.]+/.test(value))continue;n[i]=name+":"+parts[1]}}return tag+(n.length?' style="'+n.join(";").replace(/;{2,}/g,";")+'"':"")}).replace(/[\d.]+(cm|pt)/g,function(str){return utils.transUnitToPx(str)})}return function(html){return isWordDocument(html)?filterPasteWord(html):html}}();(function(){var uNode=UM.uNode=function(obj){this.type=obj.type,this.data=obj.data,this.tagName=obj.tagName,this.parentNode=obj.parentNode,this.attrs=
obj.attrs||{},this.children=obj.children},notTransAttrs={href:1,src:1,_src:1,_href:1,cdata_data:1},notTransTagName={style:1,script:1},indentChar="    ",breakChar="\n";function insertLine(arr,current,begin){return arr.push(breakChar),current+(begin?1:-1)}function insertIndent(arr,current){for(var i=0;i<current;i++)arr.push(indentChar)}uNode.createElement=function(html){return/[<>]/.test(html)?UM.htmlparser(html).children[0]:new uNode({type:"element",children:[],tagName:html})},uNode.createText=function(data,noTrans){return new UM.uNode({type:"text",data:noTrans?data:utils.unhtml(data||"")})};function nodeToHtml(node,arr,formatter,current){switch(node.type){case"root":for(var i=0,ci;ci=node.children[i++];)formatter&&ci.type=="element"&&!dtd.$inlineWithA[ci.tagName]&&i>1&&(insertLine(arr,current,!0),insertIndent(arr,current)),nodeToHtml(ci,arr,formatter,current);break;case"text":isText(node,arr);break;case"element":isElement(node,arr,formatter,current);break;case"comment":isComment(node,arr
,formatter)}return arr}function isText(node,arr){node.parentNode.tagName=="pre"?arr.push(node.data):arr.push(notTransTagName[node.parentNode.tagName]?utils.html(node.data):node.data.replace(/[ ]{2}/g," &nbsp;"))}function isElement(node,arr,formatter,current){var attrhtml="";if(node.attrs){attrhtml=[];var attrs=node.attrs;for(var a in attrs)attrhtml.push(a+(attrs[a]!==undefined?'="'+(notTransAttrs[a]?utils.html(attrs[a]).replace(/["]/g,function(a){return"&quot;"}):utils.unhtml(attrs[a]))+'"':""));attrhtml=attrhtml.join(" ")}arr.push("<"+node.tagName+(attrhtml?" "+attrhtml:"")+(dtd.$empty[node.tagName]?"/":"")+">"),formatter&&!dtd.$inlineWithA[node.tagName]&&node.tagName!="pre"&&node.children&&node.children.length&&(current=insertLine(arr,current,!0),insertIndent(arr,current));if(node.children&&node.children.length)for(var i=0,ci;ci=node.children[i++];)formatter&&ci.type=="element"&&!dtd.$inlineWithA[ci.tagName]&&i>1&&(insertLine(arr,current),insertIndent(arr,current)),nodeToHtml(ci,arr,formatter
,current);dtd.$empty[node.tagName]||(formatter&&!dtd.$inlineWithA[node.tagName]&&node.tagName!="pre"&&node.children&&node.children.length&&(current=insertLine(arr,current),insertIndent(arr,current)),arr.push("</"+node.tagName+">"))}function isComment(node,arr){arr.push("<!--"+node.data+"-->")}function getNodeById(root,id){var node;if(root.type=="element"&&root.getAttr("id")==id)return root;if(root.children&&root.children.length)for(var i=0,ci;ci=root.children[i++];)if(node=getNodeById(ci,id))return node}function getNodesByTagName(node,tagName,arr){node.type=="element"&&node.tagName==tagName&&arr.push(node);if(node.children&&node.children.length)for(var i=0,ci;ci=node.children[i++];)getNodesByTagName(ci,tagName,arr)}function nodeTraversal(root,fn){if(root.children&&root.children.length)for(var i=0,ci;ci=root.children[i];)nodeTraversal(ci,fn),ci.parentNode&&(ci.children&&ci.children.length&&fn(ci),ci.parentNode&&i++);else fn(root)}uNode.prototype={toHtml:function(formatter){var arr=[];return nodeToHtml
(this,arr,formatter,0),arr.join("")},innerHTML:function(htmlstr){if(this.type!="element"||dtd.$empty[this.tagName])return this;if(utils.isString(htmlstr)){if(this.children)for(var i=0,ci;ci=this.children[i++];)ci.parentNode=null;this.children=[];var tmpRoot=UM.htmlparser(htmlstr);for(var i=0,ci;ci=tmpRoot.children[i++];)this.children.push(ci),ci.parentNode=this;return this}var tmpRoot=new UM.uNode({type:"root",children:this.children});return tmpRoot.toHtml()},innerText:function(textStr,noTrans){if(this.type!="element"||dtd.$empty[this.tagName])return this;if(textStr){if(this.children)for(var i=0,ci;ci=this.children[i++];)ci.parentNode=null;return this.children=[],this.appendChild(uNode.createText(textStr,noTrans)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return this.type=="element"?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling
:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i];i++)if(ci===this)return i==0?null:parent.children[i-1]},nextSibling:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i++];)if(ci===this)return parent.children[i]},replaceChild:function(target,source){if(this.children){target.parentNode&&target.parentNode.removeChild(target);for(var i=0,ci;ci=this.children[i];i++)if(ci===source)return this.children.splice(i,1,target),source.parentNode=null,target.parentNode=this,target}},appendChild:function(node){if(this.type=="root"||this.type=="element"&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),node.parentNode&&node.parentNode.removeChild(node);for(var i=0,ci;ci=this.children[i];i++)if(ci===node){this.children.splice(i,1);break}return this.children.push(node),node.parentNode=this,node}},insertBefore:function(target,source){if(this.children){target.parentNode&&target.parentNode.removeChild(target);for(var i=0,ci;ci=this.children[i];i++
)if(ci===source)return this.children.splice(i,0,target),target.parentNode=this,target}},insertAfter:function(target,source){if(this.children){target.parentNode&&target.parentNode.removeChild(target);for(var i=0,ci;ci=this.children[i];i++)if(ci===source)return this.children.splice(i+1,0,target),target.parentNode=this,target}},removeChild:function(node,keepChildren){if(this.children)for(var i=0,ci;ci=this.children[i];i++)if(ci===node){this.children.splice(i,1),ci.parentNode=null;if(keepChildren&&ci.children&&ci.children.length)for(var j=0,cj;cj=ci.children[j];j++)this.children.splice(i+j,0,cj),cj.parentNode=this;return ci}},getAttr:function(attrName){return this.attrs&&this.attrs[attrName.toLowerCase()]},setAttr:function(attrName,attrVal){if(!attrName){delete this.attrs;return}this.attrs||(this.attrs={});if(utils.isObject(attrName))for(var a in attrName)attrName[a]?this.attrs[a.toLowerCase()]=attrName[a]:delete this.attrs[a];else attrVal?this.attrs[attrName.toLowerCase()]=attrVal:delete this
.attrs[attrName]},hasAttr:function(attrName){var attrVal=this.getAttr(attrName);return attrVal!==null&&attrVal!==undefined},getIndex:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i];i++)if(ci===this)return i;return-1},getNodeById:function(id){var node;if(this.children&&this.children.length)for(var i=0,ci;ci=this.children[i++];)if(node=getNodeById(ci,id))return node},getNodesByTagName:function(tagNames){tagNames=utils.trim(tagNames).replace(/[ ]{2,}/g," ").split(" ");var arr=[],me=this;return utils.each(tagNames,function(tagName){if(me.children&&me.children.length)for(var i=0,ci;ci=me.children[i++];)getNodesByTagName(ci,tagName,arr)}),arr},getStyle:function(name){var cssStyle=this.getAttr("style");if(!cssStyle)return"";var reg=new RegExp("(^|;)\\s*"+name+":([^;]+)","i"),match=cssStyle.match(reg);return match&&match[0]?match[2]:""},setStyle:function(name,val){function exec(name,val){var reg=new RegExp("(^|;)\\s*"+name+":([^;]+;?)","gi");cssStyle=cssStyle.replace(
reg,"$1"),val&&(cssStyle=name+":"+utils.unhtml(val)+";"+cssStyle)}var cssStyle=this.getAttr("style");cssStyle||(cssStyle="");if(utils.isObject(name))for(var a in name)exec(a,name[a]);else exec(name,val);this.setAttr("style",utils.trim(cssStyle))},hasClass:function(className){if(this.hasAttr("class")){var classNames=this.getAttr("class").split(/\s+/),hasClass=!1;return $.each(classNames,function(key,item){item===className&&(hasClass=!0)}),hasClass}return!1},addClass:function(className){var classes=null,hasClass=!1;this.hasAttr("class")?(classes=this.getAttr("class"),classes=classes.split(/\s+/),classes.forEach(function(item){if(item===className){hasClass=!0;return}}),!hasClass&&classes.push(className),this.setAttr("class",classes.join(" "))):this.setAttr("class",className)},removeClass:function(className){if(this.hasAttr("class")){var cl=this.getAttr("class");cl=cl.replace(new RegExp("\\b"+className+"\\b","g"),""),this.setAttr("class",utils.trim(cl).replace(/[ ]{2,}/g," "))}},traversal:function(
fn){return this.children&&this.children.length&&nodeTraversal(this,fn),this}}})();var htmlparser=UM.htmlparser=function(htmlstr,ignoreBlank){var re_tag=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,re_attr=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,allowEmptyTags={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};htmlstr=htmlstr.replace(new RegExp(domUtils.fillChar,"g"),""),ignoreBlank||(htmlstr=htmlstr.replace(new RegExp("[\\r\\t\\n"+(ignoreBlank?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(ignoreBlank?"":" ")+"]*","g"),function(a,b){return b&&allowEmptyTags[b.toLowerCase()]?a.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):a.replace(new RegExp("^[\\r\\n"+(ignoreBlank?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(ignoreBlank?"":" ")+"]+$"),"")}));var notTransAttrs={href:1,src:1},uNode=UM.uNode,needParentNode={td:"tr"
,tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},needChild={ol:"li",ul:"li"};function text(parent,data){if(needChild[parent.tagName]){var tmpNode=uNode.createElement(needChild[parent.tagName]);parent.appendChild(tmpNode),tmpNode.appendChild(uNode.createText(data)),parent=tmpNode}else parent.appendChild(uNode.createText(data))}function element(parent,tagName,htmlattr){var needParentTag;if(needParentTag=needParentNode[tagName]){var tmpParent=parent,hasParent;while(tmpParent.type!="root"){if(utils.isArray(needParentTag)?utils.indexOf(needParentTag,tmpParent.tagName)!=-1:needParentTag==tmpParent.tagName){parent=tmpParent,hasParent=!0;break}tmpParent=tmpParent.parentNode}hasParent||(parent=element(parent,utils.isArray(needParentTag)?needParentTag[0]:needParentTag))}var elm=new uNode({parentNode:parent,type:"element",tagName:tagName.toLowerCase(),children:dtd.$empty[tagName]?null:[]});if(htmlattr){var attrs=
{},match;while(match=re_attr.exec(htmlattr))attrs[match[1].toLowerCase()]=notTransAttrs[match[1].toLowerCase()]?match[2]||match[3]||match[4]:utils.unhtml(match[2]||match[3]||match[4]);elm.attrs=attrs}return parent.children.push(elm),dtd.$empty[tagName]?parent:elm}function comment(parent,data){parent.children.push(new uNode({type:"comment",data:data,parentNode:parent}))}var match,currentIndex=0,nextIndex=0,root=new uNode({type:"root",children:[]}),currentParent=root;while(match=re_tag.exec(htmlstr)){currentIndex=match.index;try{currentIndex>nextIndex&&text(currentParent,htmlstr.slice(nextIndex,currentIndex));if(match[3])dtd.$cdata[currentParent.tagName]?text(currentParent,match[0]):currentParent=element(currentParent,match[3].toLowerCase(),match[4]);else if(match[1]){if(currentParent.type!="root")if(dtd.$cdata[currentParent.tagName]&&!dtd.$cdata[match[1]])text(currentParent,match[0]);else{var tmpParent=currentParent;while(currentParent.type=="element"&&currentParent.tagName!=match[1].toLowerCase
()){currentParent=currentParent.parentNode;if(currentParent.type=="root")throw currentParent=tmpParent,"break"}currentParent=currentParent.parentNode}}else match[2]&&comment(currentParent,match[2])}catch(e){}nextIndex=re_tag.lastIndex}return nextIndex<htmlstr.length&&text(currentParent,htmlstr.slice(nextIndex)),root},filterNode=UM.filterNode=function(){function filterNode(node,rules){switch(node.type){case"text":break;case"element":var val;if(val=rules[node.tagName])if(val==="-")node.parentNode.removeChild(node);else if(utils.isFunction(val)){var parentNode=node.parentNode,index=node.getIndex();val(node);if(node.parentNode){if(node.children)for(var i=0,ci;ci=node.children[i];)filterNode(ci,rules),ci.parentNode&&i++}else for(var i=index,ci;ci=parentNode.children[i];)filterNode(ci,rules),ci.parentNode&&i++}else{var attrs=val.$;if(attrs&&node.attrs){var tmpAttrs={},tmpVal;for(var a in attrs){tmpVal=node.getAttr(a);if(a=="style"&&utils.isArray(attrs[a])){var tmpCssStyle=[];utils.each(attrs[
a],function(v){var tmp;(tmp=node.getStyle(v))&&tmpCssStyle.push(v+":"+tmp)}),tmpVal=tmpCssStyle.join(";")}tmpVal&&(tmpAttrs[a]=tmpVal)}node.attrs=tmpAttrs}if(node.children)for(var i=0,ci;ci=node.children[i];)filterNode(ci,rules),ci.parentNode&&i++}else if(dtd.$cdata[node.tagName])node.parentNode.removeChild(node);else{var parentNode=node.parentNode,index=node.getIndex();node.parentNode.removeChild(node,!0);for(var i=index,ci;ci=parentNode.children[i];)filterNode(ci,rules),ci.parentNode&&i++}break;case"comment":node.parentNode.removeChild(node)}}return function(root,rules){if(utils.isEmptyObject(rules))return root;var val;(val=rules["-"])&&utils.each(val.split(" "),function(k){rules[k]="-"});for(var i=0,ci;ci=root.children[i];)filterNode(ci,rules),ci.parentNode&&i++;return root}}();UM.commands.inserthtml={execCommand:function(command,html,notNeedFilter){var me=this,range,div;if(!html)return;if(me.fireEvent("beforeinserthtml",html)===!0)return;range=me.selection.getRange(),div=range.document
.createElement("div"),div.style.display="inline";if(!notNeedFilter){var root=UM.htmlparser(html);me.options.filterRules&&UM.filterNode(root,me.options.filterRules),me.filterInputRule(root),html=root.toHtml()}div.innerHTML=utils.trim(html);if(!range.collapsed){var tmpNode=range.startContainer;domUtils.isFillChar(tmpNode)&&range.setStartBefore(tmpNode),tmpNode=range.endContainer,domUtils.isFillChar(tmpNode)&&range.setEndAfter(tmpNode),range.txtToElmBoundary(),range.endContainer&&range.endContainer.nodeType==1&&(tmpNode=range.endContainer.childNodes[range.endOffset],tmpNode&&domUtils.isBr(tmpNode)&&range.setEndAfter(tmpNode)),range.startOffset==0&&(tmpNode=range.startContainer,domUtils.isBoundaryNode(tmpNode,"firstChild")&&(tmpNode=range.endContainer,range.endOffset==(tmpNode.nodeType==3?tmpNode.nodeValue.length:tmpNode.childNodes.length)&&domUtils.isBoundaryNode(tmpNode,"lastChild")&&(me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",range.setStart(me.body.firstChild,0).collapse(!0))
)),!range.collapsed&&range.deleteContents();if(range.startContainer.nodeType==1){var child=range.startContainer.childNodes[range.startOffset],pre;if(child&&domUtils.isBlockElm(child)&&(pre=child.previousSibling)&&domUtils.isBlockElm(pre)){range.setEnd(pre,pre.childNodes.length).collapse();while(child.firstChild)pre.appendChild(child.firstChild);domUtils.remove(child)}}}var child,parent,pre,tmp,hadBreak=0,nextNode;range.inFillChar()&&(child=range.startContainer,domUtils.isFillChar(child)?(range.setStartBefore(child).collapse(!0),domUtils.remove(child)):domUtils.isFillChar(child,!0)&&(child.nodeValue=child.nodeValue.replace(fillCharReg,""),range.startOffset--,range.collapsed&&range.collapse(!0)));while(child=div.firstChild){if(hadBreak){var p=me.document.createElement("p");while(child&&(child.nodeType==3||!dtd.$block[child.tagName]))nextNode=child.nextSibling,p.appendChild(child),child=nextNode;p.firstChild&&(child=p)}range.insertNode(child),nextNode=child.nextSibling;if(!hadBreak&&child.
nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(child)){parent=domUtils.findParent(child,function(node){return domUtils.isBlockElm(node)});if(parent&&parent.tagName.toLowerCase()!="body"&&(!dtd[parent.tagName][child.nodeName]||child.parentNode!==parent)){if(!dtd[parent.tagName][child.nodeName])pre=parent;else{tmp=child.parentNode;while(tmp!==parent)pre=tmp,tmp=tmp.parentNode}domUtils.breakParent(child,pre||tmp);var pre=child.previousSibling;domUtils.trimWhiteTextNode(pre),pre.childNodes.length||domUtils.remove(pre),!browser.ie&&(next=child.nextSibling)&&domUtils.isBlockElm(next)&&next.lastChild&&!domUtils.isBr(next.lastChild)&&next.appendChild(me.document.createElement("br")),hadBreak=1}}var next=child.nextSibling;if(!div.firstChild&&next&&domUtils.isBlockElm(next)){range.setStart(next,0).collapse(!0);break}range.setEndAfter(child).collapse()}child=range.startContainer,nextNode&&domUtils.isBr(nextNode)&&domUtils.remove(nextNode);if(domUtils.isBlockElm(child)&&domUtils.isEmptyNode(child
))if(nextNode=child.nextSibling)domUtils.remove(child),nextNode.nodeType==1&&dtd.$block[nextNode.tagName]&&range.setStart(nextNode,0).collapse(!0).shrinkBoundary();else try{child.innerHTML=browser.ie?domUtils.fillChar:" "}catch(e){range.setStartBefore(child),domUtils.remove(child)}try{if(browser.ie9below&&range.startContainer.nodeType==1&&!range.startContainer.childNodes[range.startOffset]){var start=range.startContainer,pre=start.childNodes[range.startOffset-1];if(pre&&pre.nodeType==1&&dtd.$empty[pre.tagName]){var txt=this.document.createTextNode(domUtils.fillChar);range.insertNode(txt).setStart(txt,0).collapse(!0)}}setTimeout(function(){range.select(!0)})}catch(e){}setTimeout(function(){range=me.selection.getRange(),range.scrollIntoView(),me.fireEvent("afterinserthtml")},200)}},UM.commands.insertimage={execCommand:function(cmd,opt){opt=utils.isArray(opt)?opt:[opt];if(!opt.length)return;var me=this,html=[],str="",ci;ci=opt[0];if(opt.length==1)str='<img src="'+ci.src+'" '+(ci._src?' _src="'+
ci._src+'" ':"")+(ci.width?'width="'+ci.width+'" ':"")+(ci.height?' height="'+ci.height+'" ':"")+(ci["floatStyle"]=="left"||ci["floatStyle"]=="right"?' style="float:'+ci.floatStyle+';"':"")+(ci.title&&ci.title!=""?' title="'+ci.title+'"':"")+(ci.border&&ci.border!="0"?' border="'+ci.border+'"':"")+(ci.alt&&ci.alt!=""?' alt="'+ci.alt+'"':"")+(ci.hspace&&ci.hspace!="0"?' hspace = "'+ci.hspace+'"':"")+(ci.vspace&&ci.vspace!="0"?' vspace = "'+ci.vspace+'"':"")+"/>",ci["floatStyle"]=="center"&&(str='<p style="text-align: center">'+str+"</p>"),html.push(str);else for(var i=0;ci=opt[i++];)str="<p "+(ci["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+ci.src+'" '+(ci.width?'width="'+ci.width+'" ':"")+(ci._src?' _src="'+ci._src+'" ':"")+(ci.height?' height="'+ci.height+'" ':"")+' style="'+(ci.floatStyle&&ci["floatStyle"]!="center"?"float:"+ci.floatStyle+";":"")+(ci.border||"")+'" '+(ci.title?' title="'+ci.title+'"':"")+" /></p>",html.push(str);me.execCommand("insertHtml",html
.join(""),!0)}},UM.plugins.justify=function(){var me=this;$.each("justifyleft justifyright justifycenter justifyfull".split(" "),function(i,cmdName){me.commands[cmdName]={execCommand:function(cmdName){return this.document.execCommand(cmdName)},queryCommandValue:function(cmdName){var val=this.document.queryCommandValue(cmdName);return val===!0||val==="true"?cmdName.replace(/justify/,""):""},queryCommandState:function(cmdName){return this.document.queryCommandState(cmdName)?1:0}}})},UM.plugins.font=function(){var me=this,fonts={forecolor:"forecolor",backcolor:"backcolor",fontsize:"fontsize",fontfamily:"fontname"},cmdNameToStyle={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"},cmdNameToAttr={forecolor:"color",fontsize:"size",fontfamily:"face"};me.setOpt({fontfamily:[{name:"songti",val:"\u5b8b\u4f53,SimSun"},{name:"yahei",val:"\u5fae\u8f6f\u96c5\u9ed1,Microsoft YaHei"},{name:"kaiti",val:"\u6977\u4f53,\u6977\u4f53_GB2312, SimKai"},{name:"heiti",val
:"\u9ed1\u4f53, SimHei"},{name:"lishu",val:"\u96b6\u4e66, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"},{name:"sans-serif",val:"sans-serif"}],fontsize:[10,12,16,18,24,32,48]}),me.addOutputRule(function(root){utils.each(root.getNodesByTagName("font"),function(node){if(node.tagName=="font"){var cssStyle=[];for(var p in node.attrs)switch(p){case"size":var val=node.attrs[p];$.each({10:"1",12:"2",16:"3",18:"4",24:"5",32:"6",48:"7"},function(k,v){if(v==val)return val=k,!1}),cssStyle.push("font-size:"+val+"px");break;case"color":cssStyle.push("color:"+node.attrs[p]);break;case"face":cssStyle.push("font-family:"+node.attrs[p]);break;case"style":cssStyle.push(node.attrs[p])}node.attrs={style:cssStyle.join(";")}}node.tagName="span",node.parentNode.tagName=="span"&&node.parentNode
.children.length==1&&($.each(node.attrs,function(k,v){node.parentNode.attrs[k]=k=="style"?node.parentNode.attrs[k]+v:v}),node.parentNode.removeChild(node,!0))})});for(var p in fonts)(function(cmd){me.commands[cmd]={execCommand:function(cmdName,value){if(value=="transparent")return;var rng=this.selection.getRange();if(!rng.collapsed){cmdName=="fontsize"&&(value={10:"1",12:"2",16:"3",18:"4",24:"5",32:"6",48:"7"}[(value+"").replace(/px/,"")]),this.document.execCommand(fonts[cmdName],!1,value),browser.gecko&&$.each(this.$body.find("a"),function(i,a){var parent=a.parentNode;if(parent.lastChild===parent.firstChild&&/FONT|SPAN/.test(parent.tagName)){var cloneNode=parent.cloneNode(!1);cloneNode.innerHTML=a.innerHTML,$(a).html("").append(cloneNode).insertBefore(parent),$(parent).remove()}});if(!browser.ie){var nativeRange=this.selection.getNative().getRangeAt(0),common=nativeRange.commonAncestorContainer,rng=this.selection.getRange(),bk=rng.createBookmark(!0);$(common).find("a").each(function(i,
n){var parent=n.parentNode;if(parent.nodeName=="FONT"){var font=parent.cloneNode(!1);font.innerHTML=n.innerHTML,$(n).html("").append(font)}}),rng.moveToBookmark(bk).select()}return!0}var span=$("<span></span>").css(cmdNameToStyle[cmdName],value)[0];rng.insertNode(span).setStart(span,0).setCursor()},queryCommandValue:function(cmdName){var start=me.selection.getStart(),val=$(start).css(cmdNameToStyle[cmdName]);return val===undefined&&(val=$(start).attr(cmdNameToAttr[cmdName])),val?utils.fixColor(cmdName,val).replace(/px/,""):""},queryCommandState:function(cmdName){return this.queryCommandValue(cmdName)}}})(p)},UM.plugins.link=function(){var me=this;me.setOpt("autourldetectinie",!1),browser.ie&&this.options.autourldetectinie===!1&&this.addListener("keyup",function(cmd,evt){var me=this,keyCode=evt.keyCode;if(keyCode==13||keyCode==32){var rng=me.selection.getRange(),start=rng.startContainer;if(keyCode==13){if(start.nodeName=="P"){var pre=start.previousSibling;if(pre&&pre.nodeType==1){var pre=
pre.lastChild;pre&&pre.nodeName=="A"&&!pre.getAttribute("_href")&&domUtils.remove(pre,!0)}}}else keyCode==32&&start.nodeType==3&&/^\s$/.test(start.nodeValue)&&(start=start.previousSibling,start&&start.nodeName=="A"&&!start.getAttribute("_href")&&domUtils.remove(start,!0))}}),this.addOutputRule(function(root){$.each(root.getNodesByTagName("a"),function(i,a){var _href=utils.html(a.getAttr("_href"));/^(ftp|https?|\/|file)/.test(_href)||(_href="http://"+_href),a.setAttr("href",_href),a.setAttr("_href"),a.getAttr("title")==""&&a.setAttr("title")})}),this.addInputRule(function(root){$.each(root.getNodesByTagName("a"),function(i,a){a.setAttr("_href",utils.html(a.getAttr("href")))})}),me.commands.link={execCommand:function(cmdName,opt){var me=this,rng=me.selection.getRange();if(rng.collapsed){var start=rng.startContainer;(start=domUtils.findParentByTagName(start,"a",!0))?($(start).attr(opt),rng.selectNode(start).select()):rng.insertNode($("<a>"+opt.href+"</a>").attr(opt)[0]).select()}else me.document
.execCommand("createlink",!1,"_umeditor_link"),utils.each(domUtils.getElementsByTagName(me.body,"a",function(n){return n.getAttribute("href")=="_umeditor_link"}),function(l){$(l).text()=="_umeditor_link"&&$(l).text(opt.href),domUtils.setAttributes(l,opt),rng.selectNode(l).select()})},queryCommandState:function(){return this.queryCommandValue("link")?1:0},queryCommandValue:function(){var path=this.selection.getStartElementPath(),result;return $.each(path,function(i,n){if(n.nodeName=="A")return result=n,!1}),result}},me.commands.unlink={execCommand:function(){this.document.execCommand("unlink")}}},UM.commands.print={execCommand:function(){var me=this,id="editor_print_"+ +(new Date);$('<iframe src="" id="'+id+'" name="'+id+'" frameborder="0"></iframe>').attr("id",id).css({width:"0px",height:"0px",overflow:"hidden","float":"left",position:"absolute",top:"-10000px",left:"-10000px"}).appendTo(me.$container.find(".edui-dialog-container"));var w=window.open("",id,""),d=w.document;d.open(),d.write
("<html><head></head><body><div>"+this.getContent(null,null,!0)+"</div><script>"+"setTimeout(function(){"+"window.print();"+"setTimeout(function(){"+"window.parent.$('#"+id+"').remove();"+"},100);"+"},200);"+"</script></body></html>"),d.close()},notNeedUndo:1},UM.plugins.paragraph=function(){var me=this;me.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),me.commands.paragraph={execCommand:function(cmdName,style){return this.document.execCommand("formatBlock",!1,"<"+style+">")},queryCommandValue:function(){try{var val=this.document.queryCommandValue("formatBlock")}catch(e){}return val}}},UM.plugins.horizontal=function(){var me=this;me.commands.horizontal={execCommand:function(){this.document.execCommand("insertHorizontalRule");var rng=me.selection.getRange().txtToElmBoundary(!0),start=rng.startContainer;if(domUtils.isBody(rng.startContainer)){var next=rng.startContainer.childNodes[rng.startOffset];next||(next=$("<p></p>").appendTo(rng.startContainer).html(browser.ie?"&nbsp;"
:"<br/>")[0]),rng.setStart(next,0).setCursor()}else{while(dtd.$inline[start.tagName]&&start.lastChild===start.firstChild){var parent=start.parentNode;parent.appendChild(start.firstChild),parent.removeChild(start),start=parent}while(dtd.$inline[start.tagName])start=start.parentNode;if(start.childNodes.length==1&&start.lastChild.nodeName=="HR"){var hr=start.lastChild;$(hr).insertBefore(start),rng.setStart(start,0).setCursor()}else{hr=$("hr",start)[0],domUtils.breakParent(hr,start);var pre=hr.previousSibling;pre&&domUtils.isEmptyBlock(pre)&&$(pre).remove(),rng.setStart(hr.nextSibling,0).setCursor()}}}}},UM.commands.cleardoc={execCommand:function(){var me=this,range=me.selection.getRange();me.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",range.setStart(me.body.firstChild,0).setCursor(!1,!0),setTimeout(function(){me.fireEvent("clearDoc")},0)}},UM.plugins.undo=function(){var saveSceneTimer,me=this,maxUndoCount=me.options.maxUndoCount||20,maxInputCount=me.options.maxInputCount||20,fillchar=new RegExp
(domUtils.fillChar+"|</hr>","gi"),noNeedFillCharTags={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},orgState=me.options.autoClearEmptyNode;function compareAddr(indexA,indexB){if(indexA.length!=indexB.length)return 0;for(var i=0,l=indexA.length;i<l;i++)if(indexA[i]!=indexB[i])return 0;return 1}function compareRangeAddress(rngAddrA,rngAddrB){return rngAddrA.collapsed!=rngAddrB.collapsed?0:!compareAddr(rngAddrA.startAddress,rngAddrB.startAddress)||!compareAddr(rngAddrA.endAddress,rngAddrB.endAddress)?0:1}function UndoManager(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0)return this.restore(0)}this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1)return this
.restore(this.index)}this.restore(++this.index)}},this.restore=function(){var me=this.editor,scene=this.list[this.index],root=UM.htmlparser(scene.content.replace(fillchar,""));me.options.autoClearEmptyNode=!1,me.filterInputRule(root,!0),me.options.autoClearEmptyNode=orgState,me.body.innerHTML=root.toHtml(),me.fireEvent("afterscencerestore"),browser.ie&&utils.each(domUtils.getElementsByTagName(me.document,"td th caption p"),function(node){domUtils.isEmptyNode(node)&&domUtils.fillNode(me.document,node)});try{var rng=(new dom.Range(me.document,me.body)).moveToAddress(scene.address);if(browser.ie&&rng.collapsed&&rng.startContainer.nodeType==1){var tmpNode=rng.startContainer.childNodes[rng.startOffset];(!tmpNode||tmpNode.nodeType==1&&dtd.$empty[tmpNode])&&rng.insertNode(me.document.createTextNode(" ")).collapse(!0)}rng.select(noNeedFillCharTags[rng.startContainer.nodeName.toLowerCase()])}catch(e){}this.update(),this.clearKey(),me.fireEvent("reset",!0)},this.getScene=function(){var me=this.editor
,rng=me.selection.getRange(),rngAddress=rng.createAddress(!1,!0);me.fireEvent("beforegetscene");var root=UM.htmlparser(me.body.innerHTML,!0);me.options.autoClearEmptyNode=!1,me.filterOutputRule(root,!0),me.options.autoClearEmptyNode=orgState;var cont=root.toHtml();return browser.ie&&(cont=cont.replace(/>&nbsp;</g,"><").replace(/\s*</g,"<").replace(/>\s*/g,">")),me.fireEvent("aftergetscene"),{address:rngAddress,content:cont}},this.save=function(notCompareRange,notSetCursor){clearTimeout(saveSceneTimer);var currentScene=this.getScene(notSetCursor),lastScene=this.list[this.index];if(lastScene&&lastScene.content==currentScene.content&&(notCompareRange?1:compareRangeAddress(lastScene.address,currentScene.address)))return;this.list=this.list.slice(0,this.index+1),this.list.push(currentScene),this.list.length>maxUndoCount&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update()},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1
]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){keycont=0,lastKeyCode=null}}me.undoManger=new UndoManager,me.undoManger.editor=me;function saveScene(){this.undoManger.save()}me.addListener("saveScene",function(){var args=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,args)}),me.addListener("beforeexeccommand",saveScene),me.addListener("afterexeccommand",saveScene),me.addListener("reset",function(type,exclude){exclude||this.undoManger.reset()}),me.commands.redo=me.commands.undo={execCommand:function(cmdName){this.undoManger[cmdName]()},queryCommandState:function(cmdName){return this.undoManger["has"+(cmdName.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var keys={16:1,17:1,18:1,37:1,38:1,39:1,40:1},keycont=0,lastKeyCode,inputType=!1;me.addListener("ready",function(){$(this.body).on("compositionstart",function(){inputType=!0}).on("compositionend",function(){inputType=!1
})}),me.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89,shift+ctrl+z"});var isCollapsed=!0;me.addListener("keydown",function(type,evt){var me=this,keyCode=evt.keyCode||evt.which;if(!keys[keyCode]&&!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){if(inputType)return;if(!me.selection.getRange().collapsed){me.undoManger.save(!1,!0),isCollapsed=!1;return}me.undoManger.list.length==0&&me.undoManger.save(!0),clearTimeout(saveSceneTimer);function save(cont){cont.selection.getRange().collapsed&&cont.fireEvent("contentchange"),cont.undoManger.save(!1,!0),cont.fireEvent("selectionchange")}saveSceneTimer=setTimeout(function(){if(inputType){var interalTimer=setInterval(function(){inputType||(save(me),clearInterval(interalTimer))},300);return}save(me)},200),lastKeyCode=keyCode,keycont++,keycont>=maxInputCount&&save(me)}}),me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(!keys[keyCode]&&!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){if(inputType)return;isCollapsed||
(this.undoManger.save(!1,!0),isCollapsed=!0)}})},UM.plugins.paste=function(){function getClipboardData(callback){var doc=this.document;if(doc.getElementById("baidu_pastebin"))return;var range=this.selection.getRange(),bk=range.createBookmark(),pastebin=doc.createElement("div");pastebin.id="baidu_pastebin",browser.webkit&&pastebin.appendChild(doc.createTextNode(domUtils.fillChar+domUtils.fillChar)),this.body.appendChild(pastebin),bk.start.style.display="",pastebin.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+$(bk.start).position().top+"px",range.selectNodeContents(pastebin).select(!0),setTimeout(function(){if(browser.webkit)for(var i=0,pastebins=doc.querySelectorAll("#baidu_pastebin"),pi;pi=pastebins[i++];){if(!domUtils.isEmptyNode(pi)){pastebin=pi;break}domUtils.remove(pi)}try{pastebin.parentNode.removeChild(pastebin)}catch(e){}range.moveToBookmark(bk).select(!0),callback(pastebin)},0)}var me=this;function filter(div){var html
;if(div.firstChild){var nodes=domUtils.getElementsByTagName(div,"span");for(var i=0,ni;ni=nodes[i++];)(ni.id=="_baidu_cut_start"||ni.id=="_baidu_cut_end")&&domUtils.remove(ni);if(browser.webkit){var brs=div.querySelectorAll("div br");for(var i=0,bi;bi=brs[i++];){var pN=bi.parentNode;pN.tagName=="DIV"&&pN.childNodes.length==1&&(pN.innerHTML="<p><br/></p>",domUtils.remove(pN))}var divs=div.querySelectorAll("#baidu_pastebin");for(var i=0,di;di=divs[i++];){var tmpP=me.document.createElement("p");di.parentNode.insertBefore(tmpP,di);while(di.firstChild)tmpP.appendChild(di.firstChild);domUtils.remove(di)}var metas=div.querySelectorAll("meta");for(var i=0,ci;ci=metas[i++];)domUtils.remove(ci);var brs=div.querySelectorAll("br");for(i=0;ci=brs[i++];)/^apple-/i.test(ci.className)&&domUtils.remove(ci)}if(browser.gecko){var dirtyNodes=div.querySelectorAll("[_moz_dirty]");for(i=0;ci=dirtyNodes[i++];)ci.removeAttribute("_moz_dirty")}if(!browser.ie){var spans=div.querySelectorAll("span.Apple-style-span"
);for(var i=0,ci;ci=spans[i++];)domUtils.remove(ci,!0)}html=div.innerHTML,html=UM.filterWord(html);var root=UM.htmlparser(html);me.options.filterRules&&UM.filterNode(root,me.options.filterRules),me.filterInputRule(root);if(browser.webkit){var br=root.lastChild();br&&br.type=="element"&&br.tagName=="br"&&root.removeChild(br),utils.each(me.body.querySelectorAll("div"),function(node){domUtils.isEmptyBlock(node)&&domUtils.remove(node)})}html={html:root.toHtml()},me.fireEvent("beforepaste",html,root);if(!html.html)return;me.queryCommandState("pasteplain")===1?me.execCommand("insertHtml",UM.filterNode(root,me.options.filterTxtRules).toHtml(),!0):(UM.filterNode(root,me.options.filterTxtRules),txtContent=root.toHtml(),htmlContent=html.html,address=me.selection.getRange().createAddress(!0),me.execCommand("insertHtml",me.getOpt("retainOnlyLabelPasted")===!0?getPureHtml(htmlContent):htmlContent,!0)),me.fireEvent("afterpaste",html)}}me.addListener("ready",function(){$(me.body).on("cut",function(){var range=
me.selection.getRange();!range.collapsed&&me.undoManger&&me.undoManger.save()}).on(browser.ie||browser.opera?"keydown":"paste",function(e){if((browser.ie||browser.opera)&&(!e.ctrlKey&&!e.metaKey||e.keyCode!="86"))return;getClipboardData.call(me,function(div){filter(div)})})})},UM.plugins.pasteplain=function(){var me=this;me.setOpt({pasteplain:!1,filterTxtRules:function(){function transP(node){node.tagName="p",node.setStyle()}function removeNode(node){node.parentNode.removeChild(node,!0)}function transBreak(node){node.parentNode.insertAfter(UM.uNode.createText("&nbsp;"),node),node.parentNode.removeChild(node,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:removeNode,div:function(node){var tmpNode,p=UM.uNode.createElement("p");while(tmpNode=node.firstChild())tmpNode.type=="text"||!UM.dom.dtd.$block[tmpNode.tagName]?p.appendChild(tmpNode):p.firstChild()?(node.parentNode.insertBefore(p,node),p=UM.uNode.createElement("p")):node.parentNode.insertBefore(tmpNode,node)
;p.firstChild()&&node.parentNode.insertBefore(p,node),node.parentNode.removeChild(node)},ol:removeNode,ul:removeNode,dl:removeNode,dt:removeNode,dd:removeNode,li:removeNode,caption:transP,th:transP,tr:transP,h1:transP,h2:transP,h3:transP,h4:transP,h5:transP,h6:transP,td:function(node){var txt=!!node.innerText();txt&&node.parentNode.insertAfter(UM.uNode.createText(" &nbsp; &nbsp;"),node),node.parentNode.removeChild(node,node.innerText())}}}()});var pasteplain=me.options.pasteplain;me.commands.pasteplain={queryCommandState:function(){return pasteplain?1:0},execCommand:function(){pasteplain=!pasteplain|0},notNeedUndo:1}},UM.plugins.list=function(){var me=this;me.setOpt({insertorderedlist:{decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:""}}),this.addInputRule(function(root){utils.each(root.getNodesByTagName("li"),function(node){node.children.length==0&&node.parentNode.removeChild(node)})}),me.commands.insertorderedlist=
me.commands.insertunorderedlist={execCommand:function(cmdName){this.document.execCommand(cmdName);var rng=this.selection.getRange(),bk=rng.createBookmark(!0);return this.$body.find("ol,ul").each(function(i,n){var parent=n.parentNode;parent.tagName=="P"&&parent.lastChild===parent.firstChild&&($(n).children().each(function(j,li){var p=parent.cloneNode(!1);$(p).append(li.innerHTML),$(li).html("").append(p)}),$(n).insertBefore(parent),$(parent).remove()),dtd.$inline[parent.tagName]&&(parent.tagName=="SPAN"&&$(n).children().each(function(k,li){var span=parent.cloneNode(!1);if(li.firstChild.nodeName!="P"){while(li.firstChild)span.appendChild(li.firstChild);$("<p></p>").appendTo(li).append(span)}else{while(li.firstChild)span.appendChild(li.firstChild);$(li.firstChild).append(span)}}),domUtils.remove(parent,!0))}),rng.moveToBookmark(bk).select(),!0},queryCommandState:function(cmdName){return this.document.queryCommandState(cmdName)}}},function(){var sourceEditors={textarea:function(editor,holder
){var textarea=holder.ownerDocument.createElement("textarea");return textarea.style.cssText="resize:none;border:0;padding:0;margin:0;overflow-y:auto;outline:0",browser.ie&&browser.version<8&&(textarea.style.width=holder.offsetWidth+"px",textarea.style.height=holder.offsetHeight+"px",holder.onresize=function(){textarea.style.width=holder.offsetWidth+"px",textarea.style.height=holder.offsetHeight+"px"}),holder.appendChild(textarea),{container:textarea,setContent:function(content){textarea.value=content},getContent:function(){return textarea.value},select:function(){var range;browser.ie?(range=textarea.createTextRange(),range.collapse(!0),range.select()):(textarea.setSelectionRange(0,0),textarea.focus())},dispose:function(){holder.removeChild(textarea),holder.onresize=null,textarea=null,holder=null}}}};UM.plugins.source=function(){var me=this,opt=this.options,sourceMode=!1,sourceEditor;opt.sourceEditor="textarea",me.setOpt({sourceEditorFirst:!1});function createSourceEditor(holder){return sourceEditors
.textarea(me,holder)}var bakCssText,oldGetContent=me.getContent,bakAddress;me.commands.source={execCommand:function(){sourceMode=!sourceMode;if(sourceMode){bakAddress=me.selection.getRange().createAddress(!1,!0),me.undoManger&&me.undoManger.save(!0),browser.gecko&&(me.body.contentEditable=!1),me.body.style.cssText+=";position:absolute;left:-32768px;top:-32768px;",me.fireEvent("beforegetcontent");var root=UM.htmlparser(me.body.innerHTML);me.filterOutputRule(root),root.traversal(function(node){if(node.type=="element")switch(node.tagName){case"td":case"th":case"caption":node.children&&node.children.length==1&&node.firstChild().tagName=="br"&&node.removeChild(node.firstChild());break;case"pre":node.innerText(node.innerText().replace(/&nbsp;/g," "))}}),me.fireEvent("aftergetcontent");var content=root.toHtml(!0);sourceEditor=createSourceEditor(me.body.parentNode),sourceEditor.setContent(content);var getStyleValue=function(attr){return parseInt($(me.body).css(attr))};$(sourceEditor.container).
width($(me.body).width()+getStyleValue("padding-left")+getStyleValue("padding-right")).height($(me.body).height()),setTimeout(function(){sourceEditor.select()}),me.getContent=function(){return sourceEditor.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{me.$body.css({position:"",left:"",top:""});var cont=sourceEditor.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";cont=cont.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(a,b){return b&&!dtd.$inlineWithA[b.toLowerCase()]?a.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):a.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),me.setContent(cont),sourceEditor.dispose(),sourceEditor=null,me.getContent=oldGetContent;var first=me.body.firstChild;first||(me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),me.undoManger&&me.undoManger.save(!0),browser.gecko&&(me.body.contentEditable=!0);try{me.selection.getRange().moveToAddress(bakAddress).select()}catch(e){}}this.fireEvent("sourcemodechanged",sourceMode)},queryCommandState
:function(){return sourceMode|0},notNeedUndo:1};var oldQueryCommandState=me.queryCommandState;me.queryCommandState=function(cmdName){return cmdName=cmdName.toLowerCase(),sourceMode?cmdName in{source:1,fullscreen:1}?oldQueryCommandState.apply(this,arguments):-1:oldQueryCommandState.apply(this,arguments)}}}(),UM.plugins.enterkey=function(){var hTag,me=this,tag=me.options.enterTag;me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){var range=me.selection.getRange(),start=range.startContainer,doSave;if(!browser.ie){if(/h\d/i.test(hTag)){if(browser.gecko){var h=domUtils.findParentByTagName(start,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0);h||(me.document.execCommand("formatBlock",!1,"<p>"),doSave=1)}else if(start.nodeType==1){var tmp=me.document.createTextNode(""),div;range.insertNode(tmp),div=domUtils.findParentByTagName(tmp,"div",!0);if(div){var p=me.document.createElement("p");while(div.firstChild)p.appendChild(div.firstChild
);div.parentNode.insertBefore(p,div),domUtils.remove(div),range.setStartBefore(tmp).setCursor(),doSave=1}domUtils.remove(tmp)}me.undoManger&&doSave&&me.undoManger.save()}browser.opera&&range.select()}else me.fireEvent("saveScene",!0,!0)}}),me.addListener("keydown",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){if(me.fireEvent("beforeenterkeydown")){domUtils.preventDefault(evt);return}me.fireEvent("saveScene",!0,!0),hTag="";var range=me.selection.getRange();if(!range.collapsed){var start=range.startContainer,end=range.endContainer,startTd=domUtils.findParentByTagName(start,"td",!0),endTd=domUtils.findParentByTagName(end,"td",!0);if(startTd&&endTd&&startTd!==endTd||!startTd&&endTd||startTd&&!endTd){evt.preventDefault?evt.preventDefault():evt.returnValue=!1;return}}tag=="p"&&(browser.ie||(start=domUtils.findParentByTagName(range.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),!start&&!browser.opera?(me.document.execCommand("formatBlock"
,!1,"<p>"),browser.gecko&&(range=me.selection.getRange(),start=domUtils.findParentByTagName(range.startContainer,"p",!0),start&&domUtils.removeDirtyAttr(start))):(hTag=start.tagName,start.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(start))))}}),browser.ie&&me.addListener("setDisabled",function(){$(me.body).find("p").each(function(i,p){domUtils.isEmptyBlock(p)&&(p.innerHTML="&nbsp;")})})},UM.commands.preview={execCommand:function(){var w=window.open("","_blank",""),d=w.document,c=this.getContent(null,null,!0),path=this.getOpt("UMEDITOR_HOME_URL"),formula=c.indexOf("mathquill-embedded-latex")!=-1?'<link rel="stylesheet" href="'+path+'third-party/mathquill/mathquill.css"/>'+'<script src="'+path+'third-party/jquery.min.js"></script>'+'<script src="'+path+'third-party/mathquill/mathquill.min.js"></script>':"";d.open(),d.write("<html><head>"+formula+"</head><body><div>"+c+"</div></body></html>"),d.close()},notNeedUndo:1},UM.plugins.basestyle=function(){var basestyles=["bold"
,"underline","superscript","subscript","italic","strikethrough"],me=this;me.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+shift+85",strikeThrough:"ctrl+shift+83"}),me.addOutputRule(function(root){$.each(root.getNodesByTagName("b i u strike s"),function(i,node){switch(node.tagName){case"b":node.tagName="strong";break;case"i":node.tagName="em";break;case"u":node.tagName="span",node.setStyle("text-decoration","underline");break;case"s":case"strike":node.tagName="span",node.setStyle("text-decoration","line-through")}})}),$.each(basestyles,function(i,cmd){me.commands[cmd]={execCommand:function(cmdName){var rng=this.selection.getRange();if(rng.collapsed&&this.queryCommandState(cmdName)!=1){var node=this.document.createElement({bold:"strong",underline:"u",superscript:"sup",subscript:"sub",italic:"em",strikethrough:"strike"}[cmdName]);return rng.insertNode(node).setStart(node,0).setCursor(!1),!0}return this.document.execCommand(cmdName)},queryCommandState:function(cmdName){if(
browser.gecko)return this.document.queryCommandState(cmdName);var path=this.selection.getStartElementPath(),result=!1;return $.each(path,function(i,n){switch(cmdName){case"bold":if(n.nodeName=="STRONG"||n.nodeName=="B")return result=1,!1;break;case"underline":if(n.nodeName=="U"||n.nodeName=="SPAN"&&$(n).css("text-decoration")=="underline")return result=1,!1;break;case"superscript":if(n.nodeName=="SUP")return result=1,!1;break;case"subscript":if(n.nodeName=="SUB")return result=1,!1;break;case"italic":if(n.nodeName=="EM"||n.nodeName=="I")return result=1,!1;break;case"strikethrough":if(n.nodeName=="S"||n.nodeName=="STRIKE"||n.nodeName=="SPAN"&&$(n).css("text-decoration")=="line-through")return result=1,!1}}),result}}})},UM.plugins.video=function(){var me=this,div;function creatInsertStr(url,width,height,id,align,toEmbed){return toEmbed?'<embed type="application/x-shockwave-flash" class="edui-faked-video" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+url+'" width="'+width+'" height="'+
height+'"'+(align?' style="float:'+align+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(id?'id="'+id+'"':"")+' width="'+width+'" height="'+height+'" _url="'+url+'" class="edui-faked-video"'+' src="'+me.options.UMEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+me.options.UMEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(align?"float:"+align+";":"")+'" />'}function switchImgAndEmbed(root,img2embed){utils.each(root.getNodesByTagName(img2embed?"img":"embed"),function(node){if(node.getAttr("class")=="edui-faked-video"){var html=creatInsertStr(img2embed?node.getAttr("_url"):node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),null,node.getStyle("float")||"",img2embed);node.parentNode.replaceChild(UM.uNode.createElement(html),node)}})}me.addOutputRule(function(root){switchImgAndEmbed(root,!0)}),me.addInputRule(function(
root){switchImgAndEmbed(root)}),me.commands.insertvideo={execCommand:function(cmd,videoObjs){videoObjs=utils.isArray(videoObjs)?videoObjs:[videoObjs];var html=[],id="tmpVedio";for(var i=0,vi,len=videoObjs.length;i<len;i++)vi=videoObjs[i],html.push(creatInsertStr(vi.url,vi.width||420,vi.height||280,id+i,vi.align,!1));me.execCommand("inserthtml",html.join(""),!0)},queryCommandState:function(){var img=me.selection.getRange().getClosedNode(),flag=img&&img.className=="edui-faked-video";return flag?1:0}}},UM.plugins.selectall=function(){var me=this;me.commands.selectall={execCommand:function(){var me=this,body=me.body,range=me.selection.getRange();range.selectNodeContents(body),domUtils.isEmptyBlock(body)&&(browser.opera&&body.firstChild&&body.firstChild.nodeType==1&&range.setStartAtFirst(body.firstChild),range.collapse(!0)),range.select(!0)},notNeedUndo:1},me.addshortcutkey({selectAll:"ctrl+65"})},UM.plugins.removeformat=function(){var me=this;me.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var"
,removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),me.commands.removeformat={execCommand:function(cmdName,tags,style,attrs,notIncludeA){var tagReg=new RegExp("^(?:"+(tags||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),removeFormatAttributes=style?[]:(attrs||this.options.removeFormatAttributes).split(","),range=new dom.Range(this.document),bookmark,node,parent,filter=function(node){return node.nodeType==1};function isRedundantSpan(node){if(node.nodeType==3||node.tagName.toLowerCase()!="span")return 0;if(browser.ie){var attrs=node.attributes;if(attrs.length){for(var i=0,l=attrs.length;i<l;i++)if(attrs[i].specified)return 0;return 1}}return!node.attributes.length}function doRemove(range){var bookmark1=range.createBookmark();range.collapsed&&range.enlarge(!0);if(!notIncludeA){var aNode=domUtils.findParentByTagName(range.startContainer,"a",!0);aNode&&range.setStartBefore(aNode),aNode=domUtils.findParentByTagName(range.endContainer,"a",!0),aNode&&range.
setEndAfter(aNode)}bookmark=range.createBookmark(),node=bookmark.start;while((parent=node.parentNode)&&!domUtils.isBlockElm(parent))domUtils.breakParent(node,parent),domUtils.clearEmptySibling(node);if(bookmark.end){node=bookmark.end;while((parent=node.parentNode)&&!domUtils.isBlockElm(parent))domUtils.breakParent(node,parent),domUtils.clearEmptySibling(node);var current=domUtils.getNextDomNode(bookmark.start,!1,filter),next;while(current){if(current==bookmark.end)break;next=domUtils.getNextDomNode(current,!0,filter),!dtd.$empty[current.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(current)&&(tagReg.test(current.tagName)?style?(domUtils.removeStyle(current,style),isRedundantSpan(current)&&style!="text-decoration"&&domUtils.remove(current,!0)):domUtils.remove(current,!0):!dtd.$tableContent[current.tagName]&&!dtd.$list[current.tagName]&&(domUtils.removeAttributes(current,removeFormatAttributes),isRedundantSpan(current)&&domUtils.remove(current,!0))),current=next}}var pN=bookmark.start.
parentNode;domUtils.isBlockElm(pN)&&!dtd.$tableContent[pN.tagName]&&!dtd.$list[pN.tagName]&&domUtils.removeAttributes(pN,removeFormatAttributes),pN=bookmark.end.parentNode,bookmark.end&&domUtils.isBlockElm(pN)&&!dtd.$tableContent[pN.tagName]&&!dtd.$list[pN.tagName]&&domUtils.removeAttributes(pN,removeFormatAttributes),range.moveToBookmark(bookmark).moveToBookmark(bookmark1);var node=range.startContainer,tmp,collapsed=range.collapsed;while(node.nodeType==1&&domUtils.isEmptyNode(node)&&dtd.$removeEmpty[node.tagName])tmp=node.parentNode,range.setStartBefore(node),range.startContainer===range.endContainer&&range.endOffset--,domUtils.remove(node),node=tmp;if(!collapsed){node=range.endContainer;while(node.nodeType==1&&domUtils.isEmptyNode(node)&&dtd.$removeEmpty[node.tagName])tmp=node.parentNode,range.setEndBefore(node),domUtils.remove(node),node=tmp}}range=this.selection.getRange(),range.collapsed||(doRemove(range),range.select())}}},UM.plugins.keystrokes=function(){var me=this,collapsed=!0;
me.addListener("keydown",function(type,evt){var keyCode=evt.keyCode||evt.which,rng=me.selection.getRange();if(!rng.collapsed&&!(evt.ctrlKey||evt.shiftKey||evt.altKey||evt.metaKey)&&(keyCode>=65&&keyCode<=90||keyCode>=48&&keyCode<=57||keyCode>=96&&keyCode<=111||{13:1,8:1,46:1}[keyCode])){var tmpNode=rng.startContainer;domUtils.isFillChar(tmpNode)&&rng.setStartBefore(tmpNode),tmpNode=rng.endContainer,domUtils.isFillChar(tmpNode)&&rng.setEndAfter(tmpNode),rng.txtToElmBoundary(),rng.endContainer&&rng.endContainer.nodeType==1&&(tmpNode=rng.endContainer.childNodes[rng.endOffset],tmpNode&&domUtils.isBr(tmpNode)&&rng.setEndAfter(tmpNode));if(rng.startOffset==0){tmpNode=rng.startContainer;if(domUtils.isBoundaryNode(tmpNode,"firstChild")){tmpNode=rng.endContainer;if(rng.endOffset==(tmpNode.nodeType==3?tmpNode.nodeValue.length:tmpNode.childNodes.length)&&domUtils.isBoundaryNode(tmpNode,"lastChild")){me.fireEvent("saveScene"),me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",rng.setStart(me.body
.firstChild,0).setCursor(!1,!0),me._selectionChange();return}}}}if(keyCode==8){rng=me.selection.getRange(),collapsed=rng.collapsed;if(me.fireEvent("delkeydown",evt))return;var start,end;rng.collapsed&&rng.inFillChar()&&(start=rng.startContainer,domUtils.isFillChar(start)?(rng.setStartBefore(start).shrinkBoundary(!0).collapse(!0),domUtils.remove(start)):(start.nodeValue=start.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),rng.startOffset--,rng.collapse(!0).select(!0)));if(start=rng.getClosedNode()){me.fireEvent("saveScene"),rng.setStartBefore(start),domUtils.remove(start),rng.setCursor(),me.fireEvent("saveScene"),domUtils.preventDefault(evt);return}if(!browser.ie){start=domUtils.findParentByTagName(rng.startContainer,"table",!0),end=domUtils.findParentByTagName(rng.endContainer,"table",!0);if(start&&!end||!start&&end||start!==end){evt.preventDefault();return}}start=rng.startContainer;if(rng.collapsed&&start.nodeType==1){var currentNode=start.childNodes[rng.startOffset-1];currentNode&&
currentNode.nodeType==1&&currentNode.tagName=="BR"&&(me.fireEvent("saveScene"),rng.setStartBefore(currentNode).collapse(!0),domUtils.remove(currentNode),rng.select(),me.fireEvent("saveScene"))}if(browser.chrome&&rng.collapsed){while(rng.startOffset==0&&!domUtils.isEmptyBlock(rng.startContainer))rng.setStartBefore(rng.startContainer);var pre=rng.startContainer.childNodes[rng.startOffset-1];pre&&pre.nodeName=="BR"&&(rng.setStartBefore(pre),me.fireEvent("saveScene"),$(pre).remove(),rng.setCursor(),me.fireEvent("saveScene"))}}if(browser.gecko&&keyCode==46){var range=me.selection.getRange();if(range.collapsed){start=range.startContainer;if(domUtils.isEmptyBlock(start)){var parent=start.parentNode;while(domUtils.getChildCount(parent)==1&&!domUtils.isBody(parent))start=parent,parent=parent.parentNode;start===parent.lastChild&&evt.preventDefault();return}}}}),me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which,rng,me=this;if(keyCode==8){if(me.fireEvent("delkeyup"))return;
rng=me.selection.getRange();if(rng.collapsed){var tmpNode,autoClearTagName=["h1","h2","h3","h4","h5","h6"];if(tmpNode=domUtils.findParentByTagName(rng.startContainer,autoClearTagName,!0))if(domUtils.isEmptyBlock(tmpNode)){var pre=tmpNode.previousSibling;if(pre&&pre.nodeName!="TABLE"){domUtils.remove(tmpNode),rng.setStartAtLast(pre).setCursor(!1,!0);return}var next=tmpNode.nextSibling;if(next&&next.nodeName!="TABLE"){domUtils.remove(tmpNode),rng.setStartAtFirst(next).setCursor(!1,!0);return}}if(domUtils.isBody(rng.startContainer)){var tmpNode=domUtils.createElement(me.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});rng.insertNode(tmpNode).setStart(tmpNode,0).setCursor(!1,!0)}}if(!collapsed&&(rng.startContainer.nodeType==3||rng.startContainer.nodeType==1&&domUtils.isEmptyBlock(rng.startContainer)))if(browser.ie){var span=rng.document.createElement("span");rng.insertNode(span).setStartBefore(span).collapse(!0),rng.select(),domUtils.remove(span)}else rng.select()}})},UM.plugins
.autosave=function(){var me=this,lastSaveTime=new Date,MIN_TIME=20,saveKey=null;me.setOpt("saveInterval",500);var LocalStorage=UM.LocalStorage=function(){var storage=window.localStorage||getUserData()||null,LOCAL_FILE="localStorage";return{saveLocalData:function(key,data){return storage&&data?(storage.setItem(key,data),!0):!1},getLocalData:function(key){return storage?storage.getItem(key):null},removeItem:function(key){storage&&storage.removeItem(key)}};function getUserData(){var container=document.createElement("div");return container.style.display="none",container.addBehavior?(container.addBehavior("#default#userdata"),{getItem:function(key){var result=null;try{document.body.appendChild(container),container.load(LOCAL_FILE),result=container.getAttribute(key),document.body.removeChild(container)}catch(e){}return result},setItem:function(key,value){document.body.appendChild(container),container.setAttribute(key,value),container.save(LOCAL_FILE),document.body.removeChild(container)},removeItem
:function(key){document.body.appendChild(container),container.removeAttribute(key),container.save(LOCAL_FILE),document.body.removeChild(container)}}):null}}();function save(editor){var saveData=null;if(new Date-lastSaveTime<MIN_TIME)return;if(!editor.hasContents()){saveKey&&LocalStorage.removeItem(saveKey);return}lastSaveTime=new Date,editor._saveFlag=null,saveData=me.body.innerHTML;if(editor.fireEvent("beforeautosave",{content:saveData})===!1)return;LocalStorage.saveLocalData(saveKey,saveData),editor.fireEvent("afterautosave",{content:saveData})}me.addListener("ready",function(){var _suffix="-drafts-data",key=null;me.key?key=me.key+_suffix:key=(me.container.parentNode.id||"ue-common")+_suffix,saveKey=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+key}),me.addListener("contentchange",function(){if(!saveKey)return;me._saveFlag&&window.clearTimeout(me._saveFlag),me.options.saveInterval>0?me._saveFlag=window.setTimeout(function(){save(me)},me.options.saveInterval
):save(me)}),me.commands.clearlocaldata={execCommand:function(cmd,name){saveKey&&LocalStorage.getLocalData(saveKey)&&LocalStorage.removeItem(saveKey)},notNeedUndo:!0,ignoreContentChange:!0},me.commands.getlocaldata={execCommand:function(cmd,name){return saveKey?LocalStorage.getLocalData(saveKey)||"":""},notNeedUndo:!0,ignoreContentChange:!0},me.commands.drafts={execCommand:function(cmd,name){saveKey&&(me.body.innerHTML=LocalStorage.getLocalData(saveKey)||"<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>",me.focus(!0))},queryCommandState:function(){return saveKey?LocalStorage.getLocalData(saveKey)===null?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}},UM.plugins.autoupload=function(){var me=this;me.setOpt("pasteImageEnabled",!0),me.setOpt("dropFileEnabled",!0);var sendAndInsertImage=function(file,editor){var fd=new FormData;fd.append(editor.options.imageFieldName||"upfile",file,file.name||"blob."+file.type.substr("image/".length)),fd.append("type","ajax");var xhr=new XMLHttpRequest;xhr.open("post"
,me.options.imageUrl,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.addEventListener("load",function(e){try{var response=e.target.response;if(response.startWith("<script>")){var index=response.indexOf("</script>");response=response.substring(index+"</script>".length)}var json=eval("("+response+")"),link=json.url,picLink=me.options.imagePath+link;editor.execCommand("insertimage",{src:picLink,_src:picLink})}catch(er){}}),xhr.send(fd)};function getPasteImage(e){return e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length==1&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}function getDropImage(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}me.addListener("ready",function(){if(window.FormData&&window.FileReader){var autoUploadHandler=function(e){var hasImg=!1,items;items=e.type=="paste"?getPasteImage(e.originalEvent):getDropImage(e.originalEvent);if(items){var len=items.length,file;while(len--)file=items[len
],file.getAsFile&&(file=file.getAsFile()),file&&file.size>0&&/image\/\w+/i.test(file.type)&&(sendAndInsertImage(file,me),hasImg=!0);if(hasImg)return!1}};me.getOpt("pasteImageEnabled")&&me.$body.on("paste",autoUploadHandler),me.getOpt("dropFileEnabled")&&me.$body.on("drop",autoUploadHandler),me.$body.on("dragover",function(e){if(e.originalEvent.dataTransfer.types[0]=="Files")return!1})}})},UM.plugins.formula=function(){var me=this;function getActiveIframe(){return me.$body.find("iframe.edui-formula-active")[0]||null}function blurActiveIframe(){var iframe=getActiveIframe();iframe&&iframe.contentWindow.formula.blur()}me.addInputRule(function(root){$.each(root.getNodesByTagName("span"),function(i,node){if(node.hasClass("mathquill-embedded-latex")){var firstChild,latex="";while(firstChild=node.firstChild())latex+=firstChild.data,node.removeChild(firstChild);node.tagName="iframe",node.setAttr({frameborder:"0",src:me.getOpt("UMEDITOR_HOME_URL")+"dialogs/formula/formula.html","data-latex":utils
.unhtml(latex)})}})}),me.addOutputRule(function(root){$.each(root.getNodesByTagName("iframe"),function(i,node){node.hasClass("mathquill-embedded-latex")&&(node.tagName="span",node.appendChild(UM.uNode.createText(node.getAttr("data-latex"))),node.setAttr({frameborder:"",src:"","data-latex":""}))})}),me.addListener("click",function(){blurActiveIframe()}),me.addListener("afterexeccommand",function(type,cmd){cmd!="formula"&&blurActiveIframe()}),me.commands.formula={execCommand:function(cmd,latex){var iframe=getActiveIframe();iframe?iframe.contentWindow.formula.insertLatex(latex):(me.execCommand("inserthtml",'<span class="mathquill-embedded-latex">'+latex+"</span>"),browser.ie&&browser.ie9below&&setTimeout(function(){var rng=me.selection.getRange(),startContainer=rng.startContainer;startContainer.nodeType==1&&!startContainer.childNodes[rng.startOffset]&&(rng.insertNode(me.document.createTextNode(" ")),rng.setCursor())},100))},queryCommandState:function(cmd){return 0},queryCommandValue:function(
cmd){var iframe=getActiveIframe();return iframe&&iframe.contentWindow.formula.getLatex()}}},function($){$.parseTmpl=function parse(str,data){var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(match,code){return"',"+code.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",func=new Function("obj",tmpl);return data?func(data):func},$.extend2=function(t,s){var a=arguments,notCover=$.type(a[a.length-1])=="boolean"?a[a.length-1]:!1,len=$.type(a[a.length-1])=="boolean"?a.length-1:a.length;for(var i=1;i<len;i++){var x=a[i];for(var k in x)if(!notCover||!t.hasOwnProperty(k))t[k]=x[k]}return t},$.IE6=!!window.ActiveXObject&&parseFloat(navigator.userAgent.match(/msie (\d+)/i)[1])==6;var _eventHandler=
[],_widget=function(){},_prefix="edui";_widget.prototype={on:function(ev,cb){return this.root().on(ev,$.proxy(cb,this)),this},off:function(ev,cb){return this.root().off(ev,$.proxy(cb,this)),this},trigger:function(ev,data){return this.root().trigger(ev,data)===!1?!1:this},root:function($el){return this._$el||(this._$el=$el)},destroy:function(){},data:function(key,val){return val!==undefined?(this.root().data(_prefix+key,val),this):this.root().data(_prefix+key)},register:function(eventName,$el,fn){_eventHandler.push({evtname:eventName,$els:$.isArray($el)?$el:[$el],handler:$.proxy(fn,$el)})}},$.fn.edui=function(obj){return obj?this.data("eduiwidget",obj):this.data("eduiwidget")};function _createClass(ClassObj,properties,supperClass){ClassObj.prototype=$.extend2($.extend({},properties),(UM.ui[supperClass]||_widget).prototype,!0),ClassObj.prototype.supper=(UM.ui[supperClass]||_widget).prototype;if(UM.ui[supperClass]&&UM.ui[supperClass].prototype.defaultOpt){var parentDefaultOptions=UM.ui[supperClass
].prototype.defaultOpt,subDefaultOptions=ClassObj.prototype.defaultOpt;ClassObj.prototype.defaultOpt=$.extend({},parentDefaultOptions,subDefaultOptions||{})}return ClassObj}var _guid=1;function mergeToJQ(ClassObj,className){$[_prefix+className]=ClassObj,$.fn[_prefix+className]=function(opt){var result,args=Array.prototype.slice.call(arguments,1);return this.each(function(i,el){var $this=$(el),obj=$this.edui();obj||(ClassObj(!opt||!$.isPlainObject(opt)?{}:opt,$this),$this.edui(obj));if($.type(opt)=="string")if(opt=="this")result=obj;else{result=obj[opt].apply(obj,args);if(result!==obj&&result!==undefined)return!1;result=null}}),result!==null?result:this}}UM.ui={define:function(className,properties,supperClass){var ClassObj=UM.ui[className]=_createClass(function(options,$el){var _obj=function(){};$.extend(_obj.prototype,ClassObj.prototype,{guid:className+_guid++,widgetName:className});var obj=new _obj;if($.type(options)=="string")return obj.init&&obj.init({}),obj.root().edui(obj),obj.root
().find("a").click(function(evt){evt.preventDefault()}),obj.root()[_prefix+className].apply(obj.root(),arguments);$el&&obj.root($el),obj.init&&obj.init(!options||$.isPlainObject(options)?$.extend2(options||{},obj.defaultOpt||{},!0):options);try{obj.root().find("a").click(function(evt){evt.preventDefault()})}catch(e){}return obj.root().edui(obj)},properties,supperClass);mergeToJQ(ClassObj,className)}},$(function(){$(document).on("click mouseup mousedown dblclick mouseover",function(evt){$.each(_eventHandler,function(i,obj){obj.evtname==evt.type&&$.each(obj.$els,function(i,$el){$el[0]!==evt.target&&!$.contains($el[0],evt.target)&&obj.handler(evt)})})})})}(jQuery),UM.ui.define("button",{tpl:'<<%if(!texttype){%>div class="edui-btn edui-btn-<%=icon%> <%if(name){%>edui-btn-name-<%=name%><%}%>" unselectable="on" onmousedown="return false" <%}else{%>a class="edui-text-btn"<%}%><% if(title) {%> data-original-title="<%=title%>" <%};%>> <% if(icon) {%><div unselectable="on" class="edui-icon-<%=icon%> edui-icon"></div><% }; %><%if(text) {%><span unselectable="on" onmousedown="return false" class="edui-button-label"><%=text%></span><%}%><%if(caret && text){%><span class="edui-button-spacing"></span><%}%><% if(caret) {%><span unselectable="on" onmousedown="return false" class="edui-caret"></span><% };%></<%if(!texttype){%>div<%}else{%>a<%}%>>'
,defaultOpt:{text:"",title:"",icon:"",width:"",caret:!1,texttype:!1,click:function(){}},init:function(options){var me=this;return me.root($($.parseTmpl(me.tpl,options))).click(function(evt){me.wrapclick(options.click,evt)}),me.root().hover(function(){me.root().hasClass("edui-disabled")||me.root().toggleClass("edui-hover")}),me},wrapclick:function(fn,evt){return this.disabled()||(this.root().trigger("wrapclick"),$.proxy(fn,this,evt)()),this},label:function(text){return text===undefined?this.root().find(".edui-button-label").text():(this.root().find(".edui-button-label").text(text),this)},disabled:function(state){return state===undefined?this.root().hasClass("edui-disabled"):(this.root().toggleClass("edui-disabled",state),this.root().hasClass("edui-disabled")&&this.root().removeClass("edui-hover"),this)},active:function(state){return state===undefined?this.root().hasClass("edui-active"):(this.root().toggleClass("edui-active",state),this)},mergeWith:function($obj){var me=this;me.data("$mergeObj"
,$obj),$obj.edui().data("$mergeObj",me.root()),$.contains(document.body,$obj[0])||$obj.appendTo(me.root()),me.on("click",function(){me.wrapclick(function(){$obj.edui().show()})}).register("click",me.root(),function(evt){$obj.hide()})}}),function(){UM.ui.define("toolbar",{tpl:'<div class="edui-toolbar"  ><div class="edui-btn-toolbar" unselectable="on" onmousedown="return false"  ></div></div>',init:function(){var $root=this.root($(this.tpl));this.data("$btnToolbar",$root.find(".edui-btn-toolbar"))},appendToBtnmenu:function(data){var $cont=this.data("$btnToolbar");data=$.isArray(data)?data:[data],$.each(data,function(i,$item){$cont.append($item)})}})}(),UM.ui.define("menu",{show:function($obj,dir,fnname,topOffset,leftOffset){fnname=fnname||"position";if(this.trigger("beforeshow")===!1)return;this.root().css($.extend({display:"block"},$obj?{top:$obj[fnname]().top+(dir=="right"?0:$obj.outerHeight())-(topOffset||0),left:$obj[fnname]().left+(dir=="right"?$obj.outerWidth():0)-(leftOffset||0)}:
{})),this.trigger("aftershow")},hide:function(all){var $parentmenu;if(this.trigger("beforehide")===!1)return;($parentmenu=this.root().data("parentmenu"))&&($parentmenu.data("parentmenu")||all)&&$parentmenu.edui().hide(),this.root().css("display","none"),this.trigger("afterhide")},attachTo:function($obj){var me=this;$obj.data("$mergeObj")||($obj.data("$mergeObj",me.root()),$obj.on("wrapclick",function(evt){me.show()}),me.register("click",$obj,function(evt){me.hide()}),me.data("$mergeObj",$obj))}}),UM.ui.define("dropmenu",{tmpl:'<ul class="edui-dropdown-menu" aria-labelledby="dropdownMenu" ><%for(var i=0,ci;ci=data[i++];){%><%if(ci.divider){%><li class="edui-divider"></li><%}else{%><li <%if(ci.active||ci.disabled){%>class="<%= ci.active|| \'\' %> <%=ci.disabled||\'\' %>" <%}%> data-value="<%= ci.value%>"><a href="#" tabindex="-1"><em class="edui-dropmenu-checkbox"><i class="edui-icon-ok"></i></em><%= ci.label%></a></li><%}%><%}%></ul>',defaultOpt:{data:[],click:function(){}},init:function(
options){var me=this,eventName={click:1,mouseover:1,mouseout:1};this.root($($.parseTmpl(this.tmpl,options))).on("click",'li[class!="edui-disabled edui-divider edui-dropdown-submenu"]',function(evt){$.proxy(options.click,me,evt,$(this).data("value"),$(this))()}).find("li").each(function(i,el){var $this=$(this);if(!$this.hasClass("edui-disabled edui-divider edui-dropdown-submenu")){var data=options.data[i];$.each(eventName,function(k){data[k]&&$this[k](function(evt){$.proxy(data[k],el)(evt,data,me.root)})})}})},disabled:function(cb){$("li[class!=edui-divider]",this.root()).each(function(){var $el=$(this);cb===!0?$el.addClass("edui-disabled"):$.isFunction(cb)?$el.toggleClass("edui-disabled",cb(li)):$el.removeClass("edui-disabled")})},val:function(val){var currentVal;$('li[class!="edui-divider edui-disabled edui-dropdown-submenu"]',this.root()).each(function(){var $el=$(this);if(val===undefined){if($el.find("em.edui-dropmenu-checked").length)return currentVal=$el.data("value"),!1}else $el.find
("em").toggleClass("edui-dropmenu-checked",$el.data("value")==val)});if(val===undefined)return currentVal},addSubmenu:function(label,menu,index){index=index||0;var $list=$("li[class!=edui-divider]",this.root()),$node=$('<li class="edui-dropdown-submenu"><a tabindex="-1" href="#">'+label+"</a></li>").append(menu);index>=0&&index<$list.length?$node.insertBefore($list[index]):index<0?$node.insertBefore($list[0]):index>=$list.length&&$node.appendTo($list)}},"menu"),UM.ui.define("splitbutton",{tpl:'<div class="edui-splitbutton <%if (name){%>edui-splitbutton-<%= name %><%}%>"  unselectable="on" <%if(title){%>data-original-title="<%=title%>"<%}%>><div class="edui-btn"  unselectable="on" ><%if(icon){%><div  unselectable="on" class="edui-icon-<%=icon%> edui-icon"></div><%}%><%if(text){%><%=text%><%}%></div><div  unselectable="on" class="edui-btn edui-dropdown-toggle" ><div  unselectable="on" class="edui-caret"></div></div></div>',defaultOpt:{text:"",title:"",click:function(){}},init:function(options
){var me=this;return me.root($($.parseTmpl(me.tpl,options))),me.root().find(".edui-btn:first").click(function(evt){me.disabled()||$.proxy(options.click,me)()}),me.root().find(".edui-dropdown-toggle").click(function(){me.disabled()||me.trigger("arrowclick")}),me.root().hover(function(){me.root().hasClass("edui-disabled")||me.root().toggleClass("edui-hover")}),me},wrapclick:function(fn,evt){return this.disabled()||$.proxy(fn,this,evt)(),this},disabled:function(state){return state===undefined?this.root().hasClass("edui-disabled"):(this.root().toggleClass("edui-disabled",state).find(".edui-btn").toggleClass("edui-disabled",state),this)},active:function(state){return state===undefined?this.root().hasClass("edui-active"):(this.root().toggleClass("edui-active",state).find(".edui-btn:first").toggleClass("edui-active",state),this)},mergeWith:function($obj){var me=this;me.data("$mergeObj",$obj),$obj.edui().data("$mergeObj",me.root()),$.contains(document.body,$obj[0])||$obj.appendTo(me.root()),me.
root().delegate(".edui-dropdown-toggle","click",function(){me.wrapclick(function(){$obj.edui().show()})}),me.register("click",me.root().find(".edui-dropdown-toggle"),function(evt){$obj.hide()})}}),UM.ui.define("colorsplitbutton",{tpl:'<div class="edui-splitbutton <%if (name){%>edui-splitbutton-<%= name %><%}%>"  unselectable="on" <%if(title){%>data-original-title="<%=title%>"<%}%>><div class="edui-btn"  unselectable="on" ><%if(icon){%><div  unselectable="on" class="edui-icon-<%=icon%> edui-icon"></div><%}%><div class="edui-splitbutton-color-label" <%if (color) {%>style="background: <%=color%>"<%}%>></div><%if(text){%><%=text%><%}%></div><div  unselectable="on" class="edui-btn edui-dropdown-toggle" ><div  unselectable="on" class="edui-caret"></div></div></div>',defaultOpt:{color:""},init:function(options){var me=this;me.supper.init.call(me,options)},colorLabel:function(){return this.root().find(".edui-splitbutton-color-label")}},"splitbutton"),UM.ui.define("popup",{tpl:'<div class="edui-dropdown-menu edui-popup"<%if(!<%=stopprop%>){%>onmousedown="return false"<%}%>><div class="edui-popup-body" unselectable="on" onmousedown="return false"><%=subtpl%></div><div class="edui-popup-caret"></div></div>'
,defaultOpt:{stopprop:!1,subtpl:"",width:"",height:""},init:function(options){return this.root($($.parseTmpl(this.tpl,options))),this},mergeTpl:function(data){return $.parseTmpl(this.tpl,{subtpl:data})},show:function($obj,posObj){posObj||(posObj={});var fnname=posObj.fnname||"position";if(this.trigger("beforeshow")===!1)return;this.root().css($.extend({display:"block"},$obj?{top:$obj[fnname]().top+(posObj.dir=="right"?0:$obj.outerHeight())-(posObj.offsetTop||0),left:$obj[fnname]().left+(posObj.dir=="right"?$obj.outerWidth():0)-(posObj.offsetLeft||0),position:"absolute"}:{})),this.root().find(".edui-popup-caret").css({top:posObj.caretTop||0,left:posObj.caretLeft||0,position:"absolute"}).addClass(posObj.caretDir||"up"),this.trigger("aftershow")},hide:function(){this.root().css("display","none"),this.trigger("afterhide")},attachTo:function($obj,posObj){var me=this;$obj.data("$mergeObj")||($obj.data("$mergeObj",me.root()),$obj.on("wrapclick",function(evt){me.show($obj,posObj)}),me.register("click"
,$obj,function(evt){me.hide()}),me.data("$mergeObj",$obj))},getBodyContainer:function(){return this.root().find(".edui-popup-body")}}),UM.ui.define("scale",{tpl:'<div class="edui-scale" unselectable="on"><span class="edui-scale-hand0"></span><span class="edui-scale-hand1"></span><span class="edui-scale-hand2"></span><span class="edui-scale-hand3"></span><span class="edui-scale-hand4"></span><span class="edui-scale-hand5"></span><span class="edui-scale-hand6"></span><span class="edui-scale-hand7"></span></div>',defaultOpt:{$doc:$(document),$wrap:$(document)},init:function(options){return options.$doc&&(this.defaultOpt.$doc=options.$doc),options.$wrap&&(this.defaultOpt.$wrap=options.$wrap),this.root($($.parseTmpl(this.tpl,options))),this.initStyle(),this.startPos=this.prePos={x:0,y:0},this.dragId=-1,this},initStyle:function(){utils.cssRule("edui-style-scale",".edui-scale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;}.edui-scale span{position:absolute;left:0;top:0;width:7px;height:7px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-scale .edui-scale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-scale .edui-scale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-scale .edui-scale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-scale .edui-scale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-scale .edui-scale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-scale .edui-scale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-scale .edui-scale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-scale .edui-scale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}"
)},_eventHandler:function(e){var me=this,$doc=me.defaultOpt.$doc;switch(e.type){case"mousedown":var hand=e.target||e.srcElement,hand;hand.className.indexOf("edui-scale-hand")!=-1&&(me.dragId=hand.className.slice(-1),me.startPos.x=me.prePos.x=e.clientX,me.startPos.y=me.prePos.y=e.clientY,$doc.bind("mousemove",$.proxy(me._eventHandler,me)));break;case"mousemove":me.dragId!=-1&&(me.updateContainerStyle(me.dragId,{x:e.clientX-me.prePos.x,y:e.clientY-me.prePos.y}),me.prePos.x=e.clientX,me.prePos.y=e.clientY,me.updateTargetElement());break;case"mouseup":if(me.dragId!=-1){me.dragId=-1,me.updateTargetElement();var $target=me.data("$scaleTarget");$target.parent()&&me.attachTo(me.data("$scaleTarget"))}$doc.unbind("mousemove",$.proxy(me._eventHandler,me));break;default:}},updateTargetElement:function(){var me=this,$root=me.root(),$target=me.data("$scaleTarget");$target.css({width:$root.width(),height:$root.height()}),me.attachTo($target)},updateContainerStyle:function(dir,offset){var me=this,$dom=
me.root(),tmp,rect=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];rect[dir][0]!=0&&(tmp=parseInt($dom.offset().left)+offset.x,$dom.css("left",me._validScaledProp("left",tmp))),rect[dir][1]!=0&&(tmp=parseInt($dom.offset().top)+offset.y,$dom.css("top",me._validScaledProp("top",tmp))),rect[dir][2]!=0&&(tmp=$dom.width()+rect[dir][2]*offset.x,$dom.css("width",me._validScaledProp("width",tmp))),rect[dir][3]!=0&&(tmp=$dom.height()+rect[dir][3]*offset.y,$dom.css("height",me._validScaledProp("height",tmp)))},_validScaledProp:function(prop,value){var $ele=this.root(),$wrap=this.defaultOpt.$doc,calc=function(val,a,b){return val+a>b?b-a:value};value=isNaN(value)?0:value;switch(prop){case"left":return value<0?0:calc(value,$ele.width(),$wrap.width());case"top":return value<0?0:calc(value,$ele.height(),$wrap.height());case"width":return value<=0?1:calc(value,$ele.offset().left,$wrap.width());case"height":return value<=0?1:calc(value,$ele.offset().top,$wrap.height
())}},show:function($obj){var me=this;$obj&&me.attachTo($obj),me.root().bind("mousedown",$.proxy(me._eventHandler,me)),me.defaultOpt.$doc.bind("mouseup",$.proxy(me._eventHandler,me)),me.root().show(),me.trigger("aftershow")},hide:function(){var me=this;me.root().unbind("mousedown",$.proxy(me._eventHandler,me)),me.defaultOpt.$doc.unbind("mouseup",$.proxy(me._eventHandler,me)),me.root().hide(),me.trigger("afterhide")},attachTo:function($obj){var me=this,imgPos=$obj.offset(),$root=me.root(),$wrap=me.defaultOpt.$wrap,posObj=$wrap.offset();me.data("$scaleTarget",$obj),me.root().css({position:"absolute",width:$obj.width(),height:$obj.height(),left:imgPos.left-posObj.left-parseInt($wrap.css("border-left-width"))-parseInt($root.css("border-left-width")),top:imgPos.top-posObj.top-parseInt($wrap.css("border-top-width"))-parseInt($root.css("border-top-width"))})},getScaleTarget:function(){return this.data("$scaleTarget")[0]}}),UM.ui.define("colorpicker",{tpl:function(opt){var COLORS="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,"
.split(","),html='<div unselectable="on" onmousedown="return false" class="edui-colorpicker<%if (name){%> edui-colorpicker-<%=name%><%}%>" ><table unselectable="on" onmousedown="return false"><tr><td colspan="10">'+opt.lang_themeColor+"</td> </tr>"+'<tr class="edui-colorpicker-firstrow" >';for(var i=0;i<COLORS.length;i++)i&&i%10===0&&(html+="</tr>"+(i==60?'<tr><td colspan="10">'+opt.lang_standardColor+"</td></tr>":"")+"<tr"+(i==60?' class="edui-colorpicker-firstrow"':"")+">"),html+=i<70?'<td><a unselectable="on" onmousedown="return false" title="'+COLORS[i]+'" class="edui-colorpicker-colorcell"'+' data-color="#'+COLORS[i]+'"'+' style="background-color:#'+COLORS[i]+";border:solid #ccc;"+(i<10||i>=60?"border-width:1px;":i>=10&&i<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":"";return html+="</tr></table></div>",html},init:function(options){var me=this;me.root($($.parseTmpl(me.supper.mergeTpl(me.tpl(options)),options))),me.root().on("click",function(e){me.trigger
("pickcolor",$(e.target).data("color"))})}},"popup"),function(){var widgetName="combobox",itemClassName="edui-combobox-item",HOVER_CLASS="edui-combobox-item-hover",ICON_CLASS="edui-combobox-checked-icon",labelClassName="edui-combobox-item-label";UM.ui.define(widgetName,function(){return{tpl:'<ul class="dropdown-menu edui-combobox-menu<%if (comboboxName!==\'\') {%> edui-combobox-<%=comboboxName%><%}%>" unselectable="on" onmousedown="return false" role="menu" aria-labelledby="dropdownMenu"><%if(autoRecord) {%><%for( var i=0, len = recordStack.length; i<len; i++ ) {%><%var index = recordStack[i];%><li class="<%=itemClassName%><%if( selected == index ) {%> edui-combobox-checked<%}%>" data-item-index="<%=index%>" unselectable="on" onmousedown="return false"><span class="edui-combobox-icon" unselectable="on" onmousedown="return false"></span><label class="<%=labelClassName%>" style="<%=itemStyles[ index ]%>" unselectable="on" onmousedown="return false"><%=items[index]%></label></li><%}%><%if( i ) {%><li class="edui-combobox-item-separator"></li><%}%><%}%><%for( var i=0, label; label = items[i]; i++ ) {%><li class="<%=itemClassName%><%if( selected == i ) {%> edui-combobox-checked<%}%> edui-combobox-item-<%=i%>" data-item-index="<%=i%>" unselectable="on" onmousedown="return false"><span class="edui-combobox-icon" unselectable="on" onmousedown="return false"></span><label class="<%=labelClassName%>" style="<%=itemStyles[ i ]%>" unselectable="on" onmousedown="return false"><%=label%></label></li><%}%></ul>'
,defaultOpt:{recordStack:[],items:[],value:[],comboboxName:"",selected:"",autoRecord:!0,recordCount:5},init:function(options){var me=this;$.extend(me._optionAdaptation(options),me._createItemMapping(options.recordStack,options.items),{itemClassName:itemClassName,iconClass:ICON_CLASS,labelClassName:labelClassName}),this._transStack(options),me.root($($.parseTmpl(me.tpl,options))),this.data("options",options).initEvent()},initEvent:function(){var me=this;me.initSelectItem(),this.initItemActive()},initSelectItem:function(){var me=this,labelClass="."+labelClassName;me.root().delegate("."+itemClassName,"click",function(){var $li=$(this),index=$li.attr("data-item-index");return me.trigger("comboboxselect",{index:index,label:$li.find(labelClass).text(),value:me.data("options").value[index]}).select(index),me.hide(),!1})},initItemActive:function(){var fn={mouseenter:"addClass",mouseleave:"removeClass"};$.IE6&&this.root().delegate("."+itemClassName,"mouseenter mouseleave",function(evt){$(this)[fn
[evt.type]](HOVER_CLASS)}).one("afterhide",function(){})},select:function(index){var itemCount=this.data("options").itemCount,items=this.data("options").autowidthitem;return items&&!items.length&&(items=this.data("options").items),itemCount==0?null:(index<0?index=itemCount+index%itemCount:index>=itemCount&&(index=itemCount-1),this.trigger("changebefore",items[index]),this._update(index),this.trigger("changeafter",items[index]),null)},selectItemByLabel:function(label){var itemMapping=this.data("options").itemMapping,me=this,index=null;!$.isArray(label)&&(label=[label]),$.each(label,function(i,item){index=itemMapping[item];if(index!==undefined)return me.select(index),!1})},_transStack:function(options){var temp=[],itemIndex=-1,selected=-1;$.each(options.recordStack,function(index,item){itemIndex=options.itemMapping[item],$.isNumeric(itemIndex)&&(temp.push(itemIndex),item==options.selected&&(selected=itemIndex))}),options.recordStack=temp,options.selected=selected,temp=null},_optionAdaptation
:function(options){if(!("itemStyles"in options)){options.itemStyles=[];for(var i=0,len=options.items.length;i<len;i++)options.itemStyles.push("")}return options.autowidthitem=options.autowidthitem||options.items,options.itemCount=options.items.length,options},_createItemMapping:function(stackItem,items){var temp={},result={recordStack:[],mapping:{}};return $.each(items,function(index,item){temp[item]=index}),result.itemMapping=temp,$.each(stackItem,function(index,item){temp[item]!==undefined&&(result.recordStack.push(temp[item]),result.mapping[item]=temp[item])}),result},_update:function(index){var options=this.data("options"),newStack=[],newChilds=null;$.each(options.recordStack,function(i,item){item!=index&&newStack.push(item)}),newStack.unshift(index),newStack.length>options.recordCount&&(newStack.length=options.recordCount),options.recordStack=newStack,options.selected=index,newChilds=$($.parseTmpl(this.tpl,options)),this.root().html(newChilds.html()),newChilds=null,newStack=null}}}
(),"menu")}(),function(){var widgetName="buttoncombobox";UM.ui.define(widgetName,function(){return{defaultOpt:{label:"",title:""},init:function(options){var me=this,btnWidget=$.eduibutton({caret:!0,name:options.comboboxName,title:options.title,text:options.label,click:function(){me.show(this.root())}});me.supper.init.call(me,options),me.on("changebefore",function(e,label){btnWidget.eduibutton("label",label)}),me.data("button",btnWidget),me.attachTo(btnWidget)},button:function(){return this.data("button")}}}(),"combobox")}(),UM.ui.define("modal",{tpl:'<div class="edui-modal" tabindex="-1" ><div class="edui-modal-header"><div class="edui-close" data-hide="modal"></div><h3 class="edui-title"><%=title%></h3></div><div class="edui-modal-body"  style="<%if(width){%>width:<%=width%>px;<%}%><%if(height){%>height:<%=height%>px;<%}%>"> </div><% if(cancellabel || oklabel) {%><div class="edui-modal-footer"><div class="edui-modal-tip"></div><%if(oklabel){%><div class="edui-btn edui-btn-primary" data-ok="modal"><%=oklabel%></div><%}%><%if(cancellabel){%><div class="edui-btn" data-hide="modal"><%=cancellabel%></div><%}%></div><%}%></div>'
,defaultOpt:{title:"",cancellabel:"",oklabel:"",width:"",height:"",backdrop:!0,keyboard:!0},init:function(options){var me=this;me.root($($.parseTmpl(me.tpl,options||{}))),me.data("options",options),options.okFn&&me.on("ok",$.proxy(options.okFn,me)),options.cancelFn&&me.on("beforehide",$.proxy(options.cancelFn,me)),me.root().delegate('[data-hide="modal"]',"click",$.proxy(me.hide,me)).delegate('[data-ok="modal"]',"click",$.proxy(me.ok,me)),$('[data-hide="modal"],[data-ok="modal"]',me.root()).hover(function(){$(this).toggleClass("edui-hover")})},toggle:function(){var me=this;return me[me.data("isShown")?"hide":"show"]()},show:function(){var me=this;me.trigger("beforeshow");if(me.data("isShown"))return;me.data("isShown",!0),me.escape(),me.backdrop(function(){me.autoCenter(),me.root().show().focus().trigger("aftershow")})},showTip:function(text){$(".edui-modal-tip",this.root()).html(text).fadeIn()},hideTip:function(text){$(".edui-modal-tip",this.root()).fadeOut(function(){$(this).html("")})}
,autoCenter:function(){!$.IE6&&this.root().css("margin-left",-(this.root().width()/2))},hide:function(){var me=this;me.trigger("beforehide");if(!me.data("isShown"))return;me.data("isShown",!1),me.escape(),me.hideModal()},escape:function(){var me=this;me.data("isShown")&&me.data("options").keyboard?me.root().on("keyup",function(e){e.which==27&&me.hide()}):me.data("isShown")||me.root().off("keyup")},hideModal:function(){var me=this;me.root().hide(),me.backdrop(function(){me.removeBackdrop(),me.trigger("afterhide")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(callback){var me=this;me.data("isShown")&&me.data("options").backdrop&&(me.$backdrop=$('<div class="edui-modal-backdrop" />').click(me.data("options").backdrop=="static"?$.proxy(me.root()[0].focus,me.root()[0]):$.proxy(me.hide,me))),me.trigger("afterbackdrop"),callback&&callback()},attachTo:function($obj){var me=this;$obj.data("$mergeObj")||($obj.data("$mergeObj",me.root()
),$obj.on("click",function(){me.toggle($obj)}),me.data("$mergeObj",$obj))},ok:function(){var me=this;me.trigger("beforeok");if(me.trigger("ok",me)===!1)return;me.hide()},getBodyContainer:function(){return this.root().find(".edui-modal-body")}}),UM.ui.define("tooltip",{tpl:'<div class="edui-tooltip" unselectable="on" onmousedown="return false"><div class="edui-tooltip-arrow" unselectable="on" onmousedown="return false"></div><div class="edui-tooltip-inner" unselectable="on" onmousedown="return false"></div></div>',init:function(options){var me=this;me.root($($.parseTmpl(me.tpl,options||{})))},content:function(e){var me=this,title=$(e.currentTarget).attr("data-original-title");me.root().find(".edui-tooltip-inner").text(title)},position:function(e){var me=this,$obj=$(e.currentTarget);me.root().css($.extend({display:"block"},$obj?{top:$obj.outerHeight(),left:($obj.outerWidth()-me.root().outerWidth())/2}:{}))},show:function(e){if($(e.currentTarget).hasClass("edui-disabled"))return;var me=this
;me.content(e),me.root().appendTo($(e.currentTarget)),me.position(e),me.root().css("display","block")},hide:function(){var me=this;me.root().css("display","none")},attachTo:function($obj){var me=this;function tmp($obj){var me=this;$.contains(document.body,me.root()[0])||me.root().appendTo($obj),me.data("tooltip",me.root()),$obj.each(function(){$(this).attr("data-original-title")&&$(this).on("mouseenter",$.proxy(me.show,me)).on("mouseleave click",$.proxy(me.hide,me))})}$.type($obj)==="undefined"?$("[data-original-title]").each(function(i,el){tmp.call(me,$(el))}):$obj.data("tooltip")||tmp.call(me,$obj)}}),UM.ui.define("tab",{init:function(options){var me=this,slr=options.selector;$.type(slr)&&(me.root($(slr,options.context)),me.data("context",options.context),$(slr,me.data("context")).on("click",function(e){me.show(e)}))},show:function(e){var me=this,$cur=$(e.target),$ul=$cur.closest("ul"),selector,previous,$target,e;selector=$cur.attr("data-context"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/
,"");var $tmp=$cur.parent("li");if(!$tmp.length||$tmp.hasClass("edui-active"))return;previous=$ul.find(".edui-active:last a")[0],e=$.Event("beforeshow",{target:$cur[0],relatedTarget:previous}),me.trigger(e);if(e.isDefaultPrevented())return;$target=$(selector,me.data("context")),me.activate($cur.parent("li"),$ul),me.activate($target,$target.parent(),function(){me.trigger({type:"aftershow",relatedTarget:previous})})},activate:function(element,container,callback){if(element===undefined)return $(".edui-tab-item.edui-active",this.root()).index();var $active=container.find("> .edui-active");$active.removeClass("edui-active"),element.addClass("edui-active"),callback&&callback()}}),UM.ui.define("separator",{tpl:'<div class="edui-separator" unselectable="on" onmousedown="return false" ></div>',init:function(options){var me=this;return me.root($($.parseTmpl(me.tpl,options))),me}}),function(){var _editorUI={},_editors={},_readyFn=[],_activeWidget=null,_widgetData={},_widgetCallBack={},_cacheUI={},
_maxZIndex=null;utils.extend(UM,{defaultWidth:500,defaultHeight:500,registerUI:function(name,fn){utils.each(name.split(/\s+/),function(uiname){_editorUI[uiname]=fn})},setEditor:function(editor){!_editors[editor.id]&&(_editors[editor.id]=editor)},registerWidget:function(name,pro,cb){_widgetData[name]=$.extend2(pro,{$root:"",_preventDefault:!1,root:function($el){return this.$root||(this.$root=$el)},preventDefault:function(){this._preventDefault=!0},clear:!1}),cb&&(_widgetCallBack[name]=cb)},getWidgetData:function(name){return _widgetData[name]},setWidgetBody:function(name,$widget,editor){editor._widgetData||utils.extend(editor,{_widgetData:{},getWidgetData:function(name){return this._widgetData[name]},getWidgetCallback:function(widgetName){var me=this;return function(){return _widgetCallBack[widgetName].apply(me,[me,$widget].concat(Array.prototype.slice.call(arguments,0)))}}});var pro=_widgetData[name];if(!pro)return null;pro=editor._widgetData[name],pro||(pro=_widgetData[name],pro=editor
._widgetData[name]=$.type(pro)=="function"?pro:utils.clone(pro)),pro.root($widget.edui().getBodyContainer()),pro.initContent(editor,$widget),pro._preventDefault||pro.initEvent(editor,$widget),pro.width&&$widget.width(pro.width)},setActiveWidget:function($widget){_activeWidget=$widget},getEditor:function(id,options){var editor=_editors[id]||(_editors[id]=this.createEditor(id,options));return _maxZIndex=_maxZIndex?Math.max(editor.getOpt("zIndex"),_maxZIndex):editor.getOpt("zIndex"),editor},setTopEditor:function(editor){$.each(_editors,function(i,o){editor==o?editor.$container&&editor.$container.css("zIndex",_maxZIndex+1):o.$container&&o.$container.css("zIndex",o.getOpt("zIndex"))})},clearCache:function(id){_editors[id]&&delete _editors[id]},delEditor:function(id){var editor;(editor=_editors[id])&&editor.destroy()},ready:function(fn){_readyFn.push(fn)},createEditor:function(id,opt){var editor=new UM.Editor(opt),T=this;editor.langIsReady?$.proxy(renderUI,T)():editor.addListener("langReady",
$.proxy(renderUI,T));function renderUI(){var $container=this.createUI("#"+id,editor);editor.key=id,editor.ready(function(){$.each(_readyFn,function(index,fn){$.proxy(fn,editor)()})});var options=editor.options;options.initialFrameWidth?options.minFrameWidth=options.initialFrameWidth:options.minFrameWidth=options.initialFrameWidth=editor.$body.width()||UM.defaultWidth,$container.css({width:options.initialFrameWidth,zIndex:editor.getOpt("zIndex")}),UM.browser.ie&&UM.browser.version===6&&document.execCommand("BackgroundImageCache",!1,!0),editor.render(id),$.eduitooltip&&$.eduitooltip("attachTo",$("[data-original-title]",$container)).css("z-index",editor.getOpt("zIndex")+1),$container.find("a").click(function(evt){evt.preventDefault()}),editor.fireEvent("afteruiready")}return editor},createUI:function(id,editor){var $editorCont=$(id),$container=$('<div class="edui-container"><div class="edui-editor-body"></div></div>').insertBefore($editorCont);editor.$container=$container,editor.container=
$container[0],editor.$body=$editorCont;if(browser.ie&&browser.ie9above){var $span=$('<span style="padding:0;margin:0;height:0;width:0"></span>');$span.insertAfter($container)}return $.each(_editorUI,function(n,v){var widget=v.call(editor,n);widget&&(_cacheUI[n]=widget)}),$container.find(".edui-editor-body").append($editorCont).before(this.createToolbar(editor.options,editor)),$container.find(".edui-toolbar").append($('<div class="edui-dialog-container"></div>')),$container},createToolbar:function(options,editor){var $toolbar=$.eduitoolbar(),toolbar=$toolbar.edui();if(options.toolbar&&options.toolbar.length){var btns=[];$.each(options.toolbar,function(i,uiNames){$.each(uiNames.split(/\s+/),function(index,name){if(name=="|")$.eduiseparator&&btns.push($.eduiseparator());else{var ui=_cacheUI[name];name=="fullscreen"?ui&&btns.unshift(ui):ui&&btns.push(ui)}}),btns.length&&toolbar.appendToBtnmenu(btns)})}else $toolbar.find(".edui-btn-toolbar").remove();return $toolbar}})}(),UM.registerUI("bold italic redo undo underline strikethrough superscript subscript insertorderedlist insertunorderedlist cleardoc selectall link unlink print preview justifyleft justifycenter justifyright justifyfull removeformat horizontal drafts"
,function(name){var me=this,$btn=$.eduibutton({icon:name,click:function(){me.execCommand(name)},title:this.getLang("labelMap")[name]||""});return this.addListener("selectionchange",function(){var state=this.queryCommandState(name);$btn.edui().disabled(state==-1).active(state==1)}),$btn}),function(){var STATUS_CACHE={},STATUS_LIST=["width","height","position","top","left","margin","padding","overflowX","overflowY"],CONTENT_AREA_STATUS={},DOCUMENT_STATUS={},DOCUMENT_ELEMENT_STATUS={},FULLSCREENS={};UM.registerUI("fullscreen",function(name){var me=this,$button=$.eduibutton({icon:"fullscreen",title:me.options.labelMap&&me.options.labelMap[name]||me.getLang("labelMap."+name),click:function(){me.execCommand(name),UM.setTopEditor(me)}});return me.addListener("selectionchange",function(){var state=this.queryCommandState(name);$button.edui().disabled(state==-1).active(state==1)}),me.addListener("ready",function(){me.options.fullscreen&&Fullscreen.getInstance(me).toggle()}),$button}),UM.commands.
fullscreen={execCommand:function(cmdName){Fullscreen.getInstance(this).toggle()},queryCommandState:function(cmdName){return this._edui_fullscreen_status},notNeedUndo:1};function Fullscreen(editor){var me=this;if(!editor)throw new Error("invalid params, notfound editor");me.editor=editor,FULLSCREENS[editor.uid]=this,editor.addListener("destroy",function(){delete FULLSCREENS[editor.uid],me.editor=null})}Fullscreen.prototype={toggle:function(){var editor=this.editor,_edui_fullscreen_status=this.isFullState();editor.fireEvent("beforefullscreenchange",!_edui_fullscreen_status),this.update(!_edui_fullscreen_status),_edui_fullscreen_status?this.revert():this.enlarge(),editor.fireEvent("afterfullscreenchange",!_edui_fullscreen_status),editor.body.contentEditable==="true"&&editor.fireEvent("fullscreenchanged",!_edui_fullscreen_status),editor.fireEvent("selectionchange")},enlarge:function(){this.saveSataus(),this.setDocumentStatus(),this.resize()},revert:function(){var options=this.editor.options
,height=/%$/.test(options.initialFrameHeight)?"100%":options.initialFrameHeight-this.getStyleValue("padding-top")-this.getStyleValue("padding-bottom")-this.getStyleValue("border-width");$.IE6&&this.getEditorHolder().style.setExpression("height","this.scrollHeight <= "+height+' ? "'+height+'px" : "auto"'),this.revertContainerStatus(),this.revertContentAreaStatus(),this.revertDocumentStatus()},update:function(isFull){this.editor._edui_fullscreen_status=isFull},resize:function(){var $win=null,height=0,width=0,borderWidth=0,paddingWidth=0,editor=this.editor,me=this,bound=null,editorBody=null;if(!this.isFullState())return;$win=$(window),width=$win.width(),height=$win.height(),editorBody=this.getEditorHolder(),borderWidth=parseInt(domUtils.getComputedStyle(editorBody,"border-width"),10)||0,borderWidth+=parseInt(domUtils.getComputedStyle(editor.container,"border-width"),10)||0,paddingWidth+=parseInt(domUtils.getComputedStyle(editorBody,"padding-left"),10)+parseInt(domUtils.getComputedStyle(editorBody
,"padding-right"),10)||0,$.IE6&&editorBody.style.setExpression("height",null),bound=this.getBound(),$(editor.container).css({width:width+"px",height:height+"px",position:$.IE6?"absolute":"fixed",top:bound.top,left:bound.left,margin:0,padding:0,overflowX:"hidden",overflowY:"hidden"}),$(editorBody).css({width:width-2*borderWidth-paddingWidth+"px",height:height-2*borderWidth-(editor.options.withoutToolbar?0:$(".edui-toolbar",editor.container).outerHeight())-$(".edui-bottombar",editor.container).outerHeight()+"px",overflowX:"hidden",overflowY:"auto"})},saveSataus:function(){var styles=this.editor.container.style,tmp=null,cache={};for(var i=0,len=STATUS_LIST.length;i<len;i++)tmp=STATUS_LIST[i],cache[tmp]=styles[tmp];STATUS_CACHE[this.editor.uid]=cache,this.saveContentAreaStatus(),this.saveDocumentStatus()},saveContentAreaStatus:function(){var $holder=$(this.getEditorHolder());CONTENT_AREA_STATUS[this.editor.uid]={width:$holder.css("width"),overflowX:$holder.css("overflowX"),overflowY:$holder
.css("overflowY"),height:$holder.css("height")}},saveDocumentStatus:function(){var $doc=$(this.getEditorDocumentBody());DOCUMENT_STATUS[this.editor.uid]={overflowX:$doc.css("overflowX"),overflowY:$doc.css("overflowY")},DOCUMENT_ELEMENT_STATUS[this.editor.uid]={overflowX:$(this.getEditorDocumentElement()).css("overflowX"),overflowY:$(this.getEditorDocumentElement()).css("overflowY")}},revertContainerStatus:function(){$(this.editor.container).css(this.getEditorStatus())},revertContentAreaStatus:function(){var holder=this.getEditorHolder(),state=this.getContentAreaStatus();this.supportMin()&&(delete state.height,holder.style.height=null),$(holder).css(state)},revertDocumentStatus:function(){var status=this.getDocumentStatus();$(this.getEditorDocumentBody()).css("overflowX",status.body.overflowX),$(this.getEditorDocumentElement()).css("overflowY",status.html.overflowY)},setDocumentStatus:function(){$(this.getEditorDocumentBody()).css({overflowX:"hidden",overflowY:"hidden"}),$(this.getEditorDocumentElement
()).css({overflowX:"hidden",overflowY:"hidden"})},isFullState:function(){return!!this.editor._edui_fullscreen_status},getEditorStatus:function(){return STATUS_CACHE[this.editor.uid]},getContentAreaStatus:function(){return CONTENT_AREA_STATUS[this.editor.uid]},getEditorDocumentElement:function(){return this.editor.container.ownerDocument.documentElement},getEditorDocumentBody:function(){return this.editor.container.ownerDocument.body},getEditorHolder:function(){return this.editor.body},getDocumentStatus:function(){return{body:DOCUMENT_STATUS[this.editor.uid],html:DOCUMENT_ELEMENT_STATUS[this.editor.uid]}},supportMin:function(){var node=null;return this._support||(node=document.createElement("div"),this._support="minWidth"in node.style,node=null),this._support},getBound:function(){var tags={html:!0,body:!0},result={top:0,left:0},offsetParent=null;return $.IE6?(offsetParent=this.editor.container.offsetParent,offsetParent&&!tags[offsetParent.nodeName.toLowerCase()]&&(tags=offsetParent.getBoundingClientRect
(),result.top=-tags.top,result.left=-tags.left),result):result},getStyleValue:function(attr){return parseInt(domUtils.getComputedStyle(this.getEditorHolder(),attr))}},$.extend(Fullscreen,{listen:function(){var timer=null;if(Fullscreen._hasFullscreenListener)return;Fullscreen._hasFullscreenListener=!0,$(window).on("resize",function(){timer!==null&&(window.clearTimeout(timer),timer=null),timer=window.setTimeout(function(){for(var key in FULLSCREENS)FULLSCREENS[key].resize();timer=null},50)})},getInstance:function(editor){return FULLSCREENS[editor.uid]||new Fullscreen(editor),FULLSCREENS[editor.uid]}}),Fullscreen.listen()}(),UM.registerUI("link image video map formula",function(name){var me=this,currentRange,$dialog,opt={title:me.options.labelMap&&me.options.labelMap[name]||me.getLang("labelMap."+name),url:me.options.UMEDITOR_HOME_URL+"dialogs/"+name+"/"+name+".js"},$btn=$.eduibutton({icon:name,title:this.getLang("labelMap")[name]||""});return utils.loadFile(document,{src:opt.url,tag:"script"
,type:"text/javascript",defer:"defer"},function(){var data=UM.getWidgetData(name);if(!data)return;if(data.buttons){var ok=data.buttons.ok;ok&&(opt.oklabel=ok.label||me.getLang("ok"),ok.exec&&(opt.okFn=function(){return $.proxy(ok.exec,null,me,$dialog)()}));var cancel=data.buttons.cancel;cancel&&(opt.cancellabel=cancel.label||me.getLang("cancel"),cancel.exec&&(opt.cancelFn=function(){return $.proxy(cancel.exec,null,me,$dialog)()}))}data.width&&(opt.width=data.width),data.height&&(opt.height=data.height),$dialog=$.eduimodal(opt),$dialog.attr("id","edui-dialog-"+name).addClass("edui-dialog-"+name).find(".edui-modal-body").addClass("edui-dialog-"+name+"-body"),$dialog.edui().on("beforehide",function(){var rng=me.selection.getRange();rng.equals(currentRange)&&rng.select()}).on("beforeshow",function(){var $root=this.root(),win=null,offset=null;currentRange=me.selection.getRange(),$root.parent()[0]||me.$container.find(".edui-dialog-container").append($root),$.IE6&&(win={width:$(window).width()
,height:$(window).height()},offset=$root.parents(".edui-toolbar")[0].getBoundingClientRect(),$root.css({position:"absolute",margin:0,left:(win.width-$root.width())/2-offset.left,top:100-offset.top})),UM.setWidgetBody(name,$dialog,me),UM.setTopEditor(me)}).on("afterbackdrop",function(){this.$backdrop.css("zIndex",me.getOpt("zIndex")+1).appendTo(me.$container.find(".edui-dialog-container")),$dialog.css("zIndex",me.getOpt("zIndex")+2)}).on("beforeok",function(){try{currentRange.select()}catch(e){}}).attachTo($btn)}),me.addListener("selectionchange",function(){var state=this.queryCommandState(name);$btn.edui().disabled(state==-1).active(state==1)}),$btn}),UM.registerUI("emotion formula",function(name){var me=this,url=me.options.UMEDITOR_HOME_URL+"dialogs/"+name+"/"+name+".js",$btn=$.eduibutton({icon:name,title:this.getLang("labelMap")[name]||""});return utils.loadFile(document,{src:url,tag:"script",type:"text/javascript",defer:"defer"},function(){var opt={url:url},data=UM.getWidgetData(name
);data.width&&(opt.width=data.width),data.height&&(opt.height=data.height),$.eduipopup(opt).css("zIndex",me.options.zIndex+1).addClass("edui-popup-"+name).edui().on("beforeshow",function(){var $root=this.root();$root.parent().length||me.$container.find(".edui-dialog-container").append($root),UM.setWidgetBody(name,$root,me),UM.setTopEditor(me)}).attachTo($btn,{offsetTop:-5,offsetLeft:10,caretLeft:11,caretTop:-8}),me.addListener("selectionchange",function(){var state=this.queryCommandState(name);$btn.edui().disabled(state==-1).active(state==1)})}),$btn}),UM.registerUI("imagescale",function(){var me=this,$imagescale;me.setOpt("imageScaleEnabled",!0),browser.webkit&&me.getOpt("imageScaleEnabled")&&(me.addListener("click",function(type,e){var range=me.selection.getRange(),img=range.getClosedNode(),target=e.target;if(img&&img.tagName=="IMG"&&target==img){if(!$imagescale){$imagescale=$.eduiscale({$wrap:me.$container}).css("zIndex",me.options.zIndex),me.$container.append($imagescale);var _keyDownHandler=
function(){$imagescale.edui().hide()},_mouseDownHandler=function(e){var ele=e.target||e.srcElement;ele&&ele.className.indexOf("edui-scale")==-1&&_keyDownHandler(e)},timer;$imagescale.edui().on("aftershow",function(){$(document).bind("keydown",_keyDownHandler),$(document).bind("mousedown",_mouseDownHandler),me.selection.getNative().removeAllRanges()}).on("afterhide",function(){$(document).unbind("keydown",_keyDownHandler),$(document).unbind("mousedown",_mouseDownHandler);var target=$imagescale.edui().getScaleTarget();target.parentNode&&me.selection.getRange().selectNode(target).select()}).on("mousedown",function(e){me.selection.getNative().removeAllRanges();var ele=e.target||e.srcElement;ele&&ele.className.indexOf("edui-scale-hand")==-1&&(timer=setTimeout(function(){$imagescale.edui().hide()},200))}).on("mouseup",function(e){var ele=e.target||e.srcElement;ele&&ele.className.indexOf("edui-scale-hand")==-1&&clearTimeout(timer)})}$imagescale.edui().show($(img))}else $imagescale&&$imagescale
.css("display")!="none"&&$imagescale.edui().hide()}),me.addListener("click",function(type,e){if(e.target.tagName=="IMG"){var range=new dom.Range(me.document,me.body);range.selectNode(e.target).select()}}))}),UM.registerUI("autofloat",function(){var me=this,lang=me.getLang();me.setOpt({autoFloatEnabled:!0,topOffset:0});var optsAutoFloatEnabled=me.options.autoFloatEnabled!==!1,topOffset=me.options.topOffset;if(!optsAutoFloatEnabled)return;me.ready(function(){var LteIE6=browser.ie&&browser.version<=6,quirks=browser.quirks;function checkHasUI(){return UM.ui?1:(alert(lang.autofloatMsg),0)}function fixIE6FixedPos(){var docStyle=document.body.style;docStyle.backgroundImage='url("about:blank")',docStyle.backgroundAttachment="fixed"}var bakCssText,placeHolder=document.createElement("div"),toolbarBox,orgTop,getPosition=function(element){var bcr;try{bcr=element.getBoundingClientRect()}catch(e){bcr={left:0,top:0,height:0,width:0}}var rect={left:Math.round(bcr.left),top:Math.round(bcr.top),height:Math
.round(bcr.bottom-bcr.top),width:Math.round(bcr.right-bcr.left)},doc;while((doc=element.ownerDocument)!==document&&(element=domUtils.getWindow(doc).frameElement))bcr=element.getBoundingClientRect(),rect.left+=bcr.left,rect.top+=bcr.top;return rect.bottom=rect.top+rect.height,rect.right=rect.left+rect.width,rect},isFullScreening=!1;function setFloating(){if(isFullScreening)return;var toobarBoxPos=domUtils.getXY(toolbarBox),origalFloat=domUtils.getComputedStyle(toolbarBox,"position"),origalLeft=domUtils.getComputedStyle(toolbarBox,"left");toolbarBox.style.width=toolbarBox.offsetWidth+"px",toolbarBox.style.zIndex=me.options.zIndex*1+1,toolbarBox.parentNode.insertBefore(placeHolder,toolbarBox),LteIE6||quirks&&browser.ie?(toolbarBox.style.position!="absolute"&&(toolbarBox.style.position="absolute"),toolbarBox.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-orgTop+topOffset+"px"):toolbarBox.style.position!="fixed"&&(toolbarBox.style.position="fixed",toolbarBox.style.top=
topOffset+"px",(origalFloat=="absolute"||origalFloat=="relative")&&parseFloat(origalLeft)&&(toolbarBox.style.left=toobarBoxPos.x+"px"))}function unsetFloating(){placeHolder.parentNode&&placeHolder.parentNode.removeChild(placeHolder),toolbarBox.style.cssText=bakCssText}function updateFloating(){var rect3=getPosition(me.container),offset=me.options.toolbarTopOffset||0;rect3.top<0&&rect3.bottom-toolbarBox.offsetHeight>offset?setFloating():unsetFloating()}var defer_updateFloating=utils.defer(function(){updateFloating()},browser.ie?200:100,!0);me.addListener("destroy",function(){$(window).off("scroll resize",updateFloating),me.removeListener("keydown",defer_updateFloating)}),checkHasUI(me)&&(toolbarBox=$(".edui-toolbar",me.container)[0],me.addListener("afteruiready",function(){setTimeout(function(){orgTop=$(toolbarBox).offset().top},100)}),bakCssText=toolbarBox.style.cssText,placeHolder.style.height=toolbarBox.offsetHeight+"px",LteIE6&&fixIE6FixedPos(),$(window).on("scroll resize",updateFloating
),me.addListener("keydown",defer_updateFloating),me.addListener("resize",function(){unsetFloating(),placeHolder.style.height=toolbarBox.offsetHeight+"px",updateFloating()}),me.addListener("beforefullscreenchange",function(t,enabled){enabled&&(unsetFloating(),isFullScreening=enabled)}),me.addListener("fullscreenchanged",function(t,enabled){enabled||updateFloating(),isFullScreening=enabled}),me.addListener("sourcemodechanged",function(t,enabled){setTimeout(function(){updateFloating()},0)}),me.addListener("clearDoc",function(){setTimeout(function(){updateFloating()},0)}))})}),UM.registerUI("source",function(name){var me=this;me.addListener("fullscreenchanged",function(){me.$container.find("textarea").width(me.$body.width()-10).height(me.$body.height())});var $btn=$.eduibutton({icon:name,click:function(){me.execCommand(name),UM.setTopEditor(me)},title:this.getLang("labelMap")[name]||""});return this.addListener("selectionchange",function(){var state=this.queryCommandState(name);$btn.edui().
disabled(state==-1).active(state==1)}),$btn}),UM.registerUI("paragraph fontfamily fontsize",function(name){var me=this,label=me.options.labelMap&&me.options.labelMap[name]||me.getLang("labelMap."+name),options={label:label,title:label,comboboxName:name,items:me.options[name]||[],itemStyles:[],value:[],autowidthitem:[]},$combox=null,comboboxWidget=null;if(options.items.length==0)return null;switch(name){case"paragraph":options=transForParagraph(options);break;case"fontfamily":options=transForFontfamily(options);break;case"fontsize":options=transForFontsize(options)}$combox=$.eduibuttoncombobox(options).css("zIndex",me.getOpt("zIndex")+1),comboboxWidget=$combox.edui(),comboboxWidget.on("comboboxselect",function(evt,res){me.execCommand(name,res.value)}).on("beforeshow",function(){$combox.parent().length===0&&$combox.appendTo(me.$container.find(".edui-dialog-container")),UM.setTopEditor(me)}),this.addListener("selectionchange",function(evt){var state=this.queryCommandState(name),value=this.
queryCommandValue(name);comboboxWidget.button().edui().disabled(state==-1).active(state==1),value&&(value=value.replace(/['"]/g,"").toLowerCase().split(/['|"]?\s*,\s*[\1]?/),comboboxWidget.selectItemByLabel(value))});return comboboxWidget.button().addClass("edui-combobox");function wordCountAdaptive(word,hasSuffix){var $tmpNode=$("<span>").html(word).css({display:"inline",position:"absolute",top:-1e7,left:-1e5}).appendTo(document.body),width=$tmpNode.width();return $tmpNode.remove(),$tmpNode=null,width<50?word:(word=word.slice(0,hasSuffix?-4:-1),word.length?wordCountAdaptive(word+"...",!0):"...")}function transForParagraph(options){var tempItems=[];for(var key in options.items)options.value.push(key),tempItems.push(key),options.autowidthitem.push(wordCountAdaptive(key));return options.items=tempItems,options.autoRecord=!1,options}function transForFontfamily(options){var temp=null,tempItems=[];for(var i=0,len=options.items.length;i<len;i++)temp=options.items[i].val,tempItems.push(temp.split
(/\s*,\s*/)[0]),options.itemStyles.push("font-family: "+temp),options.value.push(temp),options.autowidthitem.push(wordCountAdaptive(tempItems[i]));return options.items=tempItems,options}function transForFontsize(options){var temp=null,tempItems=[];options.itemStyles=[],options.value=[];for(var i=0,len=options.items.length;i<len;i++)temp=options.items[i],tempItems.push(temp),options.itemStyles.push("font-size: "+temp+"px");return options.value=options.items,options.items=tempItems,options.autoRecord=!1,options}}),UM.registerUI("forecolor backcolor",function(name){function getCurrentColor(){return domUtils.getComputedStyle($colorLabel[0],"background-color")}var me=this,$colorPickerWidget=null,$colorLabel=null,$btn=null;return this.addListener("selectionchange",function(){var state=this.queryCommandState(name);$btn.edui().disabled(state==-1).active(state==1)}),$btn=$.eduicolorsplitbutton({icon:name,caret:!0,name:name,title:me.getLang("labelMap")[name],click:function(){me.execCommand(name,getCurrentColor
())}}),$colorLabel=$btn.edui().colorLabel(),$colorPickerWidget=$.eduicolorpicker({name:name,lang_clearColor:me.getLang("clearColor")||"",lang_themeColor:me.getLang("themeColor")||"",lang_standardColor:me.getLang("standardColor")||""}).on("pickcolor",function(evt,color){window.setTimeout(function(){$colorLabel.css("backgroundColor",color),me.execCommand(name,color)},0)}).on("show",function(){UM.setActiveWidget(colorPickerWidget.root())}).css("zIndex",me.getOpt("zIndex")+1),$btn.edui().on("arrowclick",function(){$colorPickerWidget.parent().length||me.$container.find(".edui-dialog-container").append($colorPickerWidget),$colorPickerWidget.edui().show($btn,{caretDir:"down",offsetTop:-5,offsetLeft:8,caretLeft:11,caretTop:-8}),UM.setTopEditor(me)}).register("click",$btn,function(){$colorPickerWidget.edui().hide()}),$btn})}(jQuery),define("ueditor",function(){}),function(){var URL=window.UMEDITOR_HOME_URL||function(){function PathStack(){this.documentURL=self.document.URL||self.location.href,this
.separator="/",this.separatorPattern=/\\|\//g,this.currentDir="./",this.currentDirPattern=/^[.]\/]/,this.path=this.documentURL,this.stack=[],this.push(this.documentURL)}PathStack.isParentPath=function(path){return path===".."},PathStack.hasProtocol=function(path){return!!PathStack.getProtocol(path)},PathStack.getProtocol=function(path){var protocol=/^[^:]*:\/*/.exec(path);return protocol?protocol[0]:null},PathStack.prototype={push:function(path){return this.path=path,update.call(this),parse.call(this),this},getPath:function(){return this+""},toString:function(){return this.protocol+this.stack.concat([""]).join(this.separator)}};function update(){var protocol=PathStack.getProtocol(this.path||"");protocol?(this.protocol=protocol,this.localSeparator=/\\|\//.exec(this.path.replace(protocol,""))[0],this.stack=[]):(protocol=/\\|\//.exec(this.path),protocol&&(this.localSeparator=protocol[0]))}function parse(){var parsedStack=this.path.replace(this.currentDirPattern,"");PathStack.hasProtocol(this
.path)&&(parsedStack=parsedStack.replace(this.protocol,"")),parsedStack=parsedStack.split(this.localSeparator),parsedStack.length=parsedStack.length-1;for(var i=0,tempPath,l=parsedStack.length,root=this.stack;i<l;i++)tempPath=parsedStack[i],tempPath&&(PathStack.isParentPath(tempPath)?root.pop():root.push(tempPath))}var currentPath=document.getElementsByTagName("script");return currentPath=currentPath[currentPath.length-1].src,(new PathStack).push(currentPath)+""}();window.UMEDITOR_CONFIG={UMEDITOR_HOME_URL:"js/lib/umeditor1_2_2/",imageUrl:"/changedig/fileUploader/upload",imagePath:"",imageFieldName:"upfile",toolbar:["source | undo redo | bold | italic | underline | paragraph | link unlink  |  image | fullscreen"],initialFrameHeight:320,pasteplain:!0,initialStyle:".edui-editor-body .edui-body-container p{letter-spacing: 2px;line-height: 24px;font-size: 16px;color: #4C4C4C;}",paragraph:{p:"",h1:"",h2:"",h3:"",h4:""},autoFloatEnabled:!1}}(),define("ueditor-config",function(){}),angular.module
("ms.mueditor",[]).directive("msMueditor",["$timeout",function($timeout){return{restrict:"EA",require:"ngModel",scope:{},link:function($S,element,attr,ctrl){var _NGUeditor,_updateByRender;_updateByRender=!1,_NGUeditor=function(){function _NGUeditor(){this.bindRender(),this.initEditor();return}return _NGUeditor.prototype.initEditor=function(){var _editorId,_self;_self=this;if(typeof UM=="undefined"){console.error("Please import the local resources of ueditor!");return}return _editorId=attr.id?attr.id:"_editor"+Date.now(),element[0].id=_editorId,this.editor=UM.getEditor(_editorId),this.editor.ready(function(){_self.editorReady=!0,_self.editor.addListener("contentChange",function(){ctrl.$setViewValue(_self.editor.getContent()),_updateByRender||$S.$$phase||$S.$apply(),_updateByRender=!1}),_self.modelContent&&_self.modelContent.length>0&&_self.setEditorContent(""),$S.$on("$destroy",function(){!attr.id&&UM.delEditor&&UM.delEditor(_editorId)})})},_NGUeditor.prototype.setEditorContent=function(
content){content==null&&(content=this.modelContent),this.editor&&this.editorReady&&this.editor.setContent(content)},_NGUeditor.prototype.bindRender=function(){var _self;_self=this,ctrl.$render=function(){_self.modelContent=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue,_updateByRender=!0,_self.setEditorContent()}},_NGUeditor}(),new _NGUeditor}}}]),define("ng-ueditor",["ueditor","ueditor-config"],function(){}),function(){angular.module("ngKeditor",[]).directive("keditor",function($rootScope,$sce){var linkFn=function(scope,elm,attr,ctrl){if(typeof window.KindEditor=="undefined")throw new Error("Please import the local resources of kindeditor!");var editor,editorId=elm[0],_config={width:"100%",autoHeightMode:!1,afterCreate:function(){this.loadPlugin("autoheight")},afterChange:function(){var content=this.html();editor&&(console.log("ready"),scope.$evalAsync(function(){ctrl.$setViewValue(content)}))}},isReady=!1,editorConfig=angular.extend(_config,scope.config);editor=new KindEditor.create
(editorId,editorConfig),KindEditor.ready(function(){isReady=!0;var _content=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;editor.html(_content)});var regObj=scope.pattern?new RegExp(scope.pattern):!1;regObj&&ctrl.$parsers.push(function(value){regObj.test(value)?ctrl.$setValidity(attr.ngModel,!0):ctrl.$setValidity(attr.ngModel,!1)}),ctrl.$render=function(){if(editor){var _content=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;editor.html(_content)}}};return{restrict:"AC",require:"^ngModel",scope:{config:"=",pattern:"="},link:linkFn}})}.call(this),define("ngKeditor",function(){});var commonNg=angular.module("app.commons",[]);commonNg.constant("config",{hostUrl:"",baseUrl:sysConfig.baseUrl,ucenterUrl:sysConfig.ucenterUrl,webBaseUrl:sysConfig.webBaseUrl,pageSize:10}),commonNg.constant("regex",{userRegStr:"/^[a-zA-Z0-9\\u4e00-\\u9fa5,\\.;\\:'\u3002\uff0c\uff1a\uff1b\uff01!\\s]+$/"}),commonNg.value("gUserInfo",{faceUrl:""}),commonNg.run(function($rootScope,$state,$stateParams){$rootScope
.forceReload=function(){$state.go($state.current,$stateParams,{reload:!0,inherit:!1,notify:!0})},$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){$rootScope.previousState_name=fromState.name,$rootScope.previousState_params=fromParams}),$rootScope.back=function(){$state.go($rootScope.previousState_name,$rootScope.previousState_params)},$rootScope.UTILS={},$rootScope.UTILS.getKeys=function(map){var keySets=new Array;for(var key in map)typeof map[key]!="function"&&keySets.push(key);return keySets.toString()},$rootScope.UTILS.getValues=function(map){var valueSets=new Array;for(var key in map)typeof map[key]!="function"&&valueSets.push(map[key]);return valueSets.toString()}}),commonNg.factory("$ls",["$window",function($window){return{set:function(key,value){$window.localStorage[key]=value},get:function(key,defaultValue){return $window.localStorage[key]||defaultValue},setObject:function(key
,value){$window.localStorage[key]=JSON.stringify(value)},getObject:function(key){return JSON.parse($window.localStorage[key]||"{}")},clear:function(){$window.localStorage.clear()},remove:function(key){$window.localStorage.removeItem(key)}}}]),commonNg.factory("$ss",["$window",function($window){return{set:function(key,value){$window.sessionStorage[key]=value},get:function(key,defaultValue){return $window.sessionStorage[key]||defaultValue},setObject:function(key,value){$window.sessionStorage[key]=JSON.stringify(value)},getObject:function(key){return JSON.parse($window.sessionStorage[key]||"{}")},clear:function(){$window.sessionStorage.clear()},remove:function(key){$window.sessionStorage.removeItem(key)}}}]),commonNg.config(function($httpProvider){$httpProvider.interceptors.push(["$rootScope","$window","$q","$ss","$location","$timeout","$cookieStore",function($rootScope,$window,$q,$ss,$location,$timeout,$cookieStore){return{request:function(config){config.headers["X-Requested-With"]="XMLHttpRequest"
;if(config.method=="GET"&&(config.url.indexOf("/changedig/")!=-1||config.url.indexOf("/ucenter/")!=-1||config.url.indexOf("/activity/")!=-1||config.url.indexOf("/Communicate/")!=-1||config.url.indexOf("/demand/")!=-1)){var separator=config.url.indexOf("?")===-1?"?":"&";config.url=config.url+separator+"noCache="+(new Date).getTime()}return config||$q.when(config)},requestError:function(rejection){return rejection},response:function(response){if(typeof response.data=="string"&&response.data.indexOf('<meta name="pageType" content="login"/>')!=-1){$window.location.href="login.html";return}return response||$q.when(response)},responseError:function(response){return console.log("responseError:"+response),response.status===401||response.status===403?($cookieStore.remove("name"),$cookieStore.remove("sessionId"),$timeout(function(){},1e3),!1):$q.reject(response)}}}])}),commonNg.directive("messageAlert",[function(){return{restrict:"AE",scope:{message:"=",show:"="},templateUrl:"../../partials/modalUtils/alert.html"
,controller:function($scope,$element,$attrs,$transclude){},replace:!0,link:function($scope){}}}]),commonNg.directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){event.which===13&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}),commonNg.filter("htmlToPlaintext",function(){return function(text){return text?String(text).replace(/<[^>]+>/gm,""):""}}),commonNg.controller("commonCtrl",["$rootScope","$scope","$http","$modal",function($rootScope,$scope,$http,$modal){$rootScope.showFeedback=function(){return $modal.open({templateUrl:"partials/common/feedbackModel.html",controller:"feedbackModelController",size:"lg",keyboard:!0})},$rootScope.showAboutUs=function(){return $modal.open({templateUrl:"partials/common/aboutUsModel.html",controller:"aboutUsModelController",size:"lg",keyboard:!0})}}]),commonNg.controller("feedbackModelController",["$scope","$window","$modalInstance","$http","$timeout","config"
,"messageCenterService",function($scope,$window,$modalInstance,$http,$timeout,config,messageCenterService){$scope.feedback={clientType:1,opinion:"",email:"",grpValidCode:"",userCode:typeof portal!="undefined"&&portal.ready?portal.getCurrentUser().user.userCode:""},$scope.saveDisabled=!0,$scope.invalidPojo={opinion:!1,email:!1,yzmNull:!1,yzmType:!1},$scope.customInvalid=function(){var flag=!1;return!$scope.feedback.opinion||$scope.feedback.opinion.length==0?(flag=!0,$scope.invalidPojo.opinion=!0,$scope.saveDisabled=!0):$scope.invalidPojo.opinion=!1,!$scope.feedback.email||$scope.feedback.email.length==0?(flag=!0,$scope.invalidPojo.email=!0,$scope.saveDisabled=!0):$scope.invalidPojo.email=!1,!$scope.feedback.grpValidCode||$scope.feedback.grpValidCode.length==0?(flag=!0,$scope.invalidPojo.yzmNull=!0,$scope.saveDisabled=!0):$scope.invalidPojo.yzmNull=!1,flag},$scope.yzmGraph={},$scope.cutOption=function(){$scope.feedback.opinion.length>=500&&($scope.feedback.opinion=$scope.feedback.opinion.
substr(0,500))},$scope.huanYzm=function(){$http({url:config.ucenterUrl+"/sys/getEmailValidCode",method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},cache:!1}).success(function(data){data.success&&($scope.yzmGraph=data.obj)}).error(function(data){console.log("\u9a8c\u8bc1\u7801\u83b7\u53d6\u5931\u8d25")})},$scope.huanYzm(),$scope.message="",$scope.pushFeedback=function(comment){if($scope.customInvalid()){$scope.saveDisabled=!0;return}$scope.saveDisabled=!1,$http({url:config.ucenterUrl+"/sys/feedbackWeb?__ajax=true",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:comment,cache:!1}).success(function(data,header,config,status){data.success?($scope.message="\u63d0\u4ea4\u6210\u529f\uff01",$timeout($scope.okKey,2e3)):data.errno=="5"&&($scope.invalidPojo.yzmType=!0)}).error(function(data){console.log(data),console.log("\u63d0\u4ea4\u53d1\u9001\u5931\u8d25\u3002")})},$scope.cancel=function(){$scope.message="",$modalInstance.close(!1)},$scope.okKey=
function(){$scope.message="",$modalInstance.close(!1)}}]),commonNg.controller("aboutUsModelController",["$scope","$modalInstance","config",function($scope,$modalInstance,config){$scope.cancel=function(){$modalInstance.close(!1)},$scope.okKey=function(){$modalInstance.close(!1)}}]),define("common",function(){}),angular.module("app.commons").directive("myselect",function(){return{restrict:"AE",scope:{itemContainer:"=",selectedItemVal:"=",selectWidth:"@",placeholder:"@"},template:'<div class="xiala" style="width: {{selectWidth}} ;" tabindex="2" ng-blur="hideSelect()"><div class="text-span" style="width: {{selectWidth}};"  ng-click="itemSelect()"><span ng-class="{\'myselectColor\':selectedItemDisp != placeholder}">{{selectedItemDisp|cut:true:25}}</span></div><ul style="margin-top: 0px;position: absolute;z-index: 1000;background-color: #fff;width:{{selectWidth}};" ng-show="prv.itemsShow" ><li ng-repeat="u in prv.allItems" ng-click="chooseItem(u)"><span ng-bind="u.disp|cut:true:25"></span></li></ul></div>'
,replace:!0,link:function(scope,elem,attr){scope.prv={},scope.prv.itemsShow=!1,scope.prv.allItems=[],scope.updateDisp=function(selectedValue){for(var j=0;j<scope.prv.allItems.length;++j)if(scope.prv.allItems[j].val==selectedValue){scope.selectedItemDisp=scope.prv.allItems[j].disp;break}},scope.initMySelect=function(){scope.prv={},scope.prv.itemsShow=!1,scope.prv.allItems=[];if(null==scope.selectedItemVal||""==scope.selectedItemVal){if(null==scope.placeholder||""==scope.placeholder)scope.placeholder="\u8bf7\u9009\u62e9";scope.selectedItemDisp=scope.placeholder}if(null==scope.itemContainer||""==scope.itemContainer)return;var attrs=[];for(var i=0;i<scope.itemContainer.length;++i){var obj={val:"",disp:""};if(scope.itemContainer[i]instanceof Object){if(0==i)for(a in scope.itemContainer[i])attrs.push(a);null!=attrs[0]&&""!=attrs[0]&&(obj.val=scope.itemContainer[i][attrs[0]]),1==attrs.length?obj.disp=scope.itemContainer[i][attrs[0]]:null!=attrs[1]&&""!=attrs[1]&&(obj.disp=scope.itemContainer[i
][attrs[1]]),scope.prv.allItems.push(obj)}else console.log("myselect:error input array,array object should have 1 or 2 attributes.")}null!=scope.selectedItemVal&&""!=scope.selectedItemVal&&scope.updateDisp(scope.selectedItemVal)},scope.initMySelect(),scope.itemSelect=function(){scope.prv.itemsShow=!scope.prv.itemsShow},scope.chooseItem=function(u){scope.selectedItemVal=u.val,scope.prv.itemsShow=!1},scope.hideSelect=function(){setTimeout(function(){scope.prv.itemsShow=!1},500)};function updateChoosenCallback(newValue,oldValue){if(newValue==oldValue)return;scope.updateDisp(newValue)}scope.$watch("selectedItemVal",updateChoosenCallback,!0),scope.$watch("itemContainer",function(newValue,oldValue){if(newValue==oldValue)return;scope.initMySelect()},!0)}}}),define("mySelect",function(){}),angular.module("app.commons").directive("richSelect",function(){return{restrict:"AE",scope:{items:"=",selectedItemVal:"=",selectWidth:"@",key:"@",disp:"@",placeholder:"@"},template:'<div class="xiala" style="width: {{selectWidth}};" tabindex="2" ng-blur="hideSelect()">   <div class="text-span" style="width: {{selectWidth}};"  ng-click="itemSelect()">     <span ng-class="{\'myselectColor\':selectedItem[disp] != placeholder}">{{selectedItem[disp] | cut:true:22}}</span>     <span class="select-pubrange" ng-if="selectedItem.pubRange">{{selectedItem.pubRange==1?"\u79d1\u6280\u5317\u6597":"\u672c\u4f01\u4e1a"}}</span>   </div>   <ul style="margin-top: 0px;position: absolute;z-index: 1000;background-color: #fff;width:{{selectWidth}};"  ng-show="itemsShow" >     <li ng-repeat="u in allItems" ng-click="chooseItem(u)">       <span ng-bind="u[disp] | cut:true:22"></span><span class="select-pubrange" ng-if="u.pubRange">{{u.pubRange==1?"\u79d1\u6280\u5317\u6597":"\u672c\u4f01\u4e1a"}}</span>     </li>   </ul></div>'
,replace:!0,link:function(scope,elem,attr){scope.itemsShow=!1,scope.allItems=[],scope.selectedItem={},scope.updateDisp=function(selectedValue){for(var j=0;j<scope.allItems.length;++j)if(scope.allItems[j][scope.key]==selectedValue){scope.selectedItem=scope.allItems[j];break}},scope.initMySelect=function(){scope.itemsShow=!1,scope.allItems=scope.items;if(null==scope.selectedItemVal||""==scope.selectedItemVal){if(null==scope.placeholder||""==scope.placeholder)scope.placeholder="\u8bf7\u9009\u62e9";scope.selectedItem[scope.disp]=scope.placeholder}null!=scope.selectedItemVal&&""!=scope.selectedItemVal&&scope.updateDisp(scope.selectedItemVal)},scope.initMySelect(),scope.itemSelect=function(){scope.itemsShow=!scope.itemsShow},scope.chooseItem=function(u){scope.selectedItemVal=u[scope.key],scope.itemsShow=!1},scope.hideSelect=function(){scope.itemsShow=!1};function updateChoosenCallback(newValue,oldValue){if(newValue==oldValue)return;scope.updateDisp(newValue)}scope.$watch("selectedItemVal",updateChoosenCallback
,!0),scope.$watch("items",function(newValue,oldValue){if(newValue==oldValue)return;scope.initMySelect()},!0)}}}),define("richSelect",function(){}),function(){angular.module("mypagination",[]).directive("mypagination",function(){return{restrict:"AE",template:'<ul class="pagination-main">\n  <li class="prev-page" ng-class="{disabled:pageData.pageNo==1}">\n    <a href="javascript:void(0);" ng-click="pageData.pageNo==1 || on_prev()" title="\u4e0a\u4e00\u9875"><span class="fa fa-caret-left fa-2x"></span></a>\n  </li>\n  <li class="data-page" ng-repeat="page in pageData.pages track by $index" ng-class="{\'first-page\': page==1, \'last-page\': page==pageData.totalPage,\'active\': page==pageData.pageNo}">\n    <a ng-if="page!=\'\u2026\'" href="javascript:void(0);" ng-class="{\'bg-custom\': page==pageData.pageNo}" ng-click="on_loadPage(page)">{{ page }}</a>\n    <a ng-if="page==\'\u2026\'" href="javascript:void(0);" class="noborder" ng-class="{\'bg-custom\': page==pageData.pageNo}">{{ page }}</a>\n  </li>\n  <li class="next-page" ng-class="{disabled:pageData.pageNo==pageData.totalPage}">\n    <a href="javascript:void(0);" ng-click="pageData.pageNo==pageData.totalPage || on_next()" title="\u4e0b\u4e00\u9875"><span class="fa fa-caret-right fa-2x"></span></a>\n  </li>\n  <li class="skip-page"><div><input type="text"  onkeyup="this.value=this.value.replace(/D/g,\'\')" onafterpaste="this.value=this.value.replace(/D/g,\'\')" placeholder="" ng-model="inpage" >\n    <input type="button" value="GO" ng-click="on_loadPage(inpage)"></div>\n  </li>\n  <li class="data-num"><a class="cursor-text"  style="cursor: default"><span>\u5171{{pageData.totalRecord}}\u6761</span></a></li>\n</ul>\n'
,replace:!0,scope:{pageData:"=",prev:"&",next:"&",loadPage:"&",maxSize:"@"},link:function(scope,element,attrs){var pages=[],getPages=function(currentPage,totalPage){var temp=[];if(totalPage<=9)for(var i=1;i<=totalPage;i++)temp.push(i);else totalPage>9&&currentPage<=5?temp=[1,2,3,4,5,6,7,"\u2026",totalPage]:totalPage>9&&currentPage>=totalPage-4?temp=[1,"\u2026",totalPage-6,totalPage-5,totalPage-4,totalPage-3,totalPage-2,totalPage-1,totalPage]:totalPage>9&&currentPage<totalPage-4&&currentPage>5&&(temp=[1,"\u2026",currentPage-2,currentPage-1,currentPage,currentPage+1,currentPage+2,"\u2026",totalPage]);return temp};pages=getPages(scope.pageData.pageNo,scope.pageData.totalPage),scope.$watch("pageData",function(value){pages=getPages(scope.pageData.pageNo,scope.pageData.totalPage),scope.pageData.pages=pages}),scope.on_prev=function(){scope.prev&&scope.prev()},scope.on_next=function(){scope.next&&scope.next()},scope.on_loadPage=function(page){scope.inpage=undefined;var re=/^[1-9]+[0-9]*]*$/;if(!
re.test(page))return alert("\u8bf7\u8f93\u5165\u6b63\u6574\u6570"),!1;scope.loadPage&&scope.loadPage({no:page})}}}})}.call(window),define("mypagination",function(){}),define("app",["angular","uiRouter","ngCookies","./directives/index","./services/index","./controllers/index","./filters/index","ui-bootstrap","ngSanitize","ngTouch","angucomplete","angular-qrcode","ipCookie","carouselar","angularFileUpload","cropper","ngCropper","ng-ueditor","ngKeditor","mySelect","richSelect","mypagination"],function(){var app=angular.module("app",["app.commons","app.directives","app.filters","ui.router","app.controllers","app.services","ui.bootstrap","ngCookies","ngTouch","angucomplete","monospaced.qrcode","ngSanitize","ipCookie","ngKeditor","ngFileUpload","cropper","ms.mueditor","ngCropper","mypagination"]);return app.run(function($rootScope,$location,$modal,$state,$stateParams,$window,ipCookie,loginService){$rootScope.titleStr="\u79d1\u6280\u5317\u6597 - \u79d1\u6280\u4e13\u5bb6",$rootScope.actor=0,$rootScope
.initActor=function(){if($stateParams.enterpriseCode!=undefined&&$stateParams.enterpriseCode!=null){var selOrgCode=portal.getCurrentUser().portal.groupId;portal.ready&&$stateParams.enterpriseCode!=selOrgCode&&($window.location.href="expertHome.html#/home?enterpriseCode="+selOrgCode)}$stateParams.enterpriseCode=="1"?$rootScope.actor=0:$stateParams.actor==3?$rootScope.actor=1:$stateParams.actor==2?$rootScope.actor=2:$rootScope.actor=1},$rootScope.openDetail=function(any){any.typeCode==1&&$window.open("projectHome.html#/projectDetail/"+portal.getCurrentUser().portal.groupId+"/"+any.code),any.typeCode==2&&$window.open("paperHome.html#/detail/"+portal.getCurrentUser().portal.groupId+"/"+any.code),any.typeCode==3&&$window.open("patentHome.html#/detail/"+portal.getCurrentUser().portal.groupId+"/"+any.code),any.typeCode==11&&$window.open("projectHome.html#/storyDetail/"+portal.getCurrentUser().portal.groupId+"/"+any.code),any.typeCode==4&&$window.open("/details/"+portal.getCurrentUser().portal.
groupId+"/"+any.code),any.typeCode==5&&$window.open("/demand/detail.html?code="+any.code+"&enterpriseCode="+any.enterpriseCode),any.typeCode==71&&$window.open("projectHome.html#/productDetail/"+portal.getCurrentUser().portal.groupId+"/"+any.code),any.typeCode==21&&$window.open("/activity/ActivityInfo/Detail?code="+any.code+"&source=1"),any.typeCode==211&&$window.open("/activity/report/Detail?code="+any.code+"&source=1&enterpriseCode="+any.enterpriseCode),any.typeCode==212&&$window.open("/activity/product/Detail?code="+any.code+"&source=1&enterpriseCode="+any.enterpriseCode),(any.typeCode==8||any.typeCode==81)&&$window.open("/projectHome.html#/personalPage/"+any.code),any.typeCode==7&&$window.open("/projectHome.html#/enterprisePage/"+any.code)}}),app}),define("routes",["./app"],function(app){app.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/home/1"),$stateProvider.state("home",{url:"/home/:enterpriseCode",views:{mainView:{templateUrl:"partials/expertHome/expertHome.html"
,controller:"expertHomeController"}}}),$stateProvider.state("more",{url:"/more/:enterpriseCode",views:{mainView:{templateUrl:"partials/expertHome/expertList.html",controller:"projectExpertController"}}})})}),define("boot1484653963783",["require","angular","./app","./routes","common","uiRouter","ngCookies","cropper","ngTouch","angucomplete","ngCropper","ipCookie"],function(require,angular,app){require(["domReady!"],function(document){angular.bootstrap(document,[app.name])})});